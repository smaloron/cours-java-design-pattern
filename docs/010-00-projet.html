<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-preset="contrast" data-primary-color="#307FFF"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="robots" content="noindex"><meta name="built-on" content="2025-07-28T16:55:43.817215"><title>Atelier Final : Conception d'une Feature de A &agrave; Z | Java-design-pattern</title><script type="application/json" id="virtual-toc-data">[{"id":"objectifs-p-dagogiques","level":0,"title":"Objectifs Pédagogiques","anchor":"#objectifs-p-dagogiques"},{"id":"introduction-votre-chef-d-uvre","level":0,"title":"Introduction : Votre Chef-d\u0027Œuvre","anchor":"#introduction-votre-chef-d-uvre"},{"id":"le-sc-nario-le-nouveau-syst-me-de-promotions","level":0,"title":"Le Scénario : Le Nouveau Système de Promotions","anchor":"#le-sc-nario-le-nouveau-syst-me-de-promotions"},{"id":"votre-mission-de-l-id-e-au-code","level":0,"title":"Votre Mission : De l\u0027Idée au Code","anchor":"#votre-mission-de-l-id-e-au-code"}]</script><script type="application/json" id="topic-shortcuts"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.22.0-b776/app.css" rel="stylesheet"><meta name="msapplication-TileColor" content="#000000"><link rel="apple-touch-icon" sizes="180x180" href="https://jetbrains.com/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://jetbrains.com/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://jetbrains.com/favicon-16x16.png"><meta name="msapplication-TileImage" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-144x144.png"><meta name="msapplication-square70x70logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-70x70.png"><meta name="msapplication-square150x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-150x150.png"><meta name="msapplication-wide310x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x150.png"><meta name="msapplication-square310x310logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x310.png"><meta name="image" content=""><!-- Open Graph --><meta property="og:title" content="Atelier Final : Conception d'une Feature de A &agrave; Z | Java-design-pattern"><meta property="og:description" content=""><meta property="og:image" content=""><meta property="og:site_name" content="Java-design-pattern Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="writerside-documentation/010-00-projet.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content=""><meta name="twitter:title" content="Atelier Final : Conception d'une Feature de A &agrave; Z | Java-design-pattern"><meta name="twitter:description" content=""><meta name="twitter:creator" content=""><meta name="twitter:image:src" content=""><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "writerside-documentation/010-00-projet.html#webpage",
    "url": "writerside-documentation/010-00-projet.html",
    "name": "Atelier Final : Conception d'une Feature de A &agrave; Z | Java-design-pattern",
    "description": "",
    "image": "",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "writerside-documentation/#website",
    "url": "writerside-documentation/",
    "name": "Java-design-pattern Help"
}</script><!-- End Schema.org --></head><body data-id="010-00-projet" data-main-title="Atelier Final : Conception d'une Feature de A à Z" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs=""><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>Java-design-pattern  Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="010-00-projet" id="010-00-projet.md">Atelier Final : Conception d'une Feature de A à Z</h1><section class="chapter"><h2 id="objectifs-p-dagogiques" data-toc="objectifs-p-dagogiques">Objectifs P&eacute;dagogiques</h2><p id="-6l5tye_7">&Agrave; la fin de cet atelier, vous aurez d&eacute;montr&eacute; votre capacit&eacute; &agrave; :</p><ul class="list _bullet" id="-6l5tye_8"><li class="list__item" id="-6l5tye_9"><p id="-6l5tye_14"><span class="control" id="-6l5tye_15">Analyser</span> une exigence m&eacute;tier et la d&eacute;composer en responsabilit&eacute;s techniques.</p></li><li class="list__item" id="-6l5tye_10"><p id="-6l5tye_16"><span class="control" id="-6l5tye_17">S&eacute;lectionner</span> une combinaison de Design Patterns appropri&eacute;s pour r&eacute;soudre un probl&egrave;me complexe.</p></li><li class="list__item" id="-6l5tye_11"><p id="-6l5tye_18"><span class="control" id="-6l5tye_19">Justifier</span> vos choix de conception de mani&egrave;re argument&eacute;e.</p></li><li class="list__item" id="-6l5tye_12"><p id="-6l5tye_20"><span class="control" id="-6l5tye_21">Concevoir</span> une solution flexible, maintenable et extensible.</p></li><li class="list__item" id="-6l5tye_13"><p id="-6l5tye_22"><span class="control" id="-6l5tye_23">Impl&eacute;menter</span> cette solution en int&eacute;grant harmonieusement plusieurs patterns.</p></li></ul></section><section class="chapter"><h2 id="introduction-votre-chef-d-uvre" data-toc="introduction-votre-chef-d-uvre">Introduction : Votre Chef-d'&OElig;uvre</h2><p id="-6l5tye_24">Vous avez suivi la formation, vous avez appris les gammes, vous avez ma&icirc;tris&eacute; vos outils. Cet atelier est votre concert. Il ne s'agit plus de reproduire un exercice sur un seul pattern, mais de faire face &agrave; une page blanche (ou presque) et de composer votre propre solution.</p><p id="-6l5tye_25">C'est l'exercice qui incarne le mieux votre futur r&ocirc;le de <span class="control" id="-6l5tye_26">Concepteur D&eacute;veloppeur d'Application</span>. Il met l'accent sur la phase la plus cruciale et la plus cr&eacute;ative du d&eacute;veloppement : la <span class="control" id="-6l5tye_27">conception</span>. Comment allez-vous structurer votre code pour qu'il r&eacute;ponde au besoin d'aujourd'hui, tout en &eacute;tant pr&ecirc;t pour les demandes de demain ?</p></section><section class="chapter"><h2 id="le-sc-nario-le-nouveau-syst-me-de-promotions" data-toc="le-sc-nario-le-nouveau-syst-me-de-promotions">Le Sc&eacute;nario : Le Nouveau Syst&egrave;me de Promotions</h2><p id="-6l5tye_28">La direction de la biblioth&egrave;que est ravie de votre travail et souhaite maintenant lancer un programme de fid&eacute;lisation pour dynamiser les emprunts.</p><p id="-6l5tye_29"><span class="control" id="-6l5tye_31">L'exigence m&eacute;tier est la suivante :</span></p><aside class="prompt" data-type="tip" data-title="" id="-6l5tye_30"><p id="-6l5tye_32">&quot;Nous voulons pouvoir lancer des campagnes promotionnelles cibl&eacute;es pour nos utilisateurs. Une campagne doit permettre d'envoyer une offre par email ou SMS &agrave; un groupe d'utilisateurs. Les offres peuvent &ecirc;tre de diff&eacute;rents types : par exemple, '10% de r&eacute;duction sur les p&eacute;nalit&eacute;s de retard' ou 'Empruntez 2 livres, le 3&egrave;me est gratuit pour une semaine'. Le syst&egrave;me doit &ecirc;tre flexible pour nous permettre d'ajouter facilement de nouveaux types d'offres &agrave; l'avenir.&quot;</p></aside></section><section class="chapter"><h2 id="votre-mission-de-l-id-e-au-code" data-toc="votre-mission-de-l-id-e-au-code">Votre Mission : De l'Id&eacute;e au Code</h2><p id="-6l5tye_33">Cet atelier se d&eacute;roule en deux temps : d'abord la conception, ensuite l'impl&eacute;mentation.</p><section class="chapter"><h3 id="partie-1-la-phase-de-conception-r-flexion" data-toc="partie-1-la-phase-de-conception-r-flexion">Partie 1 : La Phase de Conception (R&eacute;flexion)</h3><p id="-6l5tye_37">Avant d'&eacute;crire la moindre ligne de code, prenez une feuille de papier (ou un outil de diagrammes) et r&eacute;pondez aux questions suivantes. C'est la phase la plus importante.</p><ol class="list _decimal" id="-6l5tye_38" type="1"><li class="list__item" id="-6l5tye_40"><p id="-6l5tye_44"><span class="control" id="-6l5tye_45">Identification des responsabilit&eacute;s :</span> Quelles sont les grandes &quot;id&eacute;es&quot; ou &quot;responsabilit&eacute;s&quot; dans ce syst&egrave;me ? (ex: la promotion elle-m&ecirc;me, la mani&egrave;re d'appliquer la promotion, l'envoi de la notification, etc.).</p></li><li class="list__item" id="-6l5tye_41"><p id="-6l5tye_46"><span class="control" id="-6l5tye_48">Choix des Patterns :</span> Pour chaque responsabilit&eacute; identifi&eacute;e, quel(s) pattern(s) vous semble(nt) le(s) plus appropri&eacute;(s) ?</p><ul class="list _bullet" id="-6l5tye_47"><li class="list__item" id="-6l5tye_49"><p id="-6l5tye_53">Comment repr&eacute;senter une promotion, qui peut avoir de nombreux param&egrave;tres (date de d&eacute;but, date de fin, description, type...) ?</p></li><li class="list__item" id="-6l5tye_50"><p id="-6l5tye_54">Comment g&eacute;rer les diff&eacute;rents types d'offres (<code class="code" id="-6l5tye_55">10% de r&eacute;duction</code>, <code class="code" id="-6l5tye_56">3 pour 2</code>) de mani&egrave;re &agrave; pouvoir en ajouter facilement de nouvelles ?</p></li><li class="list__item" id="-6l5tye_51"><p id="-6l5tye_57">Comment g&eacute;rer les diff&eacute;rents canaux de notification (email, SMS) ? (Nous avons d&eacute;j&agrave; des pistes !)</p></li><li class="list__item" id="-6l5tye_52"><p id="-6l5tye_58">Comment simplifier le d&eacute;clenchement d'une campagne pour le code client (par exemple, un administrateur qui clique sur un bouton &quot;Lancer la campagne&quot;) ?</p></li></ul></li><li class="list__item" id="-6l5tye_42"><p id="-6l5tye_59"><span class="control" id="-6l5tye_60">Justification :</span> Pour chaque pattern choisi, &eacute;crivez une phrase expliquant <span class="control" id="-6l5tye_61">pourquoi</span> vous l'avez s&eacute;lectionn&eacute;.</p></li><li class="list__item" id="-6l5tye_43"><p id="-6l5tye_62"><span class="control" id="-6l5tye_63">Diagramme d'ensemble :</span> Esquissez un diagramme UML (m&ecirc;me simplifi&eacute;) montrant comment ces diff&eacute;rents composants et patterns interagissent entre eux.</p></li></ol><aside class="prompt" data-type="warning" data-title="" id="-6l5tye_39"><p>Ne sautez pas cette &eacute;tape ! C'est le c&oelig;ur de l'exercice. Prenez 15 &agrave; 30 minutes pour y r&eacute;fl&eacute;chir s&eacute;rieusement avant de consulter la correction.</p></aside></section><section class="chapter"><h3 id="partie-2-la-phase-d-impl-mentation-action" data-toc="partie-2-la-phase-d-impl-mentation-action">Partie 2 : La Phase d'Impl&eacute;mentation (Action)</h3><p id="-6l5tye_64">Une fois votre conception au clair, il est temps de la traduire en code dans notre projet fil rouge.</p><p id="-6l5tye_65"><span class="control" id="-6l5tye_68">Cahier des charges :</span></p><ol class="list _decimal" id="-6l5tye_66" type="1"><li class="list__item" id="-6l5tye_69"><p id="-6l5tye_74"><span class="control" id="-6l5tye_75">Le Mod&egrave;le :</span> Cr&eacute;ez une classe <code class="code" id="-6l5tye_76">Promotion</code> qui repr&eacute;sente une offre. Utilisez le pattern que vous avez choisi pour sa construction.</p></li><li class="list__item" id="-6l5tye_70"><p id="-6l5tye_77"><span class="control" id="-6l5tye_78">Les Algorithmes :</span> Impl&eacute;mentez la logique pour les diff&eacute;rents types d'offres (<code class="code" id="-6l5tye_79">DiscountPromotionStrategy</code>, <code class="code" id="-6l5tye_80">ThreeForTwoPromotionStrategy</code>) en utilisant le pattern appropri&eacute;. Ces &quot;strat&eacute;gies&quot; prendront un utilisateur en param&egrave;tre et retourneront un message d&eacute;crivant l'offre personnalis&eacute;e.</p></li><li class="list__item" id="-6l5tye_71"><p id="-6l5tye_81"><span class="control" id="-6l5tye_82">L'Orchestration :</span> Cr&eacute;ez un service (<code class="code" id="-6l5tye_83">PromotionService</code>) capable d'appliquer une promotion &agrave; un utilisateur. Ce service utilisera les algorithmes de l'&eacute;tape 2.</p></li><li class="list__item" id="-6l5tye_72"><p id="-6l5tye_84"><span class="control" id="-6l5tye_85">La Simplification :</span> Cr&eacute;ez une classe qui simplifie tout le processus (<code class="code" id="-6l5tye_86">PromotionFacade</code>). Elle prendra en entr&eacute;e une <code class="code" id="-6l5tye_87">Promotion</code>, une liste d'utilisateurs cibles et un canal de notification. Elle se chargera d'orchestrer le <code class="code" id="-6l5tye_88">PromotionService</code> et le <code class="code" id="-6l5tye_89">NotificationService</code>.</p></li><li class="list__item" id="-6l5tye_73"><p id="-6l5tye_90"><span class="control" id="-6l5tye_91">Le Point d'Entr&eacute;e :</span> Cr&eacute;ez un <code class="code" id="-6l5tye_92">PromotionController</code> avec un endpoint <code class="code" id="-6l5tye_93">POST /api/promotions/launch</code> qui d&eacute;clenche l'envoi d'une campagne via la fa&ccedil;ade.</p></li></ol></section><section class="chapter"><div class="collapse"><div class="collapse__title"><h3 id="correction-de-l-atelier" data-toc="correction-de-l-atelier">Correction de l'Atelier</h3></div><div class="collapse__content"><p id="-6l5tye_94">Excellent travail ! Comparons maintenant votre conception et votre impl&eacute;mentation avec une solution possible. Il n'y a pas une seule bonne r&eacute;ponse, mais les principes directeurs devraient &ecirc;tre similaires.</p><section class="chapter"><h4 id="correction-partie-1-conception" data-toc="correction-partie-1-conception">Correction Partie 1 : Conception</h4><ol class="list _decimal" id="-6l5tye_97" type="1"><li class="list__item" id="-6l5tye_102"><p id="-6l5tye_105"><span class="control" id="-6l5tye_107">Responsabilit&eacute;s identifi&eacute;es :</span></p><ul class="list _bullet" id="-6l5tye_106"><li class="list__item" id="-6l5tye_108"><p id="-6l5tye_112">Repr&eacute;senter l'objet <code class="code" id="-6l5tye_113">Promotion</code> avec ses multiples attributs.</p></li><li class="list__item" id="-6l5tye_109"><p id="-6l5tye_114">D&eacute;finir la logique d'application de l'offre (le &quot;calcul&quot; de la promotion).</p></li><li class="list__item" id="-6l5tye_110"><p id="-6l5tye_115">Notifier l'utilisateur via diff&eacute;rents canaux.</p></li><li class="list__item" id="-6l5tye_111"><p id="-6l5tye_116">Fournir un point d'entr&eacute;e simple pour lancer une campagne.</p></li></ul></li><li class="list__item" id="-6l5tye_103"><p id="-6l5tye_117"><span class="control" id="-6l5tye_119">Choix des Patterns :</span></p><ul class="list _bullet" id="-6l5tye_118"><li class="list__item" id="-6l5tye_120"><p id="-6l5tye_124"><span class="control" id="-6l5tye_125">Builder :</span> Pour construire l'objet <code class="code" id="-6l5tye_126">Promotion</code>. Une promotion a des attributs obligatoires (titre) et de nombreux attributs optionnels (dates, description, type...). Le Builder est parfait pour g&eacute;rer cette complexit&eacute; et assurer la cr&eacute;ation d'un objet valide.</p></li><li class="list__item" id="-6l5tye_121"><p id="-6l5tye_127"><span class="control" id="-6l5tye_128">Strategy :</span> Pour g&eacute;rer les diff&eacute;rents types d'offres. Chaque type d'offre est un &quot;algorithme&quot; diff&eacute;rent pour g&eacute;n&eacute;rer le message de promotion. Ce pattern nous garantit de pouvoir ajouter de nouveaux types d'offres sans modifier le code existant (<span class="control" id="-6l5tye_129">OCP</span>).</p></li><li class="list__item" id="-6l5tye_122"><p id="-6l5tye_130"><span class="control" id="-6l5tye_131">Factory Method (implicite) :</span> Pour choisir le bon canal de notification. Nous r&eacute;utiliserons notre <code class="code" id="-6l5tye_132">NotifierFactory</code> pour obtenir le <code class="code" id="-6l5tye_133">Notifier</code> (Email, SMS) appropri&eacute;.</p></li><li class="list__item" id="-6l5tye_123"><p id="-6l5tye_134"><span class="control" id="-6l5tye_135">Facade :</span> Pour cacher la complexit&eacute; de l'orchestration. Le client (le contr&ocirc;leur) n'a pas besoin de savoir qu' il faut un <code class="code" id="-6l5tye_136">PromotionService</code> ET un <code class="code" id="-6l5tye_137">NotificationService</code>. Il appellera une seule m&eacute;thode sur la <code class="code" id="-6l5tye_138">PromotionFacade</code>, qui se chargera de coordonner tout le monde.</p></li></ul></li><li class="list__item" id="-6l5tye_104"><p id="-6l5tye_139"><span class="control" id="-6l5tye_140">Diagramme d'ensemble :</span></p></li></ol><style>.theme-dark .plantuml > svg {filter: hue-rotate(180deg) invert(0.9);}div.plantuml {overflow-x: auto;}</style><div class="plantuml"><?xml version="1.0" encoding="us-ascii" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="495px" preserveAspectRatio="none" style="width:731px;height:495px;background:#FFFFFF;" version="1.1" viewBox="0 0 731 495" width="731px" zoomAndPan="magnify"><defs/><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="353" x="182" y="23.5352">Architecture du Syst&#232;me de Promotions (classes)</text><!--cluster Promotion Strategies--><g id="cluster_Promotion Strategies"><path d="M9.5,264.4883 L161.5,264.4883 A5.25,5.25 0 0 1 165,267.9883 L172,286.9766 L397.5,286.9766 A3.5,3.5 0 0 1 401,290.4766 L401,485.4783 A3.5,3.5 0 0 1 397.5,488.9783 L9.5,488.9783 A3.5,3.5 0 0 1 6,485.4783 L6,267.9883 A3.5,3.5 0 0 1 9.5,264.4883 " fill="none" style="stroke:#696969;stroke-width:1.0;"/><line style="stroke:#696969;stroke-width:1.0;" x1="6" x2="172" y1="286.9766" y2="286.9766"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="153" x="10" y="280.0234">Promotion Strategies</text></g><!--cluster Notification--><g id="cluster_Notification"><path d="M428.5,264.4883 L513.5,264.4883 A5.25,5.25 0 0 1 517,267.9883 L524,286.9766 L720.5,286.9766 A3.5,3.5 0 0 1 724,290.4766 L724,485.4783 A3.5,3.5 0 0 1 720.5,488.9783 L428.5,488.9783 A3.5,3.5 0 0 1 425,485.4783 L425,267.9883 A3.5,3.5 0 0 1 428.5,264.4883 " fill="none" style="stroke:#696969;stroke-width:1.0;"/><line style="stroke:#696969;stroke-width:1.0;" x1="425" x2="524" y1="286.9766" y2="286.9766"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="86" x="429" y="280.0234">Notification</text></g><!--class PromotionStrategy--><g id="elem_PromotionStrategy"><rect codeLine="11" fill="#F1F1F1" height="64.4883" id="PromotionStrategy" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:0.5;" width="160" x="215" y="299.4883"/><ellipse cx="230" cy="315.4883" fill="#B4A7E5" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M225.9277,311.2534 L225.9277,309.0952 L233.3071,309.0952 L233.3071,311.2534 L230.8418,311.2534 L230.8418,319.3301 L233.3071,319.3301 L233.3071,321.4883 L225.9277,321.4883 L225.9277,319.3301 L228.3931,319.3301 L228.3931,311.2534 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="128" x="244" y="320.7793">PromotionStrategy</text><line style="stroke:#181818;stroke-width:0.5;" x1="216" x2="374" y1="331.4883" y2="331.4883"/><line style="stroke:#181818;stroke-width:0.5;" x1="216" x2="374" y1="339.4883" y2="339.4883"/><ellipse cx="226" cy="353.2324" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="130" x="235" y="357.0234">generateMessage()</text></g><!--class DiscountStrategy--><g id="elem_DiscountStrategy"><rect codeLine="14" fill="#F1F1F1" height="48" id="DiscountStrategy" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:0.5;" width="148" x="22" y="424.9783"/><ellipse cx="37" cy="440.9783" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M39.9731,446.6213 Q39.3921,446.9202 38.7529,447.0696 Q38.1138,447.219 37.4082,447.219 Q34.9014,447.219 33.5815,445.5671 Q32.2617,443.9153 32.2617,440.7942 Q32.2617,437.6648 33.5815,436.0129 Q34.9014,434.3611 37.4082,434.3611 Q38.1138,434.3611 38.7612,434.5105 Q39.4087,434.6599 39.9731,434.9588 L39.9731,437.6814 Q39.3423,437.1004 38.7488,436.8306 Q38.1553,436.5608 37.5244,436.5608 Q36.1797,436.5608 35.4949,437.6275 Q34.8101,438.6941 34.8101,440.7942 Q34.8101,442.886 35.4949,443.9526 Q36.1797,445.0193 37.5244,445.0193 Q38.1553,445.0193 38.7488,444.7495 Q39.3423,444.4797 39.9731,443.8987 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="116" x="51" y="446.2693">DiscountStrategy</text><line style="stroke:#181818;stroke-width:0.5;" x1="23" x2="169" y1="456.9783" y2="456.9783"/><line style="stroke:#181818;stroke-width:0.5;" x1="23" x2="169" y1="464.9783" y2="464.9783"/></g><!--class ThreeForTwoStrategy--><g id="elem_ThreeForTwoStrategy"><rect codeLine="15" fill="#F1F1F1" height="48" id="ThreeForTwoStrategy" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:0.5;" width="180" x="205" y="424.9783"/><ellipse cx="220" cy="440.9783" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M222.9731,446.6213 Q222.3921,446.9202 221.7529,447.0696 Q221.1138,447.219 220.4082,447.219 Q217.9014,447.219 216.5815,445.5671 Q215.2617,443.9153 215.2617,440.7942 Q215.2617,437.6648 216.5815,436.0129 Q217.9014,434.3611 220.4082,434.3611 Q221.1138,434.3611 221.7612,434.5105 Q222.4087,434.6599 222.9731,434.9588 L222.9731,437.6814 Q222.3423,437.1004 221.7488,436.8306 Q221.1553,436.5608 220.5244,436.5608 Q219.1797,436.5608 218.4949,437.6275 Q217.8101,438.6941 217.8101,440.7942 Q217.8101,442.886 218.4949,443.9526 Q219.1797,445.0193 220.5244,445.0193 Q221.1553,445.0193 221.7488,444.7495 Q222.3423,444.4797 222.9731,443.8987 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="148" x="234" y="446.2693">ThreeForTwoStrategy</text><line style="stroke:#181818;stroke-width:0.5;" x1="206" x2="384" y1="456.9783" y2="456.9783"/><line style="stroke:#181818;stroke-width:0.5;" x1="206" x2="384" y1="464.9783" y2="464.9783"/></g><!--class Notifier--><g id="elem_Notifier"><rect codeLine="19" fill="#F1F1F1" height="64.4883" id="Notifier" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:0.5;" width="83" x="459.5" y="299.4883"/><ellipse cx="474.5" cy="315.4883" fill="#B4A7E5" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M470.4277,311.2534 L470.4277,309.0952 L477.8071,309.0952 L477.8071,311.2534 L475.3418,311.2534 L475.3418,319.3301 L477.8071,319.3301 L477.8071,321.4883 L470.4277,321.4883 L470.4277,319.3301 L472.8931,319.3301 L472.8931,311.2534 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="51" x="488.5" y="320.7793">Notifier</text><line style="stroke:#181818;stroke-width:0.5;" x1="460.5" x2="541.5" y1="331.4883" y2="331.4883"/><line style="stroke:#181818;stroke-width:0.5;" x1="460.5" x2="541.5" y1="339.4883" y2="339.4883"/><ellipse cx="470.5" cy="353.2324" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="43" x="479.5" y="357.0234">send()</text></g><!--class EmailNotifier--><g id="elem_EmailNotifier"><rect codeLine="22" fill="#F1F1F1" height="48" id="EmailNotifier" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:0.5;" width="120" x="441" y="424.9783"/><ellipse cx="456" cy="440.9783" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M458.9731,446.6213 Q458.3921,446.9202 457.7529,447.0696 Q457.1138,447.219 456.4082,447.219 Q453.9014,447.219 452.5815,445.5671 Q451.2617,443.9153 451.2617,440.7942 Q451.2617,437.6648 452.5815,436.0129 Q453.9014,434.3611 456.4082,434.3611 Q457.1138,434.3611 457.7612,434.5105 Q458.4087,434.6599 458.9731,434.9588 L458.9731,437.6814 Q458.3423,437.1004 457.7488,436.8306 Q457.1553,436.5608 456.5244,436.5608 Q455.1797,436.5608 454.4949,437.6275 Q453.8101,438.6941 453.8101,440.7942 Q453.8101,442.886 454.4949,443.9526 Q455.1797,445.0193 456.5244,445.0193 Q457.1553,445.0193 457.7488,444.7495 Q458.3423,444.4797 458.9731,443.8987 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="88" x="470" y="446.2693">EmailNotifier</text><line style="stroke:#181818;stroke-width:0.5;" x1="442" x2="560" y1="456.9783" y2="456.9783"/><line style="stroke:#181818;stroke-width:0.5;" x1="442" x2="560" y1="464.9783" y2="464.9783"/></g><!--class SmsNotifier--><g id="elem_SmsNotifier"><rect codeLine="23" fill="#F1F1F1" height="48" id="SmsNotifier" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:0.5;" width="111" x="596.5" y="424.9783"/><ellipse cx="611.5" cy="440.9783" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M614.4731,446.6213 Q613.8921,446.9202 613.2529,447.0696 Q612.6138,447.219 611.9082,447.219 Q609.4014,447.219 608.0815,445.5671 Q606.7617,443.9153 606.7617,440.7942 Q606.7617,437.6648 608.0815,436.0129 Q609.4014,434.3611 611.9082,434.3611 Q612.6138,434.3611 613.2612,434.5105 Q613.9087,434.6599 614.4731,434.9588 L614.4731,437.6814 Q613.8423,437.1004 613.2488,436.8306 Q612.6553,436.5608 612.0244,436.5608 Q610.6797,436.5608 609.9949,437.6275 Q609.3101,438.6941 609.3101,440.7942 Q609.3101,442.886 609.9949,443.9526 Q610.6797,445.0193 612.0244,445.0193 Q612.6553,445.0193 613.2488,444.7495 Q613.8423,444.4797 614.4731,443.8987 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="79" x="625.5" y="446.2693">SmsNotifier</text><line style="stroke:#181818;stroke-width:0.5;" x1="597.5" x2="706.5" y1="456.9783" y2="456.9783"/><line style="stroke:#181818;stroke-width:0.5;" x1="597.5" x2="706.5" y1="464.9783" y2="464.9783"/></g><!--class ClientController--><g id="elem_ClientController"><rect codeLine="5" fill="#F1F1F1" height="48" id="ClientController" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:0.5;" width="142" x="165" y="44.4883"/><ellipse cx="180" cy="60.4883" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M182.9731,66.1313 Q182.3921,66.4302 181.7529,66.5796 Q181.1138,66.729 180.4082,66.729 Q177.9014,66.729 176.5815,65.0771 Q175.2617,63.4253 175.2617,60.3042 Q175.2617,57.1748 176.5815,55.5229 Q177.9014,53.8711 180.4082,53.8711 Q181.1138,53.8711 181.7612,54.0205 Q182.4087,54.1699 182.9731,54.4688 L182.9731,57.1914 Q182.3423,56.6104 181.7488,56.3406 Q181.1553,56.0708 180.5244,56.0708 Q179.1797,56.0708 178.4949,57.1375 Q177.8101,58.2041 177.8101,60.3042 Q177.8101,62.396 178.4949,63.4626 Q179.1797,64.5293 180.5244,64.5293 Q181.1553,64.5293 181.7488,64.2595 Q182.3423,63.9897 182.9731,63.4087 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="110" x="194" y="65.7793">ClientController</text><line style="stroke:#181818;stroke-width:0.5;" x1="166" x2="306" y1="76.4883" y2="76.4883"/><line style="stroke:#181818;stroke-width:0.5;" x1="166" x2="306" y1="84.4883" y2="84.4883"/></g><!--class PromotionFacade--><g id="elem_PromotionFacade"><rect codeLine="6" fill="#F1F1F1" height="48" id="PromotionFacade" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:0.5;" width="80" x="497" y="44.4883"/><ellipse cx="512" cy="60.4883" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M514.9731,66.1313 Q514.3921,66.4302 513.7529,66.5796 Q513.1138,66.729 512.4082,66.729 Q509.9014,66.729 508.5815,65.0771 Q507.2617,63.4253 507.2617,60.3042 Q507.2617,57.1748 508.5815,55.5229 Q509.9014,53.8711 512.4082,53.8711 Q513.1138,53.8711 513.7612,54.0205 Q514.4087,54.1699 514.9731,54.4688 L514.9731,57.1914 Q514.3423,56.6104 513.7488,56.3406 Q513.1553,56.0708 512.5244,56.0708 Q511.1797,56.0708 510.4949,57.1375 Q509.8101,58.2041 509.8101,60.3042 Q509.8101,62.396 510.4949,63.4626 Q511.1797,64.5293 512.5244,64.5293 Q513.1553,64.5293 513.7488,64.2595 Q514.3423,63.9897 514.9731,63.4087 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="48" x="526" y="65.7793">Facade</text><line style="stroke:#181818;stroke-width:0.5;" x1="498" x2="576" y1="76.4883" y2="76.4883"/><line style="stroke:#181818;stroke-width:0.5;" x1="498" x2="576" y1="84.4883" y2="84.4883"/></g><!--class PromotionService--><g id="elem_PromotionService"><rect codeLine="7" fill="#F1F1F1" height="48" id="PromotionService" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:0.5;" width="152" x="240" y="153.4883"/><ellipse cx="255" cy="169.4883" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M257.9731,175.1313 Q257.3921,175.4302 256.7529,175.5796 Q256.1138,175.729 255.4082,175.729 Q252.9014,175.729 251.5815,174.0771 Q250.2617,172.4253 250.2617,169.3042 Q250.2617,166.1748 251.5815,164.5229 Q252.9014,162.8711 255.4082,162.8711 Q256.1138,162.8711 256.7612,163.0205 Q257.4087,163.1699 257.9731,163.4688 L257.9731,166.1914 Q257.3423,165.6104 256.7488,165.3406 Q256.1553,165.0708 255.5244,165.0708 Q254.1797,165.0708 253.4949,166.1375 Q252.8101,167.2041 252.8101,169.3042 Q252.8101,171.396 253.4949,172.4626 Q254.1797,173.5293 255.5244,173.5293 Q256.1553,173.5293 256.7488,173.2595 Q257.3423,172.9897 257.9731,172.4087 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="120" x="269" y="174.7793">PromotionService</text><line style="stroke:#181818;stroke-width:0.5;" x1="241" x2="391" y1="185.4883" y2="185.4883"/><line style="stroke:#181818;stroke-width:0.5;" x1="241" x2="391" y1="193.4883" y2="193.4883"/></g><!--class NotifierFactory--><g id="elem_NotifierFactory"><rect codeLine="8" fill="#F1F1F1" height="48" id="NotifierFactory" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:0.5;" width="133" x="430.5" y="153.4883"/><ellipse cx="445.5" cy="169.4883" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M448.4731,175.1313 Q447.8921,175.4302 447.2529,175.5796 Q446.6138,175.729 445.9082,175.729 Q443.4014,175.729 442.0815,174.0771 Q440.7617,172.4253 440.7617,169.3042 Q440.7617,166.1748 442.0815,164.5229 Q443.4014,162.8711 445.9082,162.8711 Q446.6138,162.8711 447.2612,163.0205 Q447.9087,163.1699 448.4731,163.4688 L448.4731,166.1914 Q447.8423,165.6104 447.2488,165.3406 Q446.6553,165.0708 446.0244,165.0708 Q444.6797,165.0708 443.9949,166.1375 Q443.3101,167.2041 443.3101,169.3042 Q443.3101,171.396 443.9949,172.4626 Q444.6797,173.5293 446.0244,173.5293 Q446.6553,173.5293 447.2488,173.2595 Q447.8423,172.9897 448.4731,172.4087 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="101" x="459.5" y="174.7793">NotifierFactory</text><line style="stroke:#181818;stroke-width:0.5;" x1="431.5" x2="562.5" y1="185.4883" y2="185.4883"/><line style="stroke:#181818;stroke-width:0.5;" x1="431.5" x2="562.5" y1="193.4883" y2="193.4883"/></g><!--class Facade--><g id="elem_Facade"><rect fill="#F1F1F1" height="48" id="Facade" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:0.5;" width="80" x="382" y="44.4883"/><ellipse cx="397" cy="60.4883" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M399.9731,66.1313 Q399.3921,66.4302 398.7529,66.5796 Q398.1138,66.729 397.4082,66.729 Q394.9014,66.729 393.5815,65.0771 Q392.2617,63.4253 392.2617,60.3042 Q392.2617,57.1748 393.5815,55.5229 Q394.9014,53.8711 397.4082,53.8711 Q398.1138,53.8711 398.7612,54.0205 Q399.4087,54.1699 399.9731,54.4688 L399.9731,57.1914 Q399.3423,56.6104 398.7488,56.3406 Q398.1553,56.0708 397.5244,56.0708 Q396.1797,56.0708 395.4949,57.1375 Q394.8101,58.2041 394.8101,60.3042 Q394.8101,62.396 395.4949,63.4626 Q396.1797,64.5293 397.5244,64.5293 Q398.1553,64.5293 398.7488,64.2595 Q399.3423,63.9897 399.9731,63.4087 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="48" x="411" y="65.7793">Facade</text><line style="stroke:#181818;stroke-width:0.5;" x1="383" x2="461" y1="76.4883" y2="76.4883"/><line style="stroke:#181818;stroke-width:0.5;" x1="383" x2="461" y1="84.4883" y2="84.4883"/></g><!--reverse link PromotionStrategy to DiscountStrategy--><g id="link_PromotionStrategy_DiscountStrategy"><path d="M224.7837,373.3994 C191.8737,392.4594 166.26,407.2883 136.31,424.6283 " fill="none" id="PromotionStrategy-backto-DiscountStrategy" style="stroke:#454645;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="none" points="240.36,364.3783,221.7767,368.2073,227.7908,378.5914,240.36,364.3783" style="stroke:#454645;stroke-width:1.0;"/></g><!--reverse link PromotionStrategy to ThreeForTwoStrategy--><g id="link_PromotionStrategy_ThreeForTwoStrategy"><path d="M295,382.2283 C295,401.2883 295,407.1883 295,424.5683 " fill="none" id="PromotionStrategy-backto-ThreeForTwoStrategy" style="stroke:#454645;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="none" points="295,364.2283,289,382.2283,301,382.2283,295,364.2283" style="stroke:#454645;stroke-width:1.0;"/></g><!--reverse link Notifier to EmailNotifier--><g id="link_Notifier_EmailNotifier"><path d="M501,382.2283 C501,401.2883 501,407.1883 501,424.5683 " fill="none" id="Notifier-backto-EmailNotifier" style="stroke:#454645;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="none" points="501,364.2283,495,382.2283,507,382.2283,501,364.2283" style="stroke:#454645;stroke-width:1.0;"/></g><!--reverse link Notifier to SmsNotifier--><g id="link_Notifier_SmsNotifier"><path d="M556.5701,375.1471 C581.5501,394.2071 598.55,407.1883 621.33,424.5683 " fill="none" id="Notifier-backto-SmsNotifier" style="stroke:#454645;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="none" points="542.26,364.2283,552.9305,379.9171,560.2097,370.377,542.26,364.2283" style="stroke:#454645;stroke-width:1.0;"/></g><!--link ClientController to Facade--><g id="link_ClientController_Facade"><path codeLine="27" d="M307.38,68.4883 C332.58,68.4883 354.03,68.4883 375.74,68.4883 " fill="none" id="ClientController-to-Facade" style="stroke:#454645;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="#454645" points="381.74,68.4883,372.74,64.4883,376.74,68.4883,372.74,72.4883,381.74,68.4883" style="stroke:#454645;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="39" x="325" y="62.0566">utilise</text></g><!--reverse link Facade to PromotionService--><g id="link_Facade_PromotionService"><path codeLine="28" d="M390.293,101.4917 C372.613,119.3317 356.87,135.2383 339.21,153.0583 " fill="none" id="Facade-backto-PromotionService" style="stroke:#454645;stroke-width:1.0;"/><polygon fill="none" points="398.74,92.9683,391.6754,94.4143,390.293,101.4917,397.3577,100.0456,398.74,92.9683" style="stroke:#454645;stroke-width:1.0;"/></g><!--reverse link Facade to NotifierFactory--><g id="link_Facade_NotifierFactory"><path codeLine="29" d="M445.346,102.796 C457.846,120.636 468.08,135.2383 480.58,153.0583 " fill="none" id="Facade-backto-NotifierFactory" style="stroke:#454645;stroke-width:1.0;"/><polygon fill="none" points="438.46,92.9683,438.6271,100.1774,445.346,102.796,445.1789,95.5868,438.46,92.9683" style="stroke:#454645;stroke-width:1.0;"/></g><!--reverse link PromotionService to PromotionStrategy--><g id="link_PromotionService_PromotionStrategy"><path codeLine="30" d="M311.1244,213.8363 C307.5444,239.8563 303.36,270.0983 299.37,299.0483 " fill="none" id="PromotionService-backto-PromotionStrategy" style="stroke:#454645;stroke-width:1.0;"/><polygon fill="none" points="312.76,201.9483,307.9795,207.3471,311.1244,213.8363,315.9049,208.4375,312.76,201.9483" style="stroke:#454645;stroke-width:1.0;"/></g><!--link NotifierFactory to Notifier--><g id="link_NotifierFactory_Notifier"><path codeLine="31" d="M497.62,201.9483 C498.3,227.9683 499.2525,264.1003 500.0125,293.0503 " fill="none" id="NotifierFactory-to-Notifier" style="stroke:#454645;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="#454645" points="500.17,299.0483,503.9324,289.9464,500.0388,294.05,495.9352,290.1564,500.17,299.0483" style="stroke:#454645;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="26" x="499.76" y="245.0566">cr&#233;e</text></g><!--SRC=[ZP51RW8n34NtEOKxcu8gE02BIXMKNQjAmmNIOC1g9a6sXmfLtAUSWuir364q7QIgkyHvt_dslzCDLWWxUcSRr2YfHoYUs6r8qMdD2CiQohtewJjnIuGtZbLKYa5WuBmLGHaMnZH7c7h2eDCObAFtoBdSQkRMsTJ32XINOz4dIkGTESpbrrHR4NA2DVBUcArr7tQTBBO2A9MjuffG2lWo51HvPLt7Q0RswVK1rXZmV7r1aTHeC3I7_DUCnCKwQ8jJjVLfEK7bjbVMB3QCE8-y-8p_anqw8ro6S_OC_BP-7RjnB1YM7PlFbINV0ftFhhNCbPNyIIKdzp0x7LSKgDdZ4WKOlRraAyfrat-AKKm_LnW_Givo0hMI9q6J2t4qkespyzRFjC_s6bmtrvF1E5be1vo0uzCHpGy0]--></g></svg></div><figure id="-6l5tye_99"><img alt="promo-2-Architecture_du_Syst&egrave;me_de_Promotions.svg" src="images/promo-2-Architecture_du_Syst%C3%A8me_de_Promotions.svg" title="promo-2-Architecture_du_Syst&egrave;me_de_Promotions.svg" width="1450" height="990"></figure><style>.theme-dark .plantuml > svg {filter: hue-rotate(180deg) invert(0.9);}div.plantuml {overflow-x: auto;}</style><div class="plantuml"><?xml version="1.0" encoding="us-ascii" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="454px" preserveAspectRatio="none" style="width:991px;height:454px;background:#FFFFFF;" version="1.1" viewBox="0 0 991 454" width="991px" zoomAndPan="magnify"><defs/><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="477" x="258.5" y="28.5352">S&#233;quence de Lancement d'une Campagne de Promotion (s&#233;quence)</text><rect fill="#FFFFFF" height="295.7949" style="stroke:#696969;stroke-width:1.0;" width="10" x="339" y="105.2871"/><rect fill="#FFFFFF" height="87.9316" style="stroke:#696969;stroke-width:1.0;" width="10" x="551" y="158.9082"/><rect fill="#FFFFFF" height="29.3105" style="stroke:#696969;stroke-width:1.0;" width="10" x="685.5" y="276.1504"/><rect fill="#FFFFFF" height="30" style="stroke:#696969;stroke-width:1.0;" width="10" x="785.5" y="334.7715"/><rect fill="#FFFFFF" height="29.3105" style="stroke:#696969;stroke-width:1.0;" width="10" x="899" y="188.2188"/><rect fill="none" height="252.4844" rx="3.5" ry="3.5" style="stroke:#696969;stroke-width:1.0;" width="718" x="267" y="120.2871"/><line style="stroke:#696969;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="67" x2="67" y1="73.9766" y2="419.082"/><line style="stroke:#696969;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="344" x2="344" y1="73.9766" y2="419.082"/><line style="stroke:#696969;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="556" x2="556" y1="73.9766" y2="419.082"/><line style="stroke:#696969;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="690" x2="690" y1="73.9766" y2="419.082"/><line style="stroke:#696969;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="790" x2="790" y1="73.9766" y2="419.082"/><line style="stroke:#696969;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="904" x2="904" y1="73.9766" y2="419.082"/><rect fill="#FF6347" height="30.4883" rx="3.5" ry="3.5" style="stroke:#454645;stroke-width:1.5;" width="124" x="5" y="42.4883"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="110" x="12" y="63.0234">ClientController</text><rect fill="#FF6347" height="30.4883" rx="3.5" ry="3.5" style="stroke:#454645;stroke-width:1.5;" width="124" x="5" y="418.082"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="110" x="12" y="438.6172">ClientController</text><rect fill="#FF6347" height="30.4883" rx="3.5" ry="3.5" style="stroke:#454645;stroke-width:1.5;" width="134" x="277" y="42.4883"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="120" x="284" y="63.0234">PromotionFacade</text><rect fill="#FF6347" height="30.4883" rx="3.5" ry="3.5" style="stroke:#454645;stroke-width:1.5;" width="134" x="277" y="418.082"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="120" x="284" y="438.6172">PromotionFacade</text><rect fill="#FF6347" height="30.4883" rx="3.5" ry="3.5" style="stroke:#454645;stroke-width:1.5;" width="134" x="489" y="42.4883"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="120" x="496" y="63.0234">PromotionService</text><rect fill="#FF6347" height="30.4883" rx="3.5" ry="3.5" style="stroke:#454645;stroke-width:1.5;" width="134" x="489" y="418.082"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="120" x="496" y="438.6172">PromotionService</text><rect fill="#FF6347" height="30.4883" rx="3.5" ry="3.5" style="stroke:#454645;stroke-width:1.5;" width="115" x="633" y="42.4883"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="101" x="640" y="63.0234">NotifierFactory</text><rect fill="#FF6347" height="30.4883" rx="3.5" ry="3.5" style="stroke:#454645;stroke-width:1.5;" width="115" x="633" y="418.082"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="101" x="640" y="438.6172">NotifierFactory</text><rect fill="#FF6347" height="30.4883" rx="3.5" ry="3.5" style="stroke:#454645;stroke-width:1.5;" width="65" x="758" y="42.4883"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="51" x="765" y="63.0234">Notifier</text><rect fill="#FF6347" height="30.4883" rx="3.5" ry="3.5" style="stroke:#454645;stroke-width:1.5;" width="65" x="758" y="418.082"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="51" x="765" y="438.6172">Notifier</text><rect fill="#FF6347" height="30.4883" rx="3.5" ry="3.5" style="stroke:#454645;stroke-width:1.5;" width="142" x="833" y="42.4883"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="128" x="840" y="63.0234">PromotionStrategy</text><rect fill="#FF6347" height="30.4883" rx="3.5" ry="3.5" style="stroke:#454645;stroke-width:1.5;" width="142" x="833" y="418.082"/><text fill="#FFFFFF" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="128" x="840" y="438.6172">PromotionStrategy</text><rect fill="#FFFFFF" height="295.7949" style="stroke:#696969;stroke-width:1.0;" width="10" x="339" y="105.2871"/><rect fill="#FFFFFF" height="87.9316" style="stroke:#696969;stroke-width:1.0;" width="10" x="551" y="158.9082"/><rect fill="#FFFFFF" height="29.3105" style="stroke:#696969;stroke-width:1.0;" width="10" x="685.5" y="276.1504"/><rect fill="#FFFFFF" height="30" style="stroke:#696969;stroke-width:1.0;" width="10" x="785.5" y="334.7715"/><rect fill="#FFFFFF" height="29.3105" style="stroke:#696969;stroke-width:1.0;" width="10" x="899" y="188.2188"/><polygon fill="#454645" points="327,101.2871,337,105.2871,327,109.2871,331,105.2871" style="stroke:#454645;stroke-width:1.0;"/><line style="stroke:#454645;stroke-width:1.0;" x1="67" x2="333" y1="105.2871" y2="105.2871"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="253" x="74" y="100.5449">launchCampaign(promo, users, channel)</text><path d="M270.5,120.2871 L341,120.2871 L341,127.5977 L331,137.5977 L267,137.5977 L267,123.7871 A3.5,3.5 0 0 1 270.5,120.2871 " fill="#EEEEEE" style="stroke:#696969;stroke-width:1.5;"/><rect fill="none" height="252.4844" rx="3.5" ry="3.5" style="stroke:#696969;stroke-width:1.0;" width="718" x="267" y="120.2871"/><text fill="#454645" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="29" x="282" y="133.8555">loop</text><text fill="#696969" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="138" x="356" y="132.9219">[pour chaque utilisateur]</text><polygon fill="#454645" points="539,154.9082,549,158.9082,539,162.9082,543,158.9082" style="stroke:#454645;stroke-width:1.0;"/><line style="stroke:#454645;stroke-width:1.0;" x1="349" x2="545" y1="158.9082" y2="158.9082"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="183" x="356" y="154.166">applyPromotion(promo, user)</text><polygon fill="#454645" points="887,184.2188,897,188.2188,887,192.2188,891,188.2188" style="stroke:#454645;stroke-width:1.0;"/><line style="stroke:#454645;stroke-width:1.0;" x1="561" x2="893" y1="188.2188" y2="188.2188"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="143" x="568" y="183.4766">generateMessage(user)</text><polygon fill="#454645" points="572,213.5293,562,217.5293,572,221.5293,568,217.5293" style="stroke:#454645;stroke-width:1.0;"/><line style="stroke:#454645;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="566" x2="903" y1="217.5293" y2="217.5293"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="55" x="578" y="212.7871">message</text><polygon fill="#454645" points="360,242.8398,350,246.8398,360,250.8398,356,246.8398" style="stroke:#454645;stroke-width:1.0;"/><line style="stroke:#454645;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="354" x2="555" y1="246.8398" y2="246.8398"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="55" x="366" y="242.0977">message</text><polygon fill="#454645" points="673.5,272.1504,683.5,276.1504,673.5,280.1504,677.5,276.1504" style="stroke:#454645;stroke-width:1.0;"/><line style="stroke:#454645;stroke-width:1.0;" x1="349" x2="679.5" y1="276.1504" y2="276.1504"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="125" x="356" y="271.4082">getNotifier(channel)</text><polygon fill="#454645" points="360,301.4609,350,305.4609,360,309.4609,356,305.4609" style="stroke:#454645;stroke-width:1.0;"/><line style="stroke:#454645;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="354" x2="689.5" y1="305.4609" y2="305.4609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="46" x="366" y="300.7188">notifier</text><polygon fill="#454645" points="773.5,330.7715,783.5,334.7715,773.5,338.7715,777.5,334.7715" style="stroke:#454645;stroke-width:1.0;"/><line style="stroke:#454645;stroke-width:1.0;" x1="349" x2="779.5" y1="334.7715" y2="334.7715"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="128" x="356" y="330.0293">send(user, message)</text><polygon fill="#454645" points="78,397.082,68,401.082,78,405.082,74,401.082" style="stroke:#454645;stroke-width:1.0;"/><line style="stroke:#454645;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="72" x2="343" y1="401.082" y2="401.082"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="16" x="84" y="396.3398">ok</text><!--SRC=[RP9DReCm48NtFiMKJOYKN815Dv6oQgDAwGLSc1AhndRz4ob7oZboiGu4g6tOmSpxthmPUF4Nx12kuijovPaNNY8KvyVzDw2g4Hg4DquF7IeFpIOeX0Fl36_LqFkmkjDUQ0MbcvXjmTW6FdLm8D71uouVznvtu7HlGhN2SEj5BGpDB407A7ZjjIrOL8U354GTYB5QIhH9yyXhJlCvUSqPdhNKP6YUqLv5dQd7OYe_KUjRe3qEUMu3aTNMWKIPIixUSe_jBHi_LkbO-QAmVvtsgq3oeEhBS7FHgjBq_0w2G-jsK5-uKYYtZAA9A_cD76DIQmD61zjhwBj0y48AHv9WsMXEOvBpLC2DaRSvOZmi6X4pB34WmtdP2bfKsB-yetEynJApcPHiHlRBGDsJPGqkkNHqVBCLAWaT7I3_u7riFnNBvNqpFSlv98SQct6Gt60b2v4ELJCSR3Sjiv9XpPOH-Ez9fekVgmBz4vDFxHy0]--></g></svg></div><figure id="-6l5tye_101"><img alt="promo-1-S&eacute;quence_de_Lancement_d_une_Campagne_de_Promotion.svg" src="images/promo-1-S%C3%A9quence_de_Lancement_d_une_Campagne_de_Promotion.svg" title="promo-1-S&eacute;quence_de_Lancement_d_une_Campagne_de_Promotion.svg" width="1978" height="908"></figure></section><section class="chapter"><h4 id="correction-partie-2-impl-mentation" data-toc="correction-partie-2-impl-mentation">Correction Partie 2 : Impl&eacute;mentation</h4><section class="chapter"><h5 id="1-le-mod-le-promotion-avec-son-builder" data-toc="1-le-mod-le-promotion-avec-son-builder">1. Le Mod&egrave;le <code class="code" id="-6l5tye_148">Promotion</code> avec son Builder</h5><p id="-6l5tye_146">Dans un nouveau package <code class="code" id="-6l5tye_149">fr.formation.spring.app.promotion.model</code>:</p><div class="code-block" data-lang="java">
package fr.formation.spring.app.promotion.model;

import java.time.LocalDate;

public class Promotion {
    private final String title;
    private final String description;
    private final String type; // ex: &quot;DISCOUNT&quot;, &quot;3FOR2&quot;
    private final LocalDate startDate;
    private final LocalDate endDate;

    // Constructeur privé, accessible uniquement par le Builder
    private Promotion(Builder builder) {
        this.title = builder.title;
        this.description = builder.description;
        this.type = builder.type;
        this.startDate = builder.startDate;
        this.endDate = builder.endDate;
    }

    // Getters publics...
    public String getTitle() {
        return title;
    }

    public String getType() {
        return type;
    }
    // ...

    // Classe Builder interne statique
    public static class Builder {
        // Attributs obligatoires
        private final String title;
        private final String type;

        // Attributs optionnels
        private String description = &quot;&quot;;
        private LocalDate startDate = LocalDate.now();
        private LocalDate endDate = LocalDate.now().plusMonths(1);

        public Builder(String title, String type) {
            this.title = title;
            this.type = type;
        }

        public Builder withDescription(String description) {
            this.description = description;
            return this;
        }

        public Builder validFrom(LocalDate startDate) {
            this.startDate = startDate;
            return this;
        }

        public Builder validUntil(LocalDate endDate) {
            this.endDate = endDate;
            return this;
        }

        public Promotion build() {
            // On pourrait ajouter des validations ici
            return new Promotion(this);
        }
    }
}
</div></section><section class="chapter"><h5 id="2-les-strat-gies-de-promotion" data-toc="2-les-strat-gies-de-promotion">2. Les Strat&eacute;gies de Promotion</h5><p id="-6l5tye_150">Dans <code class="code" id="-6l5tye_152">fr.formation.spring.app.promotion.strategy</code>:</p><div class="code-block" data-lang="java">
// PromotionStrategy.java
package fr.formation.spring.app.promotion.strategy;

import fr.formation.spring.app.observer.User; // On réutilise notre User

public interface PromotionStrategy {
    String generateMessage(User user);
}

// DiscountPromotionStrategy.java
package fr.formation.spring.app.promotion.strategy;

// ...
public class DiscountPromotionStrategy implements PromotionStrategy {
    @Override
    public String generateMessage(User user) {
        return &quot;Offre spéciale pour vous, &quot; + user.getName()
                + &quot;! Bénéficiez de 10% de réduction sur vos prochaines pénalités.&quot;;
    }
}

// ThreeForTwoPromotionStrategy.java
package fr.formation.spring.app.promotion.strategy;

// ...
public class ThreeForTwoPromotionStrategy implements PromotionStrategy {
    @Override
    public String generateMessage(User user) {
        return &quot;Bonjour &quot; + user.getName()
                + &quot;! Profitez de notre offre '3 pour 2' sur une sélection de livres ce mois-ci.&quot;;
    }
}
</div></section><section class="chapter"><h5 id="3-4-le-promotionservice-et-la-promotionfacade" data-toc="3-4-le-promotionservice-et-la-promotionfacade">3 &amp; 4. Le <code class="code" id="-6l5tye_157">PromotionService</code> et la <code class="code" id="-6l5tye_158">PromotionFacade</code></h5><p id="-6l5tye_154">Dans <code class="code" id="-6l5tye_159">fr.formation.spring.app.promotion.service</code>:</p><div class="code-block" data-lang="java">
// PromotionService.java (le Contexte)
package fr.formation.spring.app.promotion.service;
// ...

import java.util.Map;

// Ce service sera un bean Spring
@Service
public class PromotionService {
    private final Map&lt;String, PromotionStrategy&gt; strategies;

    // Spring injecte toutes les stratégies dans une Map
    public PromotionService(Map&lt;String, PromotionStrategy&gt; strategies) {
        this.strategies = strategies;
    }

    public String applyPromotion(Promotion promo, User user) {
        // On récupère la bonne stratégie en fonction du type de la promotion
        PromotionStrategy strategy = strategies.get(promo.getType());
        if (strategy == null) {
            throw new IllegalArgumentException(&quot;Type de promotion inconnu: &quot; + promo.getType());
        }
        return strategy.generateMessage(user);
    }
}

// Il faut déclarer nos stratégies comme des beans
// @Component(&quot;DISCOUNT&quot;) public class DiscountPromotionStrategy ...
// @Component(&quot;3FOR2&quot;) public class ThreeForTwoPromotionStrategy ...
</div><div class="code-block" data-lang="java">
// PromotionFacade.java
package fr.formation.spring.app.promotion.service;

// ...
@Service
public class PromotionFacade {
    private final PromotionService promotionService;
    // On suppose que NotifierFactory est accessible
    private final NotifierFactory notifierFactory = new NotifierFactory();

    public PromotionFacade(PromotionService promotionService) {
        this.promotionService = promotionService;
    }

    public void launchCampaign(Promotion promo, List&lt;User&gt; users, String channel) {
        System.out.println(&quot;Lancement de la campagne : &quot; + promo.getTitle());
        Notifier notifier = notifierFactory.getNotifier(channel);

        for (User user : users) {
            String message = promotionService.applyPromotion(promo, user);
            notifier.send(user.getName(), message); // On envoie au nom de l'utilisateur
        }
    }
}
</div></section><section class="chapter"><h5 id="5-le-promotioncontroller-et-le-test" data-toc="5-le-promotioncontroller-et-le-test">5. Le <code class="code" id="-6l5tye_167">PromotionController</code> et le test</h5><div class="code-block" data-lang="java">
// Dans un nouveau PromotionController.java
// ...
@RestController
@RequestMapping(&quot;/api/promotions&quot;)
public class PromotionController {
    private final PromotionFacade promotionFacade;

    public PromotionController(PromotionFacade facade) {
        this.promotionFacade = facade;
    }

    // Pour simplifier, on hardcode la campagne dans le contrôleur.
    // Dans une vraie app, on la recevrait en paramètre (DTO).
    @PostMapping(&quot;/launch&quot;)
    public ResponseEntity&lt;String&gt; launchTestCampaign() {
        // 1. Construire la promotion avec le Builder
        Promotion discountPromo = new Promotion.Builder(&quot;Offre de Noël&quot;, &quot;DISCOUNT&quot;)
                .withDescription(&quot;Une super offre pour les fêtes&quot;)
                .build();

        // 2. Créer une liste d'utilisateurs cibles
        List&lt;User&gt; targetUsers = List.of(
                new User(&quot;Paul Atréides&quot;),
                new User(&quot;Dame Jessica&quot;)
        );

        // 3. Appeler la Facade pour lancer la campagne par Email
        promotionFacade.launchCampaign(discountPromo, targetUsers, &quot;EMAIL&quot;);

        return ResponseEntity.ok(&quot;Campagne '&quot; + discountPromo.getTitle() + &quot;' lancée !&quot;);
    }
}
</div><p id="-6l5tye_162"><span class="control" id="-6l5tye_168">Requ&ecirc;te de test :</span></p><div class="code-block" data-lang="http">
### Lancer une campagne de promotion
POST http://localhost:8080/api/promotions/launch
</div><p id="-6l5tye_164"><span class="control" id="-6l5tye_169">Sortie attendue dans la console :</span></p><div class="code-block" data-lang="none">
Lancement de la campagne : Offre de Noël
--- ENVOI EMAIL ---
À: Paul Atréides@email.com
Message: Offre spéciale pour vous, Paul Atréides! Bénéficiez de 10% de réduction sur vos prochaines pénalités.
--------------------
--- ENVOI EMAIL ---
À: Dame Jessica@email.com
Message: Offre spéciale pour vous, Dame Jessica! Bénéficiez de 10% de réduction sur vos prochaines pénalités.
--------------------
</div><p id="-6l5tye_166">Cet atelier montre comment plusieurs patterns (Builder, Strategy, Facade, Factory) collaborent pour cr&eacute;er une solution robuste, flexible et &eacute;l&eacute;gante. Chaque pattern r&eacute;sout une partie sp&eacute;cifique du probl&egrave;me, et ensemble, ils forment une architecture solide. C'est &ccedil;a, la conception logicielle.</p></section></section></div></div></section></section><div class="last-modified">26 juillet 2025</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="020-00-conclusion.html" class="navigation-links__prev">Conclusion et Prochaines &Eacute;tapes</a><a href="006-00-modern-patterns.html" class="navigation-links__next">Hors-S&eacute;rie : Patterns Modernes et d'Architecture</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="https://resources.jetbrains.com/writerside/apidoc/6.22.0-b776/app.js"></script></body></html>