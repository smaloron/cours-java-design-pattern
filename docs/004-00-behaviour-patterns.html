<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-preset="contrast" data-primary-color="#307FFF"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="robots" content="noindex"><meta name="built-on" content="2025-07-28T16:55:43.817256"><title>Les Patterns Comportementaux : L'Art de la Communication entre Objets | Java-design-pattern</title><script type="application/json" id="virtual-toc-data">[{"id":"objectifs-p-dagogiques","level":0,"title":"Objectifs Pédagogiques","anchor":"#objectifs-p-dagogiques"},{"id":"introduction-les-r-gles-du-jeu","level":0,"title":"Introduction : Les Règles du Jeu","anchor":"#introduction-les-r-gles-du-jeu"},{"id":"l-essentiel-les-canaux-de-communication","level":0,"title":"L\u0027essentiel : Les Canaux de Communication","anchor":"#l-essentiel-les-canaux-de-communication"},{"id":"pour-aller-plus-loin","level":0,"title":"Pour aller plus loin","anchor":"#pour-aller-plus-loin"},{"id":"auto-valuation","level":0,"title":"Auto-évaluation","anchor":"#auto-valuation"},{"id":"conclusion","level":0,"title":"Conclusion","anchor":"#conclusion"}]</script><script type="application/json" id="topic-shortcuts"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.22.0-b776/app.css" rel="stylesheet"><meta name="msapplication-TileColor" content="#000000"><link rel="apple-touch-icon" sizes="180x180" href="https://jetbrains.com/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://jetbrains.com/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://jetbrains.com/favicon-16x16.png"><meta name="msapplication-TileImage" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-144x144.png"><meta name="msapplication-square70x70logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-70x70.png"><meta name="msapplication-square150x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-150x150.png"><meta name="msapplication-wide310x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x150.png"><meta name="msapplication-square310x310logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x310.png"><meta name="image" content=""><!-- Open Graph --><meta property="og:title" content="Les Patterns Comportementaux : L'Art de la Communication entre Objets | Java-design-pattern"><meta property="og:description" content=""><meta property="og:image" content=""><meta property="og:site_name" content="Java-design-pattern Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="writerside-documentation/004-00-behaviour-patterns.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content=""><meta name="twitter:title" content="Les Patterns Comportementaux : L'Art de la Communication entre Objets | Java-design-pattern"><meta name="twitter:description" content=""><meta name="twitter:creator" content=""><meta name="twitter:image:src" content=""><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "writerside-documentation/004-00-behaviour-patterns.html#webpage",
    "url": "writerside-documentation/004-00-behaviour-patterns.html",
    "name": "Les Patterns Comportementaux : L'Art de la Communication entre Objets | Java-design-pattern",
    "description": "",
    "image": "",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "writerside-documentation/#website",
    "url": "writerside-documentation/",
    "name": "Java-design-pattern Help"
}</script><!-- End Schema.org --></head><body data-id="004-00-behaviour-patterns" data-main-title="Les Patterns Comportementaux : L'Art de la Communication entre Objets" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs=""><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>Java-design-pattern  Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="004-00-behaviour-patterns" id="004-00-behaviour-patterns.md">Les Patterns Comportementaux : L'Art de la Communication entre Objets</h1><section class="chapter"><h2 id="objectifs-p-dagogiques" data-toc="objectifs-p-dagogiques">Objectifs P&eacute;dagogiques</h2><p id="-vh77si_9">&Agrave; la fin de ce module, vous serez capable de :</p><ul class="list _bullet" id="-vh77si_10"><li class="list__item" id="-vh77si_11"><p id="-vh77si_17"><span class="control" id="-vh77si_18">Comprendre</span> comment les patterns comportementaux g&egrave;rent les responsabilit&eacute;s et les interactions entre les objets.</p></li><li class="list__item" id="-vh77si_12"><p id="-vh77si_19"><span class="control" id="-vh77si_20">Impl&eacute;menter</span> en Java les patterns Strategy, Observer et Template Method.</p></li><li class="list__item" id="-vh77si_13"><p id="-vh77si_21"><span class="control" id="-vh77si_22">Utiliser</span> le pattern Strategy pour rendre des algorithmes interchangeables.</p></li><li class="list__item" id="-vh77si_14"><p id="-vh77si_23"><span class="control" id="-vh77si_24">Mettre en place</span> un syst&egrave;me de notification flexible avec le pattern Observer.</p></li><li class="list__item" id="-vh77si_15"><p id="-vh77si_25"><span class="control" id="-vh77si_26">D&eacute;finir</span> un squelette d'algorithme avec le Template Method tout en laissant les sous-classes le compl&eacute;ter.</p></li><li class="list__item" id="-vh77si_16"><p id="-vh77si_27"><span class="control" id="-vh77si_28">Identifier</span> ces patterns dans les frameworks que vous utilisez au quotidien, comme Spring.</p></li></ul></section><section class="chapter"><h2 id="introduction-les-r-gles-du-jeu" data-toc="introduction-les-r-gles-du-jeu">Introduction : Les R&egrave;gles du Jeu</h2><p id="-vh77si_29">Nous avons nos briques (Patterns de Cr&eacute;ation) et nous avons assembl&eacute; les murs de notre maison (Patterns de Structure). Maintenant, il faut d&eacute;finir les r&egrave;gles de vie &agrave; l'int&eacute;rieur. Qui a le droit de parler &agrave; qui ? Comment une d&eacute;cision est-elle prise ? Comment une information est-elle diffus&eacute;e ?</p><p id="-vh77si_30">Si nous ne faisons pas attention, les interactions entre les objets peuvent vite devenir un &quot;plat de spaghettis&quot; : un enchev&ecirc;trement de d&eacute;pendances o&ugrave; un changement dans une classe en impacte dix autres.</p><p id="-vh77si_31">Les <span class="control" id="-vh77si_32">Patterns Comportementaux</span> sont l&agrave; pour &ccedil;a. Ils se concentrent sur les <span class="control" id="-vh77si_33">algorithmes et l'assignation des responsabilit&eacute;s entre les objets</span>. Ils nous fournissent des sch&eacute;mas de communication &eacute;l&eacute;gants pour que nos objets collaborent de mani&egrave;re souple et d&eacute;coupl&eacute;e. Ils sont la cl&eacute; pour passer d'un programme statique &agrave; une application dynamique et r&eacute;active.</p></section><section class="chapter"><h2 id="l-essentiel-les-canaux-de-communication" data-toc="l-essentiel-les-canaux-de-communication">L'essentiel : Les Canaux de Communication</h2><section class="chapter"><h3 id="le-pattern-strategy-la-strat-gie" data-toc="le-pattern-strategy-la-strat-gie">Le Pattern Strategy (La Strat&eacute;gie)</h3><section class="chapter"><h4 id="l-intention" data-toc="l-intention">L'intention</h4><p id="-vh77si_43"><span class="control" id="-vh77si_45">D&eacute;finir une famille d'algorithmes, encapsuler chacun d'eux, et les rendre interchangeables.</span> Le pattern Strategy permet &agrave; l'algorithme de varier ind&eacute;pendamment des clients qui l'utilisent.</p><p id="-vh77si_44">Imaginez que vous utilisez une application GPS. Vous voulez aller d'un point A &agrave; un point B. L'application (le <code class="code" id="-vh77si_46">Context</code>) vous permet de choisir votre <span class="control" id="-vh77si_47">strat&eacute;gie</span> de calcul d'itin&eacute;raire : le plus rapide, le plus court, celui qui &eacute;vite les p&eacute;ages, ou le plus &eacute;cologique. Chaque option est un algorithme diff&eacute;rent, mais pour vous, l'utilisateur, l'interface reste la m&ecirc;me : &quot;calculer l'itin&eacute;raire&quot;.</p></section><section class="chapter"><h4 id="structure-et-impl-mentation" data-toc="structure-et-impl-mentation">Structure et Impl&eacute;mentation</h4><section class="chapter"><h5 id="diagramme-uml" data-toc="diagramme-uml">Diagramme UML</h5><style>.theme-dark .plantuml > svg {filter: hue-rotate(180deg) invert(0.9);}div.plantuml {overflow-x: auto;}</style><div class="plantuml"><?xml version="1.0" encoding="us-ascii" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="415px" preserveAspectRatio="none" style="width:745px;height:415px;background:#FFFFFF;" version="1.1" viewBox="0 0 745 415" width="745px" zoomAndPan="magnify"><defs/><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="227" x="252.25" y="23.5352">Diagramme du Pattern Strategy</text><!--class Context--><g id="elem_Context"><rect codeLine="5" fill="#F1F1F1" height="97.4648" id="Context" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:0.5;" width="183" x="239.5" y="44.4883"/><ellipse cx="299.25" cy="60.4883" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M302.2231,66.1313 Q301.6421,66.4302 301.0029,66.5796 Q300.3638,66.729 299.6582,66.729 Q297.1514,66.729 295.8315,65.0771 Q294.5117,63.4253 294.5117,60.3042 Q294.5117,57.1748 295.8315,55.5229 Q297.1514,53.8711 299.6582,53.8711 Q300.3638,53.8711 301.0112,54.0205 Q301.6587,54.1699 302.2231,54.4688 L302.2231,57.1914 Q301.5923,56.6104 300.9988,56.3406 Q300.4053,56.0708 299.7744,56.0708 Q298.4297,56.0708 297.7449,57.1375 Q297.0601,58.2041 297.0601,60.3042 Q297.0601,62.396 297.7449,63.4626 Q298.4297,64.5293 299.7744,64.5293 Q300.4053,64.5293 300.9988,64.2595 Q301.5923,63.9897 302.2231,63.4087 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="55" x="319.75" y="65.7793">Context</text><line style="stroke:#181818;stroke-width:0.5;" x1="240.5" x2="421.5" y1="76.4883" y2="76.4883"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="247.5" y="87.2324"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="119" x="259.5" y="94.0234">strategy: Strategy</text><line style="stroke:#181818;stroke-width:0.5;" x1="240.5" x2="421.5" y1="100.9766" y2="100.9766"/><ellipse cx="250.5" cy="114.7207" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="157" x="259.5" y="118.5117">setStrategy(s: Strategy)</text><ellipse cx="250.5" cy="131.209" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="157" x="259.5" y="135">executeStrategy(): void</text></g><g id="elem_GMN3"><path d="M457.5,76.4083 L457.5,89.2183 L422.78,93.2183 L457.5,97.2183 L457.5,110.0294 A3.5,3.5 0 0 0 461,113.5294 L735,113.5294 A3.5,3.5 0 0 0 738.5,110.0294 L738.5,82.9083 L728.5,72.9083 L461,72.9083 A3.5,3.5 0 0 0 457.5,76.4083 " fill="#7FFFD4" style="stroke:#454645;stroke-width:1.5;"/><path d="M728.5,72.9083 L728.5,81.1583 A1.75,1.75 0 0 0 730.25,82.9083 L738.5,82.9083 L728.5,72.9083 " fill="#7FFFD4" style="stroke:#454645;stroke-width:1.5;"/><text fill="#454645" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="204" x="463.5" y="90.4766">Le Contexte utilise une strat&#233;gie</text><text fill="#454645" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="260" x="463.5" y="105.7872">mais ne conna&#238;t pas son impl&#233;mentation.</text></g><!--class Strategy--><g id="elem_Strategy"><rect codeLine="14" fill="#F1F1F1" height="64.4883" id="Strategy" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:0.5;" width="157" x="252.5" y="218.9483"/><ellipse cx="298.75" cy="234.9483" fill="#B4A7E5" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M294.6777,230.7134 L294.6777,228.5552 L302.0571,228.5552 L302.0571,230.7134 L299.5918,230.7134 L299.5918,238.7901 L302.0571,238.7901 L302.0571,240.9483 L294.6777,240.9483 L294.6777,238.7901 L297.1431,238.7901 L297.1431,230.7134 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="56" x="319.25" y="240.2393">Strategy</text><line style="stroke:#181818;stroke-width:0.5;" x1="253.5" x2="408.5" y1="250.9483" y2="250.9483"/><line style="stroke:#181818;stroke-width:0.5;" x1="253.5" x2="408.5" y1="258.9483" y2="258.9483"/><ellipse cx="263.5" cy="272.6924" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="131" x="272.5" y="276.4834">execute(data): void</text></g><!--class ConcreteStrategyA--><g id="elem_ConcreteStrategyA"><rect codeLine="19" fill="#F1F1F1" height="64.4883" id="ConcreteStrategyA" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:0.5;" width="160" x="7" y="344.4383"/><ellipse cx="22" cy="360.4383" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M24.9731,366.0813 Q24.3921,366.3802 23.7529,366.5296 Q23.1138,366.679 22.4082,366.679 Q19.9014,366.679 18.5815,365.0271 Q17.2617,363.3753 17.2617,360.2542 Q17.2617,357.1248 18.5815,355.4729 Q19.9014,353.8211 22.4082,353.8211 Q23.1138,353.8211 23.7612,353.9705 Q24.4087,354.1199 24.9731,354.4188 L24.9731,357.1414 Q24.3423,356.5604 23.7488,356.2906 Q23.1553,356.0208 22.5244,356.0208 Q21.1797,356.0208 20.4949,357.0875 Q19.8101,358.1541 19.8101,360.2542 Q19.8101,362.346 20.4949,363.4126 Q21.1797,364.4793 22.5244,364.4793 Q23.1553,364.4793 23.7488,364.2095 Q24.3423,363.9397 24.9731,363.3587 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="128" x="36" y="365.7293">ConcreteStrategyA</text><line style="stroke:#181818;stroke-width:0.5;" x1="8" x2="166" y1="376.4383" y2="376.4383"/><line style="stroke:#181818;stroke-width:0.5;" x1="8" x2="166" y1="384.4383" y2="384.4383"/><ellipse cx="18" cy="398.1824" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="131" x="27" y="401.9734">execute(data): void</text></g><!--class ConcreteStrategyB--><g id="elem_ConcreteStrategyB"><rect codeLine="24" fill="#F1F1F1" height="64.4883" id="ConcreteStrategyB" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:0.5;" width="158" x="203" y="344.4383"/><ellipse cx="218" cy="360.4383" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M220.9731,366.0813 Q220.3921,366.3802 219.7529,366.5296 Q219.1138,366.679 218.4082,366.679 Q215.9014,366.679 214.5815,365.0271 Q213.2617,363.3753 213.2617,360.2542 Q213.2617,357.1248 214.5815,355.4729 Q215.9014,353.8211 218.4082,353.8211 Q219.1138,353.8211 219.7612,353.9705 Q220.4087,354.1199 220.9731,354.4188 L220.9731,357.1414 Q220.3423,356.5604 219.7488,356.2906 Q219.1553,356.0208 218.5244,356.0208 Q217.1797,356.0208 216.4949,357.0875 Q215.8101,358.1541 215.8101,360.2542 Q215.8101,362.346 216.4949,363.4126 Q217.1797,364.4793 218.5244,364.4793 Q219.1553,364.4793 219.7488,364.2095 Q220.3423,363.9397 220.9731,363.3587 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="126" x="232" y="365.7293">ConcreteStrategyB</text><line style="stroke:#181818;stroke-width:0.5;" x1="204" x2="360" y1="376.4383" y2="376.4383"/><line style="stroke:#181818;stroke-width:0.5;" x1="204" x2="360" y1="384.4383" y2="384.4383"/><ellipse cx="214" cy="398.1824" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="131" x="223" y="401.9734">execute(data): void</text></g><!--class Client--><g id="elem_Client"><rect fill="#F1F1F1" height="48" id="Client" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:0.5;" width="72" x="132" y="69.2183"/><ellipse cx="147" cy="85.2183" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M149.9731,90.8613 Q149.3921,91.1602 148.7529,91.3096 Q148.1138,91.459 147.4082,91.459 Q144.9014,91.459 143.5815,89.8071 Q142.2617,88.1553 142.2617,85.0342 Q142.2617,81.9048 143.5815,80.2529 Q144.9014,78.6011 147.4082,78.6011 Q148.1138,78.6011 148.7612,78.7505 Q149.4087,78.8999 149.9731,79.1988 L149.9731,81.9214 Q149.3423,81.3404 148.7488,81.0706 Q148.1553,80.8008 147.5244,80.8008 Q146.1797,80.8008 145.4949,81.8675 Q144.8101,82.9341 144.8101,85.0342 Q144.8101,87.126 145.4949,88.1926 Q146.1797,89.2593 147.5244,89.2593 Q148.1553,89.2593 148.7488,88.9895 Q149.3423,88.7197 149.9731,88.1387 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="40" x="161" y="90.5093">Client</text><line style="stroke:#181818;stroke-width:0.5;" x1="133" x2="203" y1="101.2183" y2="101.2183"/><line style="stroke:#181818;stroke-width:0.5;" x1="133" x2="203" y1="109.2183" y2="109.2183"/></g><!--reverse link Strategy to ConcreteStrategyA--><g id="link_Strategy_ConcreteStrategyA"><path d="M252.42,291.9671 C215.85,310.4771 185.9,325.6283 149.36,344.1283 " fill="none" id="Strategy-backto-ConcreteStrategyA" style="stroke:#454645;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="none" points="268.48,283.8383,249.7104,286.6138,255.1296,297.3204,268.48,283.8383" style="stroke:#454645;stroke-width:1.0;"/></g><!--reverse link Strategy to ConcreteStrategyB--><g id="link_Strategy_ConcreteStrategyB"><path d="M311.8731,300.41 C304.5031,318.99 301.84,325.6883 294.47,344.2583 " fill="none" id="Strategy-backto-ConcreteStrategyB" style="stroke:#454645;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="none" points="318.51,283.6783,306.2959,298.1978,317.4504,302.6223,318.51,283.6783" style="stroke:#454645;stroke-width:1.0;"/></g><!--link Context to Strategy--><g id="link_Context_Strategy"><path codeLine="29" d="M331,154.2883 C331,179.1783 331,190.8483 331,212.7783 " fill="none" id="Context-Strategy" style="stroke:#454645;stroke-width:1.0;"/><polygon fill="none" points="331,142.2883,327,148.2883,331,154.2883,335,148.2883,331,142.2883" style="stroke:#454645;stroke-width:1.0;"/><polygon fill="#454645" points="331,218.7783,335,209.7783,331,213.7783,327,209.7783,331,218.7783" style="stroke:#454645;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="39" x="332" y="185.5166">utilise</text></g><!--link Client to Context--><g id="link_Client_Context"><path codeLine="30" d="M204.29,93.2183 C216.01,93.2183 221.72,93.2183 233.43,93.2183 " fill="none" id="Client-to-Context" style="stroke:#454645;stroke-width:1.0;"/><polygon fill="#454645" points="239.43,93.2183,230.43,89.2183,234.43,93.2183,230.43,97.2183,239.43,93.2183" style="stroke:#454645;stroke-width:1.0;"/></g><!--link Client to ConcreteStrategyA--><g id="link_Client_ConcreteStrategyA"><path codeLine="31" d="M145.79,117.7183 C125.22,141.2283 96.05,179.4983 84,218.9483 C71.24,260.7283 74.7279,305.8011 79.7979,338.0411 " fill="none" id="Client-to-ConcreteStrategyA" style="stroke:#454645;stroke-width:1.0;"/><polygon fill="#454645" points="80.73,343.9683,83.2833,334.4561,79.9533,339.029,75.3804,335.6989,80.73,343.9683" style="stroke:#454645;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="43" x="85" y="256.2666">choisit</text></g><!--link Client to ConcreteStrategyB--><g id="link_Client_ConcreteStrategyB"><path codeLine="32" d="M165.96,117.6983 C163.75,154.8683 163.54,228.6383 190,283.4383 C201.41,307.0683 216.8488,324.2739 235.2688,340.3439 " fill="none" id="Client-to-ConcreteStrategyB" style="stroke:#454645;stroke-width:1.0;"/><polygon fill="#454645" points="239.79,344.2883,235.6378,335.3575,236.0223,341.0013,230.3785,341.3858,239.79,344.2883" style="stroke:#454645;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="43" x="191" y="256.2666">choisit</text></g><!--SRC=[fP2nJiD038PtFuNfr0g51yY0HClO0OcLnLnCOYdnLMUdAa8yK1TU8Y_65Pe461XWE9tE_t-VV_l26-uOz_AOI1rSl6LSt0hLYReiL3tUaJidnNjFv5m_Bm12IsQuYUfyS7m1AD3EQZdv02xHsCVdqcPfbIK-SEYT9tbLuZvA1OYl-MXqnYHruoLkUMp5sBkqOlbM_cmv76lX1-r837CjH5KQtXntP6XHKRfTEnmxLYUNg5S0ab7fYG9FSKuJJ86M5Jbz3JDF6nBFWMy-q7mYs_z8wp-Gnjt7ehYU_vJZVc3JIiPX5i_ExvKVavGOcYWclxdMi-iT]--></g></svg></div></section><section class="chapter"><h5 id="exemple-strat-gies-de-paiement" data-toc="exemple-strat-gies-de-paiement">Exemple : Strat&eacute;gies de paiement</h5><p id="-vh77si_51">Pour notre biblioth&egrave;que, un utilisateur pourrait avoir &agrave; payer une amende. Il pourrait vouloir payer par carte de cr&eacute;dit ou par PayPal.</p><ol class="list _decimal" id="-vh77si_52" type="1"><li class="list__item" id="-vh77si_60"><p id="-vh77si_61"><span class="control" id="-vh77si_62">L'interface de strat&eacute;gie (Strategy)</span></p></li></ol><div class="code-block" data-lang="java">
package fr.formation.spring.app.strategy;

// L'interface commune pour tous les algorithmes de paiement.
public interface PaymentStrategy {
    void pay(double amount);
}
</div><ol class="list _decimal" id="-vh77si_54" type="1" start="2"><li class="list__item" id="-vh77si_63"><p id="-vh77si_64"><span class="control" id="-vh77si_65">Les strat&eacute;gies concr&egrave;tes (ConcreteStrategy)</span></p></li></ol><div class="code-block" data-lang="java">
package fr.formation.spring.app.strategy;

public class CreditCardStrategy implements PaymentStrategy {
    private String cardNumber;

    public CreditCardStrategy(String cardNumber) {
        this.cardNumber = cardNumber;
    }

    @Override
    public void pay(double amount) {
        System.out.println(&quot;Paiement de &quot; + amount + &quot;€ par Carte de Crédit &quot;
                + cardNumber.substring(cardNumber.length() - 4));
        // Logique d'appel à une API de paiement (Stripe, etc.)
    }
}
</div><div class="code-block" data-lang="java">
package fr.formation.spring.app.strategy;

public class PayPalStrategy implements PaymentStrategy {
    private String email;

    public PayPalStrategy(String email) {
        this.email = email;
    }

    @Override
    public void pay(double amount) {
        System.out.println(&quot;Paiement de &quot; + amount + &quot;€ via PayPal (&quot; + email + &quot;)&quot;);
        // Logique de redirection vers PayPal
    }
}
</div><ol class="list _decimal" id="-vh77si_57" type="1" start="3"><li class="list__item" id="-vh77si_66"><p id="-vh77si_67"><span class="control" id="-vh77si_68">Le contexte (Context)</span>: La classe qui utilise la strat&eacute;gie.</p></li></ol><div class="code-block" data-lang="java">
package fr.formation.spring.app.strategy;

// Le &quot;contexte&quot; est le service de paiement de notre application.
public class PaymentService {
    private PaymentStrategy paymentStrategy;

    // Le client peut changer de stratégie à tout moment.
    public void setPaymentStrategy(PaymentStrategy strategy) {
        this.paymentStrategy = strategy;
    }

    public void processPayment(double amount) {
        if (paymentStrategy == null) {
            throw new IllegalStateException(&quot;Aucune stratégie de paiement définie !&quot;);
        }
        paymentStrategy.pay(amount);
    }
}
</div><p id="-vh77si_59">Le <code class="code" id="-vh77si_69">PaymentService</code> est compl&egrave;tement d&eacute;coupl&eacute; des d&eacute;tails de paiement. Il sait juste qu'il a une <code class="code" id="-vh77si_70">PaymentStrategy</code> qui sait comment <code class="code" id="-vh77si_71">pay()</code>. C'est une magnifique application du <span class="control" id="-vh77si_72">Principe d'Inversion de D&eacute;pendances</span>.</p></section></section></section><section class="chapter"><h3 id="exercice-7-impl-menter-des-strat-gies-d-exportation" data-toc="exercice-7-impl-menter-des-strat-gies-d-exportation">Exercice 7 : Impl&eacute;menter des strat&eacute;gies d'exportation</h3><p id="-vh77si_73">Nous allons maintenant formaliser notre syst&egrave;me d'exportation de livres en utilisant le pattern Strategy.</p><p id="-vh77si_74"><span class="control" id="-vh77si_76">Cahier des charges :</span></p><ol class="list _decimal" id="-vh77si_75" type="1"><li class="list__item" id="-vh77si_77"><p id="-vh77si_81">Cr&eacute;ez une interface <code class="code" id="-vh77si_82">ExportStrategy</code> avec une m&eacute;thode <code class="code" id="-vh77si_83">export(List&lt;Book&gt; books)</code>.</p></li><li class="list__item" id="-vh77si_78"><p id="-vh77si_84">Cr&eacute;ez deux impl&eacute;mentations : <code class="code" id="-vh77si_85">CsvExportStrategy</code> et <code class="code" id="-vh77si_86">JsonExportStrategy</code>. Pour le moment, elles se contenteront d'afficher dans la console le format de sortie et le nombre de livres trait&eacute;s.</p></li><li class="list__item" id="-vh77si_79"><p id="-vh77si_87">Cr&eacute;ez un <code class="code" id="-vh77si_88">ExportService</code> (le <code class="code" id="-vh77si_89">Context</code>) qui a une m&eacute;thode <code class="code" id="-vh77si_90">setStrategy(ExportStrategy strategy)</code> et une m&eacute;thode <code class="code" id="-vh77si_91">performExport(List&lt;Book&gt; books)</code>.</p></li><li class="list__item" id="-vh77si_80"><p id="-vh77si_92">Dans le <code class="code" id="-vh77si_93">BookController</code>, ajoutez un endpoint <code class="code" id="-vh77si_94">GET /api/books/export</code> qui prend un param&egrave;tre de requ&ecirc;te <code class="code" id="-vh77si_95">format</code> (<code class="code" id="-vh77si_96">csv</code> ou <code class="code" id="-vh77si_97">json</code>). En fonction de ce format, le contr&ocirc;leur choisira la bonne strat&eacute;gie, la donnera au <code class="code" id="-vh77si_98">ExportService</code> et d&eacute;clenchera l'export.</p></li></ol></section><section class="chapter"><h3 id="correction-exercice-7-collapsible-true" data-toc="correction-exercice-7-collapsible-true">Correction exercice 7 {collapsible='true''}</h3><p id="-vh77si_99">Parfait ! Cet exercice montre comment les patterns peuvent se combiner : une <span class="control" id="-vh77si_104">Factory</span> (implicite dans le contr&ocirc;leur) choisit une <span class="control" id="-vh77si_105">Strategy</span> qui est ensuite utilis&eacute;e par un service (<code class="code" id="-vh77si_106">Context</code>).</p><section class="chapter"><h4 id="1-l-interface-exportstrategy-java" data-toc="1-l-interface-exportstrategy-java">1. L'interface <code class="code" id="-vh77si_110">ExportStrategy.java</code></h4><p id="-vh77si_108">Dans un nouveau package <code class="code" id="-vh77si_111">fr.formation.spring.app.export.strategy</code>:</p><div class="code-block" data-lang="java">
package fr.formation.spring.app.export.strategy;

import fr.formation.spring.app.entities.Book;

import java.util.List;

public interface ExportStrategy {
    // La méthode retourne un String pour pouvoir être renvoyée dans une réponse HTTP
    String export(List&lt;Book&gt; books);
}
</div></section><section class="chapter"><h4 id="2-les-strat-gies-concr-tes" data-toc="2-les-strat-gies-concr-tes">2. Les strat&eacute;gies concr&egrave;tes</h4><div class="code-block" data-lang="java">
package fr.formation.spring.app.export.strategy;

import fr.formation.spring.app.entities.Book;

import java.util.List;
import java.util.stream.Collectors;

import org.springframework.stereotype.Component;

@Component(&quot;csvExport&quot;) // On leur donne un nom pour une injection ciblée plus tard
public class CsvExportStrategy implements ExportStrategy {
    @Override
    public String export(List&lt;Book&gt; books) {
        System.out.println(&quot;Exportation de &quot; + books.size() + &quot; livres au format CSV.&quot;);

        // Simulation simple d'une sortie CSV
        StringBuilder sb = new StringBuilder();
        sb.append(&quot;id,title,author\n&quot;);
        books.forEach(book -&gt;
                sb.append(book.getId()).append(&quot;,&quot;)
                        .append(book.getTitle()).append(&quot;,&quot;)
                        .append(book.getAuthor().getName()).append(&quot;\n&quot;)
        );
        return sb.toString();
    }
}
</div><div class="code-block" data-lang="java">
package fr.formation.spring.app.export.strategy;

import fr.formation.spring.app.entities.Book;

import java.util.List;

import org.springframework.stereotype.Component;

@Component(&quot;jsonExport&quot;)
public class JsonExportStrategy implements ExportStrategy {
    @Override
    public String export(List&lt;Book&gt; books) {
        System.out.println(&quot;Exportation de &quot; + books.size() + &quot; livres au format JSON.&quot;);
        // Dans une vraie app, on utiliserait une librairie comme Jackson
        return &quot;{ \&quot;count\&quot;: &quot; + books.size() + &quot;, \&quot;status\&quot;: \&quot;exported\&quot; }&quot;;
    }
}
</div></section><section class="chapter"><h4 id="3-le-contexte-exportservice-java" data-toc="3-le-contexte-exportservice-java">3. Le contexte <code class="code" id="-vh77si_116">ExportService.java</code></h4><div class="code-block" data-lang="java">
package fr.formation.spring.app.export.strategy;

import fr.formation.spring.app.entities.Book;

import java.util.List;

import org.springframework.stereotype.Service;

@Service
public class ExportService {
    private ExportStrategy strategy;

    public void setStrategy(ExportStrategy strategy) {
        this.strategy = strategy;
    }

    public String performExport(List&lt;Book&gt; books) {
        if (strategy == null) {
            throw new IllegalStateException(&quot;Aucune stratégie d'export définie.&quot;);
        }
        return strategy.export(books);
    }
}
</div></section><section class="chapter"><h4 id="4-le-bookcontroller-mis-jour" data-toc="4-le-bookcontroller-mis-jour">4. Le <code class="code" id="-vh77si_122">BookController</code> mis &agrave; jour</h4><p id="-vh77si_118">Ajoutez cette m&eacute;thode &agrave; votre <code class="code" id="-vh77si_123">BookController.java</code>.</p><div class="code-block" data-lang="java">
// ... dans BookController.java ...

// Injectez les dépendances nécessaires
private final BookRepository bookRepository;
private final ExportService exportService;
private final Map&lt;String, ExportStrategy&gt; exportStrategies;

// Mettez à jour votre constructeur
public BookController(BookService bookService, BookRepository bookRepository,
                      ExportService exportService, Map&lt;String, ExportStrategy&gt; strategies) {
    this.bookService = bookService;
    this.bookRepository = bookRepository;
    this.exportService = exportService;
    this.exportStrategies = strategies;
}


@GetMapping(&quot;/export&quot;)
public ResponseEntity&lt;String&gt; exportBooks(@RequestParam String format) {
    // Utilisation de la map injectée par Spring pour choisir la stratégie
    ExportStrategy strategy = exportStrategies.get(format.toLowerCase() + &quot;Export&quot;);

    if (strategy == null) {
        return ResponseEntity.badRequest().body(&quot;Format non supporté: &quot; + format);
    }

    exportService.setStrategy(strategy);
    List&lt;Book&gt; allBooks = bookRepository.findAll();
    String exportContent = exportService.performExport(allBooks);

    // Définir le Content-Type approprié pour la réponse
    String contentType = &quot;text/plain&quot;;
    if (&quot;csv&quot;.equalsIgnoreCase(format)) {
        contentType = &quot;text/csv&quot;;
    } else if (&quot;json&quot;.equalsIgnoreCase(format)) {
        contentType = &quot;application/json&quot;;
    }

    return ResponseEntity.ok()
            .header(&quot;Content-Type&quot;, contentType)
            .body(exportContent);
}

</div><aside class="prompt" data-type="tip" data-title="Magie de Spring" id="-vh77si_120"><p>Comment Spring a-t-il rempli la <code class="code" id="-vh77si_124">Map&lt;String, ExportStrategy&gt;</code>? Quand vous injectez une `Map` o&ugrave; la cl&eacute; est un `String` et la valeur un type de bean, Spring la remplit automatiquement avec tous les beans de ce type, en utilisant le nom du bean comme cl&eacute;. C'est pour cela que nous avons nomm&eacute; nos strat&eacute;gies `@Component(&quot;csvExport&quot;)` et `@Component(&quot;jsonExport&quot;)` ! C'est une fa&ccedil;on &eacute;l&eacute;gante d'impl&eacute;menter une **Factory** sans &eacute;crire une seule ligne de code de fabrique.</p></aside></section></section><section class="chapter"><h3 id="le-pattern-observer-l-observateur" data-toc="le-pattern-observer-l-observateur">Le Pattern Observer (L'Observateur)</h3><section class="chapter"><h4 id="l-intention_2" data-toc="l-intention_2">L'intention</h4><p id="-vh77si_127"><span class="control" id="-vh77si_129">D&eacute;finir une d&eacute;pendance un-&agrave;-plusieurs entre des objets, de sorte que lorsqu'un objet change d'&eacute;tat, tous ses d&eacute;pendants soient notifi&eacute;s et mis &agrave; jour automatiquement.</span></p><p id="-vh77si_128">C'est le principe de l'abonnement. Vous vous abonnez &agrave; une cha&icirc;ne YouTube (<code class="code" id="-vh77si_130">Subject</code>). Lorsque le cr&eacute;ateur publie une nouvelle vid&eacute;o (le <code class="code" id="-vh77si_131">Subject</code> change d'&eacute;tat), vous (<code class="code" id="-vh77si_132">Observer</code>) recevez une notification. Vous n'avez pas besoin d'aller v&eacute;rifier la cha&icirc;ne toutes les 5 minutes (<code class="code" id="-vh77si_133">polling</code>). La notification est pouss&eacute;e vers vous.</p></section><section class="chapter"><h4 id="structure-et-impl-mentation_2" data-toc="structure-et-impl-mentation_2">Structure et Impl&eacute;mentation</h4><section class="chapter"><h5 id="diagramme-uml_2" data-toc="diagramme-uml_2">Diagramme UML</h5><style>.theme-dark .plantuml > svg {filter: hue-rotate(180deg) invert(0.9);}div.plantuml {overflow-x: auto;}</style><div class="plantuml"><?xml version="1.0" encoding="us-ascii" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="513px" preserveAspectRatio="none" style="width:567px;height:513px;background:#FFFFFF;" version="1.1" viewBox="0 0 567 513" width="567px" zoomAndPan="magnify"><defs/><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="233" x="160.235" y="23.5352">Diagramme du Pattern Observer</text><!--class Observer--><g id="elem_Observer"><rect codeLine="5" fill="#F1F1F1" height="64.4883" id="Observer" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:0.5;" width="154" x="113" y="299.9383"/><ellipse cx="155" cy="315.9383" fill="#B4A7E5" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M150.9277,311.7034 L150.9277,309.5452 L158.3071,309.5452 L158.3071,311.7034 L155.8418,311.7034 L155.8418,319.7801 L158.3071,319.7801 L158.3071,321.9383 L150.9277,321.9383 L150.9277,319.7801 L153.3931,319.7801 L153.3931,311.7034 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="62" x="175" y="321.2293">Observer</text><line style="stroke:#181818;stroke-width:0.5;" x1="114" x2="266" y1="331.9383" y2="331.9383"/><line style="stroke:#181818;stroke-width:0.5;" x1="114" x2="266" y1="339.9383" y2="339.9383"/><ellipse cx="124" cy="353.6824" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="128" x="133" y="357.4734">update(state): void</text></g><!--class ConcreteObserverA--><g id="elem_ConcreteObserverA"><rect codeLine="10" fill="#F1F1F1" height="64.4883" id="ConcreteObserverA" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:0.5;" width="166" x="7" y="441.9083"/><ellipse cx="22" cy="457.9083" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M24.9731,463.5513 Q24.3921,463.8502 23.7529,463.9996 Q23.1138,464.149 22.4082,464.149 Q19.9014,464.149 18.5815,462.4971 Q17.2617,460.8453 17.2617,457.7242 Q17.2617,454.5948 18.5815,452.9429 Q19.9014,451.2911 22.4082,451.2911 Q23.1138,451.2911 23.7612,451.4405 Q24.4087,451.5899 24.9731,451.8888 L24.9731,454.6114 Q24.3423,454.0304 23.7488,453.7606 Q23.1553,453.4908 22.5244,453.4908 Q21.1797,453.4908 20.4949,454.5575 Q19.8101,455.6241 19.8101,457.7242 Q19.8101,459.816 20.4949,460.8826 Q21.1797,461.9493 22.5244,461.9493 Q23.1553,461.9493 23.7488,461.6795 Q24.3423,461.4097 24.9731,460.8287 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="134" x="36" y="463.1993">ConcreteObserverA</text><line style="stroke:#181818;stroke-width:0.5;" x1="8" x2="172" y1="473.9083" y2="473.9083"/><line style="stroke:#181818;stroke-width:0.5;" x1="8" x2="172" y1="481.9083" y2="481.9083"/><ellipse cx="18" cy="495.6524" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="128" x="27" y="499.4434">update(state): void</text></g><!--class ConcreteObserverB--><g id="elem_ConcreteObserverB"><rect codeLine="14" fill="#F1F1F1" height="64.4883" id="ConcreteObserverB" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:0.5;" width="164" x="208" y="441.9083"/><ellipse cx="223" cy="457.9083" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M225.9731,463.5513 Q225.3921,463.8502 224.7529,463.9996 Q224.1138,464.149 223.4082,464.149 Q220.9014,464.149 219.5815,462.4971 Q218.2617,460.8453 218.2617,457.7242 Q218.2617,454.5948 219.5815,452.9429 Q220.9014,451.2911 223.4082,451.2911 Q224.1138,451.2911 224.7612,451.4405 Q225.4087,451.5899 225.9731,451.8888 L225.9731,454.6114 Q225.3423,454.0304 224.7488,453.7606 Q224.1553,453.4908 223.5244,453.4908 Q222.1797,453.4908 221.4949,454.5575 Q220.8101,455.6241 220.8101,457.7242 Q220.8101,459.816 221.4949,460.8826 Q222.1797,461.9493 223.5244,461.9493 Q224.1553,461.9493 224.7488,461.6795 Q225.3423,461.4097 225.9731,460.8287 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="132" x="237" y="463.1993">ConcreteObserverB</text><line style="stroke:#181818;stroke-width:0.5;" x1="209" x2="371" y1="473.9083" y2="473.9083"/><line style="stroke:#181818;stroke-width:0.5;" x1="209" x2="371" y1="481.9083" y2="481.9083"/><ellipse cx="219" cy="495.6524" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="128" x="228" y="499.4434">update(state): void</text></g><!--class Subject--><g id="elem_Subject"><rect codeLine="18" fill="#F1F1F1" height="113.9531" id="Subject" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:0.5;" width="208" x="217" y="44.4883"/><ellipse cx="291.75" cy="60.4883" fill="#A9DCDF" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M291.8633,55.8364 L290.7095,60.9082 L293.0254,60.9082 Z M290.3691,53.5952 L293.3657,53.5952 L296.7109,65.9883 L294.2622,65.9883 L293.4985,62.9253 L290.2197,62.9253 L289.4727,65.9883 L287.0239,65.9883 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="50" x="312.25" y="65.7793">Subject</text><line style="stroke:#181818;stroke-width:0.5;" x1="218" x2="424" y1="76.4883" y2="76.4883"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="225" y="87.2324"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="182" x="237" y="94.0234">observers: List&lt;Observer&gt;</text><line style="stroke:#181818;stroke-width:0.5;" x1="218" x2="424" y1="100.9766" y2="100.9766"/><ellipse cx="228" cy="114.7207" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="168" x="237" y="118.5117">attach(o: Observer): void</text><ellipse cx="228" cy="131.209" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="172" x="237" y="135">detach(o: Observer): void</text><ellipse cx="228" cy="147.6973" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="86" x="237" y="151.4883">notify(): void</text></g><!--class ConcreteSubject--><g id="elem_ConcreteSubject"><rect codeLine="27" fill="#F1F1F1" height="97.4648" id="ConcreteSubject" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:0.5;" width="166" x="302" y="283.4483"/><ellipse cx="326.9" cy="299.4483" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M329.8731,305.0913 Q329.2921,305.3902 328.6529,305.5396 Q328.0138,305.689 327.3082,305.689 Q324.8014,305.689 323.4815,304.0371 Q322.1617,302.3853 322.1617,299.2642 Q322.1617,296.1348 323.4815,294.4829 Q324.8014,292.8311 327.3082,292.8311 Q328.0138,292.8311 328.6612,292.9805 Q329.3087,293.1299 329.8731,293.4288 L329.8731,296.1514 Q329.2423,295.5704 328.6488,295.3006 Q328.0553,295.0308 327.4244,295.0308 Q326.0797,295.0308 325.3949,296.0975 Q324.7101,297.1641 324.7101,299.2642 Q324.7101,301.356 325.3949,302.4226 Q326.0797,303.4893 327.4244,303.4893 Q328.0553,303.4893 328.6488,303.2195 Q329.2423,302.9497 329.8731,302.3687 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="112" x="343.1" y="304.7393">ConcreteSubject</text><line style="stroke:#181818;stroke-width:0.5;" x1="303" x2="467" y1="315.4483" y2="315.4483"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="310" y="326.1924"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="65" x="322" y="332.9834">state: any</text><line style="stroke:#181818;stroke-width:0.5;" x1="303" x2="467" y1="339.9366" y2="339.9366"/><ellipse cx="313" cy="353.6807" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="98" x="322" y="357.4717">getState(): any</text><ellipse cx="313" cy="370.169" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="140" x="322" y="373.96">setState(s: any): void</text></g><!--reverse link Observer to ConcreteObserverA--><g id="link_Observer_ConcreteObserverA"><path d="M157.0983,379.2359 C140.6283,402.2959 128.82,418.8183 112.37,441.8483 " fill="none" id="Observer-backto-ConcreteObserverA" style="stroke:#454645;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="none" points="167.56,364.5883,152.2158,375.7487,161.9809,382.7231,167.56,364.5883" style="stroke:#454645;stroke-width:1.0;"/></g><!--reverse link Observer to ConcreteObserverB--><g id="link_Observer_ConcreteObserverB"><path d="M222.9017,379.2359 C239.3717,402.2959 251.18,418.8183 267.63,441.8483 " fill="none" id="Observer-backto-ConcreteObserverB" style="stroke:#454645;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="none" points="212.44,364.5883,218.0191,382.7231,227.7842,375.7487,212.44,364.5883" style="stroke:#454645;stroke-width:1.0;"/></g><!--reverse link Subject to ConcreteSubject--><g id="link_Subject_ConcreteSubject"><path d="M341.5873,176.0433 C352.2773,214.2733 361.43,246.9583 371.6,283.2783 " fill="none" id="Subject-backto-ConcreteSubject" style="stroke:#454645;stroke-width:1.0;"/><polygon fill="none" points="336.74,158.7083,335.8089,177.6591,347.3656,174.4276,336.74,158.7083" style="stroke:#454645;stroke-width:1.0;"/><path d="M367.47,196.9483 L367.47,244.9483 A3.5,3.5 0 0 0 370.97,248.4483 L556.97,248.4483 A3.5,3.5 0 0 0 560.47,244.9483 L560.47,203.4483 L550.47,193.4483 L370.97,193.4483 A3.5,3.5 0 0 0 367.47,196.9483 " fill="#7FFFD4" style="stroke:#454645;stroke-width:1.5;"/><path d="M550.47,193.4483 L550.47,201.6983 A1.75,1.75 0 0 0 552.22,203.4483 L560.47,203.4483 L550.47,193.4483 " fill="#7FFFD4" style="stroke:#454645;stroke-width:1.5;"/><text fill="#454645" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="172" x="373.47" y="211.0166">La m&#233;thode `setState` doit</text><text fill="#454645" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="149" x="373.47" y="226.3272">appeler `notify()` apr&#232;s</text><text fill="#454645" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="119" x="373.47" y="241.6377">avoir chang&#233; l'&#233;tat.</text></g><!--reverse link Subject to Observer--><g id="link_Subject_Observer"><path codeLine="40" d="M282.8257,169.1211 C257.4457,213.4311 228.95,263.1783 208.16,299.4783 " fill="none" id="Subject-backto-Observer" style="stroke:#454645;stroke-width:1.0;"/><polygon fill="none" points="288.79,158.7083,282.3369,161.9266,282.8257,169.1211,289.2788,165.9028,288.79,158.7083" style="stroke:#454645;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="22" x="187.5696" y="289.162">0..*</text></g><!--SRC=[ZP1DQiCm58JtEiNKcwOD2LsRKkZFCj12Bk1d-oLMQqj6UWaDfVTfpf6BzJb4WPOcT2FG3FfcD1VISCTOspAG4oDMMaRsP6aPg5EZNk65H3WuF9UHmvf3PenrgYoeugE83sF6MFKr2O-Yw7cLO-rjRO1FOwgMOiIZTrLWuVJe7hRhMyrt4lz90lv6FPn0dUb4PPH0bHo8yrNvodhJ-0dyWH1pp6oKsqIy6xhf7bGr8vyVWn9tZ9fFUywBNMn6PuP97VXTsDM_Ekr_a8FSPYYnP9aFme0Rf35YKk9U-RcQPZE2NJO2xz1QzmPLPuHkjvN6rumYlIzGUolgKjzpgoiMgNYXKjXznS5JTa3La5lkjcWlbK8oLKDxxyECIUNzP8BiPZgzpewRV0C0]--></g></svg></div></section></section></section><section class="chapter"><h3 id="exercice-8-notifier-les-utilisateurs-de-la-disponibilit-d-un-livre" data-toc="exercice-8-notifier-les-utilisateurs-de-la-disponibilit-d-un-livre">Exercice 8 : Notifier les utilisateurs de la disponibilit&eacute; d'un livre</h3><p id="-vh77si_136">Lorsqu'un livre est en rupture de stock, les utilisateurs peuvent s'inscrire sur une liste d'attente. Quand le livre redevient disponible (par exemple, quelqu'un le rend), nous devons notifier tous les utilisateurs sur cette liste.</p><p id="-vh77si_137"><span class="control" id="-vh77si_139">Cahier des charges :</span></p><ol class="list _decimal" id="-vh77si_138" type="1"><li class="list__item" id="-vh77si_140"><p id="-vh77si_143"><span class="control" id="-vh77si_144">L'Observateur :</span> Cr&eacute;ez une interface <code class="code" id="-vh77si_145">WaitingUser</code> avec une m&eacute;thode <code class="code" id="-vh77si_146">update(Book book)</code>. Cr&eacute;ez une classe <code class="code" id="-vh77si_147">User</code> qui impl&eacute;mente cette interface et qui affiche un message comme <code class="code" id="-vh77si_148">&quot;Bonjour [nom], le livre '[titre du livre]' est de nouveau disponible !&quot;</code>.</p></li><li class="list__item" id="-vh77si_141"><p id="-vh77si_149"><span class="control" id="-vh77si_151">Le Sujet :</span> Cr&eacute;ez une classe <code class="code" id="-vh77si_152">BookAvailabilityNotifier</code> (le <code class="code" id="-vh77si_153">Subject</code>). Elle doit avoir :</p><ul class="list _bullet" id="-vh77si_150"><li class="list__item" id="-vh77si_154"><p id="-vh77si_157">Une <code class="code" id="-vh77si_158">List&lt;WaitingUser&gt;</code> pour stocker les abonn&eacute;s.</p></li><li class="list__item" id="-vh77si_155"><p id="-vh77si_159">Des m&eacute;thodes <code class="code" id="-vh77si_160">subscribe(WaitingUser user)</code> et <code class="code" id="-vh77si_161">unsubscribe(WaitingUser user)</code>.</p></li><li class="list__item" id="-vh77si_156"><p id="-vh77si_162">Une m&eacute;thode <code class="code" id="-vh77si_163">notifyUsers(Book book)</code> qui parcourt la liste et appelle <code class="code" id="-vh77si_164">update()</code> sur chaque utilisateur.</p></li></ul></li><li class="list__item" id="-vh77si_142"><p id="-vh77si_165"><span class="control" id="-vh77si_167">Le Client :</span> Cr&eacute;ez une classe de test qui simule le sc&eacute;nario :</p><ul class="list _bullet" id="-vh77si_166"><li class="list__item" id="-vh77si_168"><p id="-vh77si_172">Cr&eacute;ez un livre (&quot;Dune&quot;).</p></li><li class="list__item" id="-vh77si_169"><p id="-vh77si_173">Cr&eacute;ez deux utilisateurs (&quot;Paul&quot;, &quot;Jessica&quot;).</p></li><li class="list__item" id="-vh77si_170"><p id="-vh77si_174">Abonnez ces deux utilisateurs au notificateur pour le livre &quot;Dune&quot;.</p></li><li class="list__item" id="-vh77si_171"><p id="-vh77si_175">Appelez une m&eacute;thode <code class="code" id="-vh77si_176">bookBecomesAvailable(Book book)</code> qui d&eacute;clenche la notification.</p></li></ul></li></ol></section><section class="chapter"><h3 id="correction-exercice-8-collapsible-true" data-toc="correction-exercice-8-collapsible-true">Correction exercice 8 {collapsible='true''}</h3><p id="-vh77si_177">Voici une excellente application du pattern Observer. Il d&eacute;couple compl&egrave;tement la logique de &quot;retour en stock&quot; de la logique de &quot;notification&quot;.</p><section class="chapter"><h4 id="1-l-interface-waitinguser-et-l-impl-mentation-user" data-toc="1-l-interface-waitinguser-et-l-impl-mentation-user">1. L'interface <code class="code" id="-vh77si_185">WaitingUser</code> et l'impl&eacute;mentation <code class="code" id="-vh77si_186">User</code></h4><p id="-vh77si_182">Dans un nouveau package <code class="code" id="-vh77si_187">fr.formation.spring.app.observer</code>:</p><div class="code-block" data-lang="java">
// WaitingUser.java (L'interface Observer)
package fr.formation.spring.app.observer;

import fr.formation.spring.app.entities.Book;

public interface WaitingUser {
    void update(Book book);
}
</div><div class="code-block" data-lang="java">
// User.java (L'implémentation ConcreteObserver)
package fr.formation.spring.app.observer;

import fr.formation.spring.app.entities.Book;

public class User implements WaitingUser {
    private String name;

    public User(String name) {
        this.name = name;
    }

    @Override
    public void update(Book book) {
        System.out.println(&quot;--- Notification pour &quot; + this.name + &quot; ---&quot;);
        System.out.println(&quot;Bonjour &quot; + this.name +
                &quot;, le livre '&quot; + book.getTitle() + &quot;' est de nouveau disponible !&quot;);
        System.out.println(&quot;------------------------------------&quot; + &quot;\n&quot;);
    }
}
</div></section><section class="chapter"><h4 id="2-le-sujet-bookavailabilitynotifier-java" data-toc="2-le-sujet-bookavailabilitynotifier-java">2. Le Sujet <code class="code" id="-vh77si_191">BookAvailabilityNotifier.java</code></h4><p id="-vh77si_189">Il est courant d'avoir un &quot;sujet&quot; par &eacute;v&eacute;nement ou par ressource. Ici, on pourrait imaginer un <code class="code" id="-vh77si_192">Map&lt;Book, BookAvailabilityNotifier&gt;</code>. Pour simplifier, nous cr&eacute;ons un notificateur unique.</p><div class="code-block" data-lang="java">
// BookAvailabilityNotifier.java (Le Sujet Concret)
package fr.formation.spring.app.observer;

import fr.formation.spring.app.entities.Book;

import java.util.ArrayList;
import java.util.List;

public class BookAvailabilityNotifier {

    private List&lt;WaitingUser&gt; waitingUsers = new ArrayList&lt;&gt;();

    public void subscribe(WaitingUser user) {
        if (!waitingUsers.contains(user)) {
            waitingUsers.add(user);
            System.out.println(&quot;INFO: L'utilisateur s'est abonné aux notifications.&quot;);
        }
    }

    public void unsubscribe(WaitingUser user) {
        waitingUsers.remove(user);
        System.out.println(&quot;INFO: L'utilisateur s'est désabonné.&quot;);
    }

    // La méthode qui déclenche la notification
    public void bookBecomesAvailable(Book book) {
        System.out.println(&quot;\n*** Le livre '&quot; + book.getTitle()
                + &quot;' est disponible. Envoi des notifications... ***\n&quot;);
        notifyUsers(book);
    }

    private void notifyUsers(Book book) {
        // On crée une copie pour éviter des ConcurrentModificationException
        // si un observateur se désabonne dans sa méthode update().
        for (WaitingUser user : new ArrayList&lt;&gt;(waitingUsers)) {
            user.update(book);
        }
    }
}
</div></section><section class="chapter"><h4 id="3-la-classe-de-test" data-toc="3-la-classe-de-test">3. La classe de test</h4><div class="code-block" data-lang="java">
package fr.formation.spring.app.observer;

import fr.formation.spring.app.entities.Book;

public class TestObserver {
    public static void main(String[] args) {
        // 1. Le sujet
        BookAvailabilityNotifier notifier = new BookAvailabilityNotifier();

        // 2. Les observateurs
        User paul = new User(&quot;Paul Atréides&quot;);
        User jessica = new User(&quot;Dame Jessica&quot;);

        // 3. Le livre concerné
        Book dune = new Book();
        dune.setTitle(&quot;Dune&quot;);

        // 4. Les utilisateurs s'abonnent
        notifier.subscribe(paul);
        notifier.subscribe(jessica);

        // 5. Un événement se produit : le livre redevient disponible
        notifier.bookBecomesAvailable(dune);

        // 6. Paul a trouvé le livre, il se désabonne
        notifier.unsubscribe(paul);

        // 7. Un autre exemplaire redevient disponible
        notifier.bookBecomesAvailable(dune);
    }
}
</div></section></section><section class="chapter"><h3 id="le-pattern-template-method-patron-de-m-thode" data-toc="le-pattern-template-method-patron-de-m-thode">Le Pattern Template Method (Patron de M&eacute;thode)</h3><section class="chapter"><h4 id="l-intention_1" data-toc="l-intention_1">L'intention</h4><p id="-vh77si_197"><span class="control" id="-vh77si_199">D&eacute;finir le squelette d'un algorithme dans une op&eacute;ration, en reportant la d&eacute;finition de certaines &eacute;tapes aux sous-classes.</span> Template Method permet aux sous-classes de red&eacute;finir certaines &eacute;tapes d'un algorithme sans changer la structure de l'algorithme.</p><p id="-vh77si_198">C'est comme une recette de cuisine standardis&eacute;e dans une franchise de boulangerie. La recette principale pour faire un g&acirc;teau (<code class="code" id="-vh77si_200">template method</code>) est toujours : 1. <code class="code" id="-vh77si_201">prepareIngredients()</code>, 2. <code class="code" id="-vh77si_202">mixIngredients()</code>, 3. <code class="code" id="-vh77si_203">bake()</code>, 4. <code class="code" id="-vh77si_204">decorate()</code>. Les &eacute;tapes 1, 2 et 3 sont fixes. Mais les &eacute;tapes <code class="code" id="-vh77si_205">prepareIngredients()</code> et <code class="code" id="-vh77si_206">decorate()</code> sont sp&eacute;cifiques &agrave; chaque type de g&acirc;teau (chocolat, fruits...). Les classes <code class="code" id="-vh77si_207">ChocolateCake</code> et <code class="code" id="-vh77si_208">FruitCake</code> impl&eacute;menteront ces &eacute;tapes sp&eacute;cifiques, mais elles suivront toutes la m&ecirc;me structure globale.</p></section><section class="chapter"><h4 id="structure-et-impl-mentation_1" data-toc="structure-et-impl-mentation_1">Structure et Impl&eacute;mentation</h4><section class="chapter"><h5 id="diagramme-uml_1" data-toc="diagramme-uml_1">Diagramme UML</h5><style>.theme-dark .plantuml > svg {filter: hue-rotate(180deg) invert(0.9);}div.plantuml {overflow-x: auto;}</style><div class="plantuml"><?xml version="1.0" encoding="us-ascii" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="552px" preserveAspectRatio="none" style="width:984px;height:552px;background:#FFFFFF;" version="1.1" viewBox="0 0 984 552" width="984px" zoomAndPan="magnify"><defs/><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="295" x="337.5" y="23.5352">Diagramme du Pattern Template Method</text><!--class AbstractClass--><g id="elem_AbstractClass"><rect codeLine="5" fill="#F1F1F1" height="163.418" id="AbstractClass" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:0.5;" width="229" x="114.5" y="191.0383"/><ellipse cx="178.25" cy="207.0383" fill="#A9DCDF" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M178.3633,202.3864 L177.2095,207.4582 L179.5254,207.4582 Z M176.8691,200.1452 L179.8657,200.1452 L183.2109,212.5383 L180.7622,212.5383 L179.9985,209.4753 L176.7197,209.4753 L175.9727,212.5383 L173.5239,212.5383 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="93" x="198.75" y="212.3293">AbstractClass</text><line style="stroke:#181818;stroke-width:0.5;" x1="115.5" x2="342.5" y1="223.0383" y2="223.0383"/><line style="stroke:#181818;stroke-width:0.5;" x1="115.5" x2="342.5" y1="231.0383" y2="231.0383"/><ellipse cx="125.5" cy="244.7824" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="203" x="134.5" y="248.5734">{final} templateMethod(): void</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4" x="134.5" y="265.0617">&#160;</text><polygon fill="#FFFF44" points="125.5,272.759,129.5,276.759,125.5,280.759,121.5,276.759" style="stroke:#B38D22;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="185" x="134.5" y="281.55">primitiveOperation1(): void</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4" x="134.5" y="298.0383">&#160;</text><polygon fill="#FFFF44" points="125.5,305.7355,129.5,309.7355,125.5,313.7355,121.5,309.7355" style="stroke:#B38D22;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="185" x="134.5" y="314.5266">primitiveOperation2(): void</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4" x="134.5" y="331.0148">&#160;</text><polygon fill="#FFFF44" points="125.5,338.7121,129.5,342.7121,125.5,346.7121,121.5,342.7121" style="stroke:#B38D22;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="82" x="134.5" y="347.5031">hook(): void</text></g><path d="M713,232.1283 L713,263.7494 L337.5,243.2824 L713,271.7494 L713,303.3705 A0,0 0 0 0 713,303.3705 L977,303.3705 A0,0 0 0 0 977,303.3705 L977,242.1283 L967,232.1283 L713,232.1283 A0,0 0 0 0 713,232.1283 " fill="#7FFFD4" style="stroke:#454645;stroke-width:1.5;"/><path d="M967,232.1283 L967,242.1283 L977,242.1283 L967,232.1283 " fill="#7FFFD4" style="stroke:#454645;stroke-width:1.5;"/><text fill="#454645" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="243" x="719" y="249.6966">Le patron de m&#233;thode, souvent `final`</text><text fill="#454645" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="243" x="719" y="265.0072">pour que les sous-classes ne puissent</text><text fill="#454645" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="199" x="719" y="280.3177">pas le modifier. Il d&#233;finit l'ordre</text><text fill="#454645" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="97" x="719" y="295.6283">des op&#233;rations.</text><!--class ConcreteClass--><g id="elem_ConcreteClass"><rect codeLine="30" fill="#F1F1F1" height="130.4414" id="ConcreteClass" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:0.5;" width="211" x="123.5" y="415.4583"/><ellipse cx="175.75" cy="431.4583" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M178.7231,437.1013 Q178.1421,437.4002 177.5029,437.5496 Q176.8638,437.699 176.1582,437.699 Q173.6514,437.699 172.3315,436.0471 Q171.0117,434.3953 171.0117,431.2742 Q171.0117,428.1448 172.3315,426.4929 Q173.6514,424.8411 176.1582,424.8411 Q176.8638,424.8411 177.5112,424.9905 Q178.1587,425.1399 178.7231,425.4388 L178.7231,428.1614 Q178.0923,427.5804 177.4988,427.3106 Q176.9053,427.0408 176.2744,427.0408 Q174.9297,427.0408 174.2449,428.1075 Q173.5601,429.1741 173.5601,431.2742 Q173.5601,433.366 174.2449,434.4326 Q174.9297,435.4993 176.2744,435.4993 Q176.9053,435.4993 177.4988,435.2295 Q178.0923,434.9597 178.7231,434.3787 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="98" x="196.25" y="436.7493">ConcreteClass</text><line style="stroke:#181818;stroke-width:0.5;" x1="124.5" x2="333.5" y1="447.4583" y2="447.4583"/><line style="stroke:#181818;stroke-width:0.5;" x1="124.5" x2="333.5" y1="455.4583" y2="455.4583"/><polygon fill="#FFFF44" points="134.5,464.2024,138.5,468.2024,134.5,472.2024,130.5,468.2024" style="stroke:#B38D22;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="185" x="143.5" y="472.9934">primitiveOperation1(): void</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4" x="143.5" y="489.4817">&#160;</text><polygon fill="#FFFF44" points="134.5,497.179,138.5,501.179,134.5,505.179,130.5,501.179" style="stroke:#B38D22;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="185" x="143.5" y="505.97">primitiveOperation2(): void</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4" x="143.5" y="522.4583">&#160;</text><polygon fill="#FFFF44" points="134.5,530.1555,138.5,534.1555,134.5,538.1555,130.5,534.1555" style="stroke:#B38D22;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="82" x="143.5" y="538.9466">hook(): void</text></g><!--class Client--><g id="elem_Client"><rect fill="#F1F1F1" height="48" id="Client" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:0.5;" width="72" x="7" y="248.7483"/><ellipse cx="22" cy="264.7483" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M24.9731,270.3913 Q24.3921,270.6902 23.7529,270.8396 Q23.1138,270.989 22.4082,270.989 Q19.9014,270.989 18.5815,269.3371 Q17.2617,267.6853 17.2617,264.5642 Q17.2617,261.4348 18.5815,259.7829 Q19.9014,258.1311 22.4082,258.1311 Q23.1138,258.1311 23.7612,258.2805 Q24.4087,258.4299 24.9731,258.7288 L24.9731,261.4514 Q24.3423,260.8704 23.7488,260.6006 Q23.1553,260.3308 22.5244,260.3308 Q21.1797,260.3308 20.4949,261.3975 Q19.8101,262.4641 19.8101,264.5642 Q19.8101,266.656 20.4949,267.7226 Q21.1797,268.7893 22.5244,268.7893 Q23.1553,268.7893 23.7488,268.5195 Q24.3423,268.2497 24.9731,267.6687 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="40" x="36" y="270.0393">Client</text><line style="stroke:#181818;stroke-width:0.5;" x1="8" x2="78" y1="280.7483" y2="280.7483"/><line style="stroke:#181818;stroke-width:0.5;" x1="8" x2="78" y1="288.7483" y2="288.7483"/></g><g id="elem_GMN9"><path d="M149.5,46.9883 L149.5,126.541 A3.5,3.5 0 0 0 153,130.041 L225,130.041 L229,190.6183 L233,130.041 L305,130.041 A3.5,3.5 0 0 0 308.5,126.541 L308.5,53.4883 L298.5,43.4883 L153,43.4883 A3.5,3.5 0 0 0 149.5,46.9883 " fill="#7FFFD4" style="stroke:#454645;stroke-width:1.5;"/><path d="M298.5,43.4883 L298.5,51.7383 A1.75,1.75 0 0 0 300.25,53.4883 L308.5,53.4883 L298.5,43.4883 " fill="#7FFFD4" style="stroke:#454645;stroke-width:1.5;"/><text fill="#454645" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="118" x="155.5" y="61.0566">templateMethod() {</text><text fill="#454645" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="138" x="155.5" y="76.3672">primitiveOperation1();</text><text fill="#454645" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="138" x="155.5" y="91.6777">primitiveOperation2();</text><text fill="#454645" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="44" x="155.5" y="106.9883">hook();</text><text fill="#454645" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="4" x="155.5" y="122.2988">}</text></g><!--reverse link AbstractClass to ConcreteClass--><g id="link_AbstractClass_ConcreteClass"><path d="M229,372.8383 C229,392.8783 229,396.0683 229,415.1883 " fill="none" id="AbstractClass-backto-ConcreteClass" style="stroke:#454645;stroke-width:1.0;"/><polygon fill="none" points="229,354.8383,223,372.8383,235,372.8383,229,354.8383" style="stroke:#454645;stroke-width:1.0;"/></g><!--link Client to AbstractClass--><g id="link_Client_AbstractClass"><path codeLine="40" d="M79.33,272.7483 C90.92,272.7483 96.52,272.7483 108.12,272.7483 " fill="none" id="Client-to-AbstractClass" style="stroke:#454645;stroke-width:1.0;"/><polygon fill="#454645" points="114.12,272.7483,105.12,268.7483,109.12,272.7483,105.12,276.7483,114.12,272.7483" style="stroke:#454645;stroke-width:1.0;"/></g><!--SRC=[hPBDRXf13CVlVWgN709g4gazWbIfeZbKwaSEISyPTWnhPNOyzNXNbH0Fn7FmOfrbGO66Os_hyTVlx_s_iveQmeuNwgA1iGN2qHTsAtLDIVWM7vmPQSH7Qb9mHlYTh1O_0d2BREegmogudF7p8PplepN0UrmlERgmGJlq3gtZoHGxOGzmXUlZa0qcvOQDE_gPI9snn0-dbM_J7q_JjSZBQxo1A0LLULKRolASRJezvu5lXCcPIaHFsEos_IFTO9QsesZul5Vn34bQnTyjOQ3S9_FjNdW9OXdGSlaiDqmkbm9inFEIIU_mQq2_svOPR1YkHRqI-D8aQRSTXEGxeEYnHuO1lA04ZYy8Jn57lRGHZYkLgYQR86N3DhwIWkkeAYzOIPD4YxYUEZdTxtMjuVWefMDF4xYeuU7-wTVzZqTKEj3g3JIECrQ4yRhVsIkJHU2LCs6bK-Z10NE9bPBHu03wOwNWWY-k_lElXddWNjpjf_DTXrkQf3SMW7yTMRWkGitW8imC1eXPMN-ymby0]--></g></svg></div></section></section></section></section><section class="chapter"><h2 id="pour-aller-plus-loin" data-toc="pour-aller-plus-loin">Pour aller plus loin</h2><section class="chapter"><h3 id="le-pattern-command-commande" data-toc="le-pattern-command-commande">Le Pattern Command (Commande)</h3><ul class="list _bullet" id="-vh77si_213"><li class="list__item" id="-vh77si_214"><p id="-vh77si_217"><span class="control" id="-vh77si_218">Intention :</span> Encapsuler une requ&ecirc;te en tant qu'objet, ce qui permet de param&eacute;trer les clients avec diff&eacute;rentes requ&ecirc;tes, de les mettre en file d'attente, de les journaliser et de supporter des op&eacute;rations annulables.</p></li><li class="list__item" id="-vh77si_215"><p id="-vh77si_219"><span class="control" id="-vh77si_220">Analogie :</span> Un serveur dans un restaurant prend votre commande. Il ne pr&eacute;pare pas le plat lui-m&ecirc;me. Il &eacute;crit la commande (<code class="code" id="-vh77si_221">Command</code>) sur un ticket et le passe &agrave; la cuisine (<code class="code" id="-vh77si_222">Receiver</code>). La cuisine sait comment ex&eacute;cuter cette commande.</p></li><li class="list__item" id="-vh77si_216"><p id="-vh77si_223"><span class="control" id="-vh77si_224">Cas d'utilisation :</span> Tr&egrave;s utile pour impl&eacute;menter des fonctionnalit&eacute;s d' <span class="control" id="-vh77si_225">Annuler/R&eacute;tablir (Undo/Redo)</span>, des files de t&acirc;ches (task queues), ou des transactions. <code class="code" id="-vh77si_226">java.lang.Runnable</code> est une forme simple du pattern Command.</p></li></ul></section><section class="chapter"><h3 id="le-pattern-state-tat" data-toc="le-pattern-state-tat">Le Pattern State (&Eacute;tat)</h3><ul class="list _bullet" id="-vh77si_227"><li class="list__item" id="-vh77si_228"><p id="-vh77si_231"><span class="control" id="-vh77si_232">Intention :</span> Permettre &agrave; un objet de modifier son comportement lorsque son &eacute;tat interne change. L'objet donne l' impression de changer de classe.</p></li><li class="list__item" id="-vh77si_229"><p id="-vh77si_233"><span class="control" id="-vh77si_234">Analogie :</span> Un lecteur multim&eacute;dia. Si l'&eacute;tat est &quot;En lecture&quot;, le bouton principal est &quot;Pause&quot;. Si l'&eacute;tat est &quot;En pause&quot;, le m&ecirc;me bouton devient &quot;Lecture&quot;. Le comportement de l'objet &quot;bouton&quot; change en fonction de l'&eacute;tat de l' objet &quot;lecteur&quot;.</p></li><li class="list__item" id="-vh77si_230"><p id="-vh77si_235"><span class="control" id="-vh77si_236">Relation avec Strategy :</span> La structure peut sembler similaire (un <code class="code" id="-vh77si_237">Context</code> qui d&eacute;l&egrave;gue &agrave; un objet <code class="code" id="-vh77si_238">State</code>). La grande diff&eacute;rence est l'intention : avec Strategy, le client choisit l'algorithme. Avec State, c'est l'&eacute;tat interne du contexte (ou les &eacute;tats eux-m&ecirc;mes) qui dicte la transition vers le prochain &eacute;tat.</p></li></ul></section></section><section class="chapter"><h2 id="auto-valuation" data-toc="auto-valuation">Auto-&eacute;valuation</h2><p id="-vh77si_239">Mettez vos connaissances sur les interactions entre objets &agrave; l'&eacute;preuve !</p><aside class="prompt" data-type="warning" data-title="" id="-vh77si_240"><p>Les corrections de cette auto-&eacute;valuation se trouvent &agrave; la fin de l'ensemble du support de cours.</p></aside><p id="-vh77si_241"><span class="control" id="-vh77si_245">Questions &agrave; Choix Multiple (QCM)</span></p><ol class="list _decimal" id="-vh77si_242" type="1"><li class="list__item" id="-vh77si_246"><p id="-vh77si_250">Quel pattern est le plus adapt&eacute; pour impl&eacute;menter une fonctionnalit&eacute; &quot;Annuler&quot; (Undo) ?</p><ul class="list _bullet" id="-vh77si_251"><li class="list__item" id="-vh77si_252"><p id="-vh77si_256">a) Observer</p></li><li class="list__item" id="-vh77si_253"><p id="-vh77si_257">b) Strategy</p></li><li class="list__item" id="-vh77si_254"><p id="-vh77si_258">c) Command</p></li><li class="list__item" id="-vh77si_255"><p id="-vh77si_259">d) Template Method</p></li></ul></li><li class="list__item" id="-vh77si_247"><p id="-vh77si_260">Le pattern Template Method utilise principalement...</p><ul class="list _bullet" id="-vh77si_261"><li class="list__item" id="-vh77si_262"><p id="-vh77si_266">a) Des interfaces pour d&eacute;finir des contrats.</p></li><li class="list__item" id="-vh77si_263"><p id="-vh77si_267">b) L'h&eacute;ritage d'une classe abstraite qui d&eacute;finit le squelette d'un algorithme.</p></li><li class="list__item" id="-vh77si_264"><p id="-vh77si_268">c) La composition pour ajouter des fonctionnalit&eacute;s.</p></li><li class="list__item" id="-vh77si_265"><p id="-vh77si_269">d) La cr&eacute;ation d'un objet proxy.</p></li></ul></li><li class="list__item" id="-vh77si_248"><p id="-vh77si_270">Vous avez une classe <code class="code" id="-vh77si_272">Document</code>. Son comportement doit changer radicalement selon qu'il est en &eacute;tat &quot;Brouillon&quot;, &quot;En r&eacute;vision&quot; ou &quot;Publi&eacute;&quot;. Quel pattern mod&eacute;lise le mieux cette situation ?</p><ul class="list _bullet" id="-vh77si_271"><li class="list__item" id="-vh77si_273"><p id="-vh77si_277">a) State</p></li><li class="list__item" id="-vh77si_274"><p id="-vh77si_278">b) Strategy</p></li><li class="list__item" id="-vh77si_275"><p id="-vh77si_279">c) Observer</p></li><li class="list__item" id="-vh77si_276"><p id="-vh77si_280">d) Facade</p></li></ul></li><li class="list__item" id="-vh77si_249"><p id="-vh77si_281">Dans le pattern Observer, qui est responsable de d&eacute;clencher la notification ?</p><ul class="list _bullet" id="-vh77si_282"><li class="list__item" id="-vh77si_283"><p id="-vh77si_287">a) L'Observateur (Observer)</p></li><li class="list__item" id="-vh77si_284"><p id="-vh77si_288">b) Le Sujet (Subject)</p></li><li class="list__item" id="-vh77si_285"><p id="-vh77si_289">c) Le client qui utilise le Sujet</p></li><li class="list__item" id="-vh77si_286"><p id="-vh77si_290">d) Un service tiers</p></li></ul></li></ol><p id="-vh77si_243"><span class="control" id="-vh77si_291">Questions Ouvertes</span></p><ol class="list _decimal" id="-vh77si_244" type="1" start="5"><li class="list__item" id="-vh77si_292"><p id="-vh77si_294">Expliquez la principale diff&eacute;rence d'intention entre le pattern Strategy et le pattern Template Method, bien que tous deux traitent d'algorithmes.</p></li><li class="list__item" id="-vh77si_293"><p id="-vh77si_295">Donnez un exemple concret o&ugrave; vous utiliseriez le pattern Observer dans une application web (par exemple, un site e-commerce).</p></li></ol></section><section class="chapter"><h2 id="conclusion" data-toc="conclusion">Conclusion</h2><p id="-vh77si_296">F&eacute;licitations, vous avez atteint le sommet de la pyramide de la conception orient&eacute;e objet ! Vous savez maintenant comment orchestrer les interactions complexes au sein de votre application.</p><p id="-vh77si_297">Vous avez appris &agrave; :</p><ul class="list _bullet" id="-vh77si_298"><li class="list__item" id="-vh77si_301"><p id="-vh77si_304">Rendre vos algorithmes interchangeables avec <span class="control" id="-vh77si_305">Strategy</span>.</p></li><li class="list__item" id="-vh77si_302"><p id="-vh77si_306">Cr&eacute;er des syst&egrave;mes de notification d&eacute;coupl&eacute;s avec <span class="control" id="-vh77si_307">Observer</span>.</p></li><li class="list__item" id="-vh77si_303"><p id="-vh77si_308">D&eacute;finir des processus standardis&eacute;s tout en restant flexible avec <span class="control" id="-vh77si_309">Template Method</span>.</p></li></ul><p id="-vh77si_299">Ces patterns comportementaux sont la cl&eacute; pour cr&eacute;er des applications vivantes, r&eacute;actives et, surtout, maintenables. Ils vous permettent de g&eacute;rer la complexit&eacute; non pas en l'ajoutant, mais en la distribuant intelligemment entre des objets aux responsabilit&eacute;s claires.</p><p id="-vh77si_300">Vous avez maintenant une bo&icirc;te &agrave; outils compl&egrave;te de Design Patterns. Le dernier module vous aidera &agrave; consolider ces connaissances, &agrave; comprendre comment les patterns interagissent et &agrave; d&eacute;velopper l'intuition pour choisir le bon outil pour le bon travail.</p></section><div class="last-modified">26 juillet 2025</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="003-00-structural-patterns.html" class="navigation-links__prev">Les Patterns de Structure : L'Art d'Assembler les Objets</a><a href="005-00-good-practices.html" class="navigation-links__next">Application, Bonnes Pratiques et Anti-Patterns</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="https://resources.jetbrains.com/writerside/apidoc/6.22.0-b776/app.js"></script></body></html>