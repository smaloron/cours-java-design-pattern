<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-preset="contrast" data-primary-color="#307FFF"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="robots" content="noindex"><meta name="built-on" content="2025-07-28T16:55:43.818794"><title>Les Patterns de Cr&eacute;ation : L'Art de Fabriquer des Objets | Java-design-pattern</title><script type="application/json" id="virtual-toc-data">[{"id":"objectifs-p-dagogiques","level":0,"title":"Objectifs Pédagogiques","anchor":"#objectifs-p-dagogiques"},{"id":"introduction-l-importance-de-bien-construire","level":0,"title":"Introduction : L\u0027Importance de Bien \"Construire\"","anchor":"#introduction-l-importance-de-bien-construire"},{"id":"l-essentiel-les-incontournables-de-la-cr-ation","level":0,"title":"L\u0027essentiel : Les Incontournables de la Création","anchor":"#l-essentiel-les-incontournables-de-la-cr-ation"},{"id":"pour-aller-plus-loin","level":0,"title":"Pour aller plus loin","anchor":"#pour-aller-plus-loin"},{"id":"auto-valuation","level":0,"title":"Auto-évaluation","anchor":"#auto-valuation"},{"id":"conclusion","level":0,"title":"Conclusion","anchor":"#conclusion"}]</script><script type="application/json" id="topic-shortcuts"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.22.0-b776/app.css" rel="stylesheet"><meta name="msapplication-TileColor" content="#000000"><link rel="apple-touch-icon" sizes="180x180" href="https://jetbrains.com/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://jetbrains.com/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://jetbrains.com/favicon-16x16.png"><meta name="msapplication-TileImage" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-144x144.png"><meta name="msapplication-square70x70logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-70x70.png"><meta name="msapplication-square150x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-150x150.png"><meta name="msapplication-wide310x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x150.png"><meta name="msapplication-square310x310logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x310.png"><meta name="image" content=""><!-- Open Graph --><meta property="og:title" content="Les Patterns de Cr&eacute;ation : L'Art de Fabriquer des Objets | Java-design-pattern"><meta property="og:description" content=""><meta property="og:image" content=""><meta property="og:site_name" content="Java-design-pattern Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="writerside-documentation/002-00-creation-patterns.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content=""><meta name="twitter:title" content="Les Patterns de Cr&eacute;ation : L'Art de Fabriquer des Objets | Java-design-pattern"><meta name="twitter:description" content=""><meta name="twitter:creator" content=""><meta name="twitter:image:src" content=""><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "writerside-documentation/002-00-creation-patterns.html#webpage",
    "url": "writerside-documentation/002-00-creation-patterns.html",
    "name": "Les Patterns de Cr&eacute;ation : L'Art de Fabriquer des Objets | Java-design-pattern",
    "description": "",
    "image": "",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "writerside-documentation/#website",
    "url": "writerside-documentation/",
    "name": "Java-design-pattern Help"
}</script><!-- End Schema.org --></head><body data-id="002-00-creation-patterns" data-main-title="Les Patterns de Création : L'Art de Fabriquer des Objets" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs=""><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>Java-design-pattern  Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="002-00-creation-patterns" id="002-00-creation-patterns.md">Les Patterns de Création : L'Art de Fabriquer des Objets</h1><section class="chapter"><h2 id="objectifs-p-dagogiques" data-toc="objectifs-p-dagogiques">Objectifs P&eacute;dagogiques</h2><p id="-ge6x56_9">&Agrave; la fin de ce module, vous serez en mesure de :</p><ul class="list _bullet" id="-ge6x56_10"><li class="list__item" id="-ge6x56_11"><p id="-ge6x56_16"><span class="control" id="-ge6x56_17">Comprendre</span> l'intention et la structure des principaux patterns de cr&eacute;ation.</p></li><li class="list__item" id="-ge6x56_12"><p id="-ge6x56_18"><span class="control" id="-ge6x56_19">Impl&eacute;menter</span> en Java les patterns Singleton, Factory Method et Builder.</p></li><li class="list__item" id="-ge6x56_13"><p id="-ge6x56_20"><span class="control" id="-ge6x56_21">Choisir</span> le pattern de cr&eacute;ation le plus adapt&eacute; &agrave; un probl&egrave;me de conception donn&eacute;.</p></li><li class="list__item" id="-ge6x56_14"><p id="-ge6x56_22"><span class="control" id="-ge6x56_23">Identifier</span> les avantages et les inconv&eacute;nients de chaque pattern, notamment en termes de testabilit&eacute; et de flexibilit&eacute;.</p></li><li class="list__item" id="-ge6x56_15"><p id="-ge6x56_24"><span class="control" id="-ge6x56_25">Appliquer</span> ces patterns pour am&eacute;liorer l'architecture du projet fil rouge.</p></li></ul></section><section class="chapter"><h2 id="introduction-l-importance-de-bien-construire" data-toc="introduction-l-importance-de-bien-construire">Introduction : L'Importance de Bien &quot;Construire&quot;</h2><p id="-ge6x56_26">Quand vous construisez un objet en Java, vous utilisez le plus souvent le mot-cl&eacute; <code class="code" id="-ge6x56_29">new</code>. C'est simple, direct, et &ccedil;a fonctionne. Mais que se passe-t-il quand la cr&eacute;ation devient plus complexe ?</p><ul class="list _bullet" id="-ge6x56_27"><li class="list__item" id="-ge6x56_30"><p id="-ge6x56_33">Et si vous ne deviez avoir <span class="control" id="-ge6x56_34">qu'une seule instance</span> d'une classe dans toute votre application (comme un gestionnaire de configuration) ?</p></li><li class="list__item" id="-ge6x56_31"><p id="-ge6x56_35">Et si le <span class="control" id="-ge6x56_36">type d'objet &agrave; cr&eacute;er d&eacute;pend d'une condition</span> qui n'est connue qu'&agrave; l'ex&eacute;cution (comme choisir un exportateur CSV ou JSON) ?</p></li><li class="list__item" id="-ge6x56_32"><p id="-ge6x56_37">Et si votre objet a <span class="control" id="-ge6x56_38">tellement de param&egrave;tres</span> dans son constructeur que vous vous y perdez et que le rendre immuable devient un cauchemar ?</p></li></ul><p id="-ge6x56_28">C'est l&agrave; que les <span class="control" id="-ge6x56_39">Patterns de Cr&eacute;ation</span> entrent en jeu. Ils ne se contentent pas de cr&eacute;er des objets ; ils vous donnent le <span class="control" id="-ge6x56_40">contr&ocirc;le</span> sur le processus de cr&eacute;ation. Ils permettent de masquer la complexit&eacute;, d'am&eacute;liorer la flexibilit&eacute; et de rendre votre code beaucoup plus propre et intentionnel.</p></section><section class="chapter"><h2 id="l-essentiel-les-incontournables-de-la-cr-ation" data-toc="l-essentiel-les-incontournables-de-la-cr-ation">L'essentiel : Les Incontournables de la Cr&eacute;ation</h2><section class="chapter"><h3 id="le-pattern-singleton" data-toc="le-pattern-singleton">Le Pattern Singleton</h3><section class="chapter"><h4 id="l-intention" data-toc="l-intention">L'intention</h4><p id="-ge6x56_53"><span class="control" id="-ge6x56_55">Assurer qu'une classe n'a qu'une seule et unique instance et fournir un point d'acc&egrave;s global &agrave; cette instance.</span></p><p id="-ge6x56_54">C'est probablement le pattern le plus connu (et parfois le plus mal utilis&eacute; !). Pensez au pr&eacute;sident d'un pays : il n'y en a qu'un seul &agrave; un instant T. Si quelqu'un a besoin de s'adresser au pr&eacute;sident, il ne cr&eacute;e pas un &quot;nouveau&quot; pr&eacute;sident, il s'adresse &agrave; l'unique instance existante.</p></section><section class="chapter"><h4 id="structure-et-impl-mentation" data-toc="structure-et-impl-mentation">Structure et Impl&eacute;mentation</h4><p id="-ge6x56_56">Pour garantir l'unicit&eacute;, le pattern Singleton combine deux choses :</p><ol class="list _decimal" id="-ge6x56_57" type="1"><li class="list__item" id="-ge6x56_60"><p id="-ge6x56_62">Un <span class="control" id="-ge6x56_63">constructeur priv&eacute;</span> pour emp&ecirc;cher la cr&eacute;ation d'instances depuis l'ext&eacute;rieur (<code class="code" id="-ge6x56_64">new MySingleton()</code> sera impossible).</p></li><li class="list__item" id="-ge6x56_61"><p id="-ge6x56_65">Une <span class="control" id="-ge6x56_66">m&eacute;thode statique</span> (<code class="code" id="-ge6x56_67">getInstance()</code>) qui cr&eacute;e l'instance si elle n'existe pas, ou retourne l'instance existante sinon.</p></li></ol><section class="chapter"><h5 id="diagramme-uml" data-toc="diagramme-uml">Diagramme UML</h5><style>.theme-dark .plantuml > svg {filter: hue-rotate(180deg) invert(0.9);}div.plantuml {overflow-x: auto;}</style><div class="plantuml"><?xml version="1.0" encoding="us-ascii" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="207px" preserveAspectRatio="none" style="width:466px;height:207px;background:#FFFFFF;" version="1.1" viewBox="0 0 466 207" width="466px" zoomAndPan="magnify"><defs/><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="236" x="108.25" y="23.5352">Diagramme du Pattern Singleton</text><!--class Singleton--><g id="elem_Singleton"><rect codeLine="5" fill="#F1F1F1" height="113.9531" id="Singleton" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:0.5;" width="188" x="7" y="70.0983"/><ellipse cx="64.25" cy="86.0983" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M67.2231,91.7413 Q66.6421,92.0402 66.0029,92.1896 Q65.3638,92.339 64.6582,92.339 Q62.1514,92.339 60.8315,90.6871 Q59.5117,89.0353 59.5117,85.9142 Q59.5117,82.7848 60.8315,81.1329 Q62.1514,79.4811 64.6582,79.4811 Q65.3638,79.4811 66.0112,79.6305 Q66.6587,79.7799 67.2231,80.0787 L67.2231,82.8014 Q66.5923,82.2204 65.9988,81.9506 Q65.4053,81.6808 64.7744,81.6808 Q63.4297,81.6808 62.7449,82.7475 Q62.0601,83.8141 62.0601,85.9142 Q62.0601,88.006 62.7449,89.0726 Q63.4297,90.1393 64.7744,90.1393 Q65.4053,90.1393 65.9988,89.8695 Q66.5923,89.5997 67.2231,89.0187 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="65" x="84.75" y="91.3893">Singleton</text><line style="stroke:#181818;stroke-width:0.5;" x1="8" x2="194" y1="102.0983" y2="102.0983"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="15" y="112.8424"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" text-decoration="underline" textLength="130" x="27" y="119.6334">instance: Singleton</text><line style="stroke:#181818;stroke-width:0.5;" x1="8" x2="194" y1="126.5866" y2="126.5866"/><rect fill="#F24D5C" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="15" y="137.3307"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="75" x="27" y="144.1217">Singleton()</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="4" x="27" y="160.61">&#160;</text><ellipse cx="18" cy="173.3073" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" text-decoration="underline" textLength="162" x="27" y="177.0983">getInstance(): Singleton</text></g><path d="M230.5,43.4883 L230.5,59.7988 L157,114.3424 L230.5,67.7988 L230.5,84.1094 A0,0 0 0 0 230.5,84.1094 L459.5,84.1094 A0,0 0 0 0 459.5,84.1094 L459.5,53.4883 L449.5,43.4883 L230.5,43.4883 A0,0 0 0 0 230.5,43.4883 " fill="#7FFFD4" style="stroke:#454645;stroke-width:1.5;"/><path d="M449.5,43.4883 L449.5,53.4883 L459.5,53.4883 L449.5,43.4883 " fill="#7FFFD4" style="stroke:#454645;stroke-width:1.5;"/><text fill="#454645" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="191" x="236.5" y="61.0566">L'unique instance de la classe,</text><text fill="#454645" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="208" x="236.5" y="76.3672">stock&#233;e dans un champ statique.</text><path d="M230.5,94.1094 L230.5,118.0752 L102,138.8307 L230.5,126.0752 L230.5,150.041 A0,0 0 0 0 230.5,150.041 L426.5,150.041 A0,0 0 0 0 426.5,150.041 L426.5,104.1094 L416.5,94.1094 L230.5,94.1094 A0,0 0 0 0 230.5,94.1094 " fill="#7FFFD4" style="stroke:#454645;stroke-width:1.5;"/><path d="M416.5,94.1094 L416.5,104.1094 L426.5,104.1094 L416.5,94.1094 " fill="#7FFFD4" style="stroke:#454645;stroke-width:1.5;"/><text fill="#454645" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="160" x="236.5" y="111.6777">Le constructeur est priv&#233;,</text><text fill="#454645" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="175" x="236.5" y="126.9883">personne ne peut instancier</text><text fill="#454645" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="171" x="236.5" y="142.2988">la classe depuis l'ext&#233;rieur.</text><path d="M230.5,160.041 L230.5,176.3516 L189,171.8073 L230.5,184.3516 L230.5,200.6621 A0,0 0 0 0 230.5,200.6621 L450.5,200.6621 A0,0 0 0 0 450.5,200.6621 L450.5,170.041 L440.5,160.041 L230.5,160.041 A0,0 0 0 0 230.5,160.041 " fill="#7FFFD4" style="stroke:#454645;stroke-width:1.5;"/><path d="M440.5,160.041 L440.5,170.041 L450.5,170.041 L440.5,160.041 " fill="#7FFFD4" style="stroke:#454645;stroke-width:1.5;"/><text fill="#454645" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="199" x="236.5" y="177.6094">La m&#233;thode statique qui fournit</text><text fill="#454645" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="168" x="236.5" y="192.9199">l'acc&#232;s &#224; l'instance unique.</text><!--SRC=[ZP11JiCm44NtSuhFAgreEK3NR92wGE84nfqc8v9nQeyhfAftOKdEaOjX2csoGaXUZBxz_VxyEskuOnpbDJerCh6MyIYkZguh-YxZsPbnLBo8rYrRK2BVkfGc0IUYDKx9d8a_GxHCwdapiwodUR4akfzUrsnFluR5Scu1paGQZ16bRWnXFrrkDbS8RQkiSiXymsB7Q1qk6Nb5oO9_6uSYEqt82j-uhiS5NsmFnBh3D-OFs3pxbk53GSNiZNC49qCVvJWEA-evfg3AAAVdRDTCmf5kaKg-Faj2M_6xZKEKyik_KioQegr3DmxMXBBiTHKSic0VSbGnQYld_VYPC7uKqgsRdwuct1S0]--></g></svg></div></section><section class="chapter"><h5 id="exemple-un-gestionnaire-de-configuration" data-toc="exemple-un-gestionnaire-de-configuration">Exemple : Un gestionnaire de configuration</h5><p id="-ge6x56_69">Imaginons une classe qui charge un fichier de configuration une seule fois et le met &agrave; disposition de toute l'application.</p><div class="code-block" data-lang="java">
package fr.formation.spring.app.singleton;

import java.util.Properties;

// Un gestionnaire de configuration implémentant le pattern Singleton.
public class AppConfig {

    // 1. L'unique instance, déclarée private et static.
    // L'attribut 'volatile' garantit que les changements sur cette variable
    // sont visibles par tous les threads.
    private static volatile AppConfig instance;

    private Properties properties;

    // 2. Le constructeur est privé.
    private AppConfig() {
        // Simule le chargement d'un fichier de configuration.
        // Dans une vraie app, on lirait un fichier .properties ici.
        this.properties = new Properties();
        this.properties.setProperty(&quot;app.version&quot;, &quot;1.0.0&quot;);
        this.properties.setProperty(&quot;database.url&quot;, &quot;jdbc:h2:mem:librarydb&quot;);
        System.out.println(&quot;Instance de AppConfig créée et configurée.&quot;);
    }

    // 3. La méthode statique pour obtenir l'instance.
    public static AppConfig getInstance() {
        // Double-Checked Locking pour la performance en environnement multi-threadé.
        if (instance == null) {
            synchronized (AppConfig.class) {
                if (instance == null) {
                    instance = new AppConfig();
                }
            }
        }
        return instance;
    }

    public String getProperty(String key) {
        return this.properties.getProperty(key);
    }
}
</div><aside class="prompt" data-type="tip" data-title="" id="-ge6x56_71"><p>**Qu'est-ce que le &quot;Double-Checked Locking&quot; ?** C'est une optimisation pour les singletons en environnement multi-thread&eacute;. 1. Le premier `if (instance == null)` est rapide et &eacute;vite d'entrer dans le bloc `synchronized` (qui est co&ucirc;teux) si l'instance existe d&eacute;j&agrave;. 2. Le bloc `synchronized` garantit qu'un seul thread peut cr&eacute;er l'instance. 3. Le deuxi&egrave;me `if (instance == null)` est crucial. Si deux threads passent le premier `if` en m&ecirc;me temps, le premier entrera dans le bloc `synchronized` et cr&eacute;era l'instance. Quand le second thread entrera &agrave; son tour, ce deuxi&egrave;me `if` l'emp&ecirc;chera de cr&eacute;er une nouvelle instance.</p></aside></section></section><section class="chapter"><h4 id="cas-d-utilisation-et-bonnes-pratiques" data-toc="cas-d-utilisation-et-bonnes-pratiques">Cas d'utilisation et Bonnes Pratiques</h4><ul class="list _bullet" id="-ge6x56_72"><li class="list__item" id="-ge6x56_74"><p id="-ge6x56_76"><span class="control" id="-ge6x56_77">&Agrave; utiliser pour :</span> Des services transversaux qui doivent &ecirc;tre uniques par nature : gestionnaires de logs, pools de connexions, caches, gestionnaires de configuration.</p></li><li class="list__item" id="-ge6x56_75"><p id="-ge6x56_78"><span class="control" id="-ge6x56_79">Attention :</span> Le Singleton est souvent critiqu&eacute; car il introduit un <span class="control" id="-ge6x56_80">&eacute;tat global</span> dans l'application, ce qui peut rendre les tests unitaires difficiles. Il cr&eacute;e une d&eacute;pendance forte (couplage) entre le client et la classe du singleton.</p></li></ul><aside class="prompt" data-type="warning" data-title="Singleton et Spring" id="-ge6x56_73"><p>Dans un &eacute;cosyst&egrave;me comme Spring, le framework g&egrave;re lui-m&ecirc;me le cycle de vie des beans. Par d&eacute;faut, **tous les beans Spring sont des Singletons** (au sein du conteneur Spring). Vous n'avez donc g&eacute;n&eacute;ralement pas besoin d'impl&eacute;menter ce pattern manuellement. Il suffit de d&eacute;clarer votre classe comme un `@Component` (ou `@Service`, `@Repository`) et de l'injecter l&agrave; o&ugrave; vous en avez besoin. C'est le principe de l'**Inversion de Contr&ocirc;le (IoC)**, qui est souvent une meilleure alternative au Singleton manuel.</p></aside></section></section><section class="chapter"><h3 id="exercice-2-votre-premier-singleton" data-toc="exercice-2-votre-premier-singleton">Exercice 2 : Votre premier Singleton</h3><p id="-ge6x56_81">Cr&eacute;ez une classe <code class="code" id="-ge6x56_84">LoggerService</code> qui suit le pattern Singleton. Cette classe doit permettre d'&eacute;crire des messages de log dans la console, en pr&eacute;fixant chaque message par un timestamp.</p><p id="-ge6x56_82"><span class="control" id="-ge6x56_85">Cahier des charges :</span></p><ol class="list _decimal" id="-ge6x56_83" type="1"><li class="list__item" id="-ge6x56_86"><p id="-ge6x56_89">La classe <code class="code" id="-ge6x56_90">LoggerService</code> doit &ecirc;tre un Singleton.</p></li><li class="list__item" id="-ge6x56_87"><p id="-ge6x56_91">Elle doit avoir une m&eacute;thode <code class="code" id="-ge6x56_92">log(String message)</code> qui affiche <code class="code" id="-ge6x56_93">[YYYY-MM-DDTHH:mm:ss.sss] message</code> dans la console.</p></li><li class="list__item" id="-ge6x56_88"><p id="-ge6x56_94">Cr&eacute;ez une classe <code class="code" id="-ge6x56_95">Main</code> pour tester que vous obtenez bien la m&ecirc;me instance &agrave; chaque appel de <code class="code" id="-ge6x56_96">getInstance()</code>.</p></li></ol></section><section class="chapter"><h3 id="correction-exercice-2-collapsible-true" data-toc="correction-exercice-2-collapsible-true">Correction exercice 2 {collapsible='true''}</h3><p id="-ge6x56_97">Voici une solution possible pour l'exercice.</p><section class="chapter"><h4 id="loggerservice-java" data-toc="loggerservice-java">LoggerService.java</h4><div class="code-block" data-lang="java">
package fr.formation.spring.app.singleton;

import java.time.LocalDateTime;
import java.time.format.DateTimeFormatter;

public class LoggerService {

    private static volatile LoggerService instance;
    private final DateTimeFormatter formatter =
            DateTimeFormatter.ISO_LOCAL_DATE_TIME;

    private LoggerService() {
        // Constructeur privé pour empêcher l'instanciation directe.
    }

    public static LoggerService getInstance() {
        if (instance == null) {
            synchronized (LoggerService.class) {
                if (instance == null) {
                    instance = new LoggerService();
                }
            }
        }
        return instance;
    }

    public void log(String message) {
        String timestamp = LocalDateTime.now().format(formatter);
        System.out.println(&quot;[&quot; + timestamp + &quot;] &quot; + message);
    }
}
</div></section><section class="chapter"><h4 id="testlogger-java" data-toc="testlogger-java">TestLogger.java</h4><div class="code-block" data-lang="java">
package fr.formation.spring.app.singleton;

public class TestLogger {
    public static void main(String[] args) {
        System.out.println(&quot;Démarrage du test du LoggerService...&quot;);

        // On récupère deux &quot;instances&quot; du logger
        LoggerService logger1 = LoggerService.getInstance();
        LoggerService logger2 = LoggerService.getInstance();

        // On vérifie si les deux variables pointent vers le même objet en mémoire
        if (logger1 == logger2) {
            System.out.println(&quot;logger1 et logger2 sont la même instance. Singleton OK !&quot;);
        } else {
            System.out.println(&quot;ERREUR : logger1 et logger2 sont des instances différentes.&quot;);
        }

        // On utilise le logger
        logger1.log(&quot;Ceci est le premier message.&quot;);
        logger2.log(&quot;Ceci est le deuxième message, via la seconde variable.&quot;);
    }
}
</div><p id="-ge6x56_102"><span class="control" id="-ge6x56_105">R&eacute;sultat attendu dans la console :</span></p><div class="code-block" data-lang="none">
Démarrage du test du LoggerService...
logger1 et logger2 sont la même instance. Singleton OK !
[2023-11-27T10:30:00.123] Ceci est le premier message.
[2023-11-27T10:30:00.124] Ceci est le deuxième message, via la seconde variable.
</div></section></section><section class="chapter"><h3 id="le-pattern-factory-method-fabrique" data-toc="le-pattern-factory-method-fabrique">Le Pattern Factory Method (Fabrique)</h3><section class="chapter"><h4 id="l-intention_2" data-toc="l-intention_2">L'intention</h4><p id="-ge6x56_108"><span class="control" id="-ge6x56_110">D&eacute;finir une interface pour cr&eacute;er un objet, mais laisser les sous-classes d&eacute;cider de la classe &agrave; instancier.</span> La Factory Method permet &agrave; une classe de d&eacute;l&eacute;guer l'instanciation &agrave; ses sous-classes.</p><p id="-ge6x56_109">Imaginez une usine de logistique. Le manager de l'usine (<code class="code" id="-ge6x56_111">Creator</code>) sait qu'il doit &quot;cr&eacute;er un moyen de transport&quot;, mais il ne sait pas lequel. C'est la commande du client qui va d&eacute;terminer s'il faut cr&eacute;er un camion (<code class="code" id="-ge6x56_112">ConcreteProduct1</code>) ou un bateau (<code class="code" id="-ge6x56_113">ConcreteProduct2</code>). Le choix est d&eacute;l&eacute;gu&eacute; &agrave; des d&eacute;partements sp&eacute;cialis&eacute;s (<code class="code" id="-ge6x56_114">ConcreteCreator</code>s).</p></section><section class="chapter"><h4 id="structure-et-impl-mentation_2" data-toc="structure-et-impl-mentation_2">Structure et Impl&eacute;mentation</h4><section class="chapter"><h5 id="diagramme-uml_2" data-toc="diagramme-uml_2">Diagramme UML</h5><style>.theme-dark .plantuml > svg {filter: hue-rotate(180deg) invert(0.9);}div.plantuml {overflow-x: auto;}</style><div class="plantuml"><?xml version="1.0" encoding="us-ascii" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="399px" preserveAspectRatio="none" style="width:725px;height:399px;background:#FFFFFF;" version="1.1" viewBox="0 0 725 399" width="725px" zoomAndPan="magnify"><defs/><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="279" x="216" y="23.5352">Diagramme du Pattern Factory Method</text><!--class Product--><g id="elem_Product"><rect codeLine="5" fill="#F1F1F1" height="64.4883" id="Product" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:0.5;" width="140" x="238" y="186.4583"/><ellipse cx="277.75" cy="202.4583" fill="#B4A7E5" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M273.6777,198.2234 L273.6777,196.0652 L281.0571,196.0652 L281.0571,198.2234 L278.5918,198.2234 L278.5918,206.3001 L281.0571,206.3001 L281.0571,208.4583 L273.6777,208.4583 L273.6777,206.3001 L276.1431,206.3001 L276.1431,198.2234 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="53" x="297.25" y="207.7493">Product</text><line style="stroke:#181818;stroke-width:0.5;" x1="239" x2="377" y1="218.4583" y2="218.4583"/><line style="stroke:#181818;stroke-width:0.5;" x1="239" x2="377" y1="226.4583" y2="226.4583"/><ellipse cx="249" cy="240.2024" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="114" x="258" y="243.9934">operation(): void</text></g><!--class ConcreteProductA--><g id="elem_ConcreteProductA"><rect codeLine="10" fill="#F1F1F1" height="64.4883" id="ConcreteProductA" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:0.5;" width="157" x="96.5" y="327.9483"/><ellipse cx="111.5" cy="343.9483" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M114.4731,349.5913 Q113.8921,349.8902 113.2529,350.0396 Q112.6138,350.189 111.9082,350.189 Q109.4014,350.189 108.0815,348.5371 Q106.7617,346.8853 106.7617,343.7642 Q106.7617,340.6348 108.0815,338.9829 Q109.4014,337.3311 111.9082,337.3311 Q112.6138,337.3311 113.2612,337.4805 Q113.9087,337.6299 114.4731,337.9288 L114.4731,340.6514 Q113.8423,340.0704 113.2488,339.8006 Q112.6553,339.5308 112.0244,339.5308 Q110.6797,339.5308 109.9949,340.5975 Q109.3101,341.6641 109.3101,343.7642 Q109.3101,345.856 109.9949,346.9226 Q110.6797,347.9893 112.0244,347.9893 Q112.6553,347.9893 113.2488,347.7195 Q113.8423,347.4497 114.4731,346.8687 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="125" x="125.5" y="349.2393">ConcreteProductA</text><line style="stroke:#181818;stroke-width:0.5;" x1="97.5" x2="252.5" y1="359.9483" y2="359.9483"/><line style="stroke:#181818;stroke-width:0.5;" x1="97.5" x2="252.5" y1="367.9483" y2="367.9483"/><ellipse cx="107.5" cy="381.6924" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="114" x="116.5" y="385.4834">operation(): void</text></g><!--class ConcreteProductB--><g id="elem_ConcreteProductB"><rect codeLine="15" fill="#F1F1F1" height="64.4883" id="ConcreteProductB" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:0.5;" width="155" x="319.5" y="327.9483"/><ellipse cx="334.5" cy="343.9483" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M337.4731,349.5913 Q336.8921,349.8902 336.2529,350.0396 Q335.6138,350.189 334.9082,350.189 Q332.4014,350.189 331.0815,348.5371 Q329.7617,346.8853 329.7617,343.7642 Q329.7617,340.6348 331.0815,338.9829 Q332.4014,337.3311 334.9082,337.3311 Q335.6138,337.3311 336.2612,337.4805 Q336.9087,337.6299 337.4731,337.9288 L337.4731,340.6514 Q336.8423,340.0704 336.2488,339.8006 Q335.6553,339.5308 335.0244,339.5308 Q333.6797,339.5308 332.9949,340.5975 Q332.3101,341.6641 332.3101,343.7642 Q332.3101,345.856 332.9949,346.9226 Q333.6797,347.9893 335.0244,347.9893 Q335.6553,347.9893 336.2488,347.7195 Q336.8423,347.4497 337.4731,346.8687 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="123" x="348.5" y="349.2393">ConcreteProductB</text><line style="stroke:#181818;stroke-width:0.5;" x1="320.5" x2="473.5" y1="359.9483" y2="359.9483"/><line style="stroke:#181818;stroke-width:0.5;" x1="320.5" x2="473.5" y1="367.9483" y2="367.9483"/><ellipse cx="330.5" cy="381.6924" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="114" x="339.5" y="385.4834">operation(): void</text></g><!--class Creator--><g id="elem_Creator"><rect codeLine="20" fill="#F1F1F1" height="80.9766" id="Creator" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:0.5;" width="196" x="255" y="44.4883"/><ellipse cx="322.75" cy="60.4883" fill="#A9DCDF" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M322.8633,55.8364 L321.7095,60.9082 L324.0254,60.9082 Z M321.3691,53.5952 L324.3657,53.5952 L327.7109,65.9883 L325.2622,65.9883 L324.4985,62.9253 L321.2197,62.9253 L320.4727,65.9883 L318.0239,65.9883 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="52" x="343.25" y="65.7793">Creator</text><line style="stroke:#181818;stroke-width:0.5;" x1="256" x2="450" y1="76.4883" y2="76.4883"/><line style="stroke:#181818;stroke-width:0.5;" x1="256" x2="450" y1="84.4883" y2="84.4883"/><ellipse cx="266" cy="98.2324" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="170" x="275" y="102.0234">factoryMethod(): Product</text><ellipse cx="266" cy="114.7207" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="153" x="275" y="118.5117">someOperation(): void</text></g><path d="M486,52.0083 L486,75.9741 L445,96.7324 L486,83.9741 L486,107.9399 A0,0 0 0 0 486,107.9399 L718,107.9399 A0,0 0 0 0 718,107.9399 L718,62.0083 L708,52.0083 L486,52.0083 A0,0 0 0 0 486,52.0083 " fill="#7FFFD4" style="stroke:#454645;stroke-width:1.5;"/><path d="M708,52.0083 L708,62.0083 L718,62.0083 L708,52.0083 " fill="#7FFFD4" style="stroke:#454645;stroke-width:1.5;"/><text fill="#454645" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="152" x="492" y="69.5766">La m&#233;thode de fabrique.</text><text fill="#454645" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="178" x="492" y="84.8872">Elle est abstraite pour forcer</text><text fill="#454645" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="211" x="492" y="100.1977">les sous-classes &#224; l'impl&#233;menter.</text><!--class ConcreteCreatorA--><g id="elem_ConcreteCreatorA"><rect codeLine="32" fill="#F1F1F1" height="64.4883" id="ConcreteCreatorA" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:0.5;" width="196" x="7" y="186.4583"/><ellipse cx="40" cy="202.4583" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M42.9731,208.1013 Q42.3921,208.4002 41.7529,208.5496 Q41.1138,208.699 40.4082,208.699 Q37.9014,208.699 36.5815,207.0471 Q35.2617,205.3953 35.2617,202.2742 Q35.2617,199.1448 36.5815,197.4929 Q37.9014,195.8411 40.4082,195.8411 Q41.1138,195.8411 41.7612,195.9905 Q42.4087,196.1399 42.9731,196.4388 L42.9731,199.1614 Q42.3423,198.5804 41.7488,198.3106 Q41.1553,198.0408 40.5244,198.0408 Q39.1797,198.0408 38.4949,199.1075 Q37.8101,200.1741 37.8101,202.2742 Q37.8101,204.366 38.4949,205.4326 Q39.1797,206.4993 40.5244,206.4993 Q41.1553,206.4993 41.7488,206.2295 Q42.3423,205.9597 42.9731,205.3787 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="124" x="58" y="207.7493">ConcreteCreatorA</text><line style="stroke:#181818;stroke-width:0.5;" x1="8" x2="202" y1="218.4583" y2="218.4583"/><line style="stroke:#181818;stroke-width:0.5;" x1="8" x2="202" y1="226.4583" y2="226.4583"/><ellipse cx="18" cy="240.2024" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="170" x="27" y="243.9934">factoryMethod(): Product</text></g><!--class ConcreteCreatorB--><g id="elem_ConcreteCreatorB"><rect codeLine="37" fill="#F1F1F1" height="64.4883" id="ConcreteCreatorB" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:0.5;" width="196" x="413" y="186.4583"/><ellipse cx="446.9" cy="202.4583" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M449.8731,208.1013 Q449.2921,208.4002 448.6529,208.5496 Q448.0138,208.699 447.3082,208.699 Q444.8014,208.699 443.4815,207.0471 Q442.1617,205.3953 442.1617,202.2742 Q442.1617,199.1448 443.4815,197.4929 Q444.8014,195.8411 447.3082,195.8411 Q448.0138,195.8411 448.6612,195.9905 Q449.3087,196.1399 449.8731,196.4388 L449.8731,199.1614 Q449.2423,198.5804 448.6488,198.3106 Q448.0553,198.0408 447.4244,198.0408 Q446.0797,198.0408 445.3949,199.1075 Q444.7101,200.1741 444.7101,202.2742 Q444.7101,204.366 445.3949,205.4326 Q446.0797,206.4993 447.4244,206.4993 Q448.0553,206.4993 448.6488,206.2295 Q449.2423,205.9597 449.8731,205.3787 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="122" x="465.1" y="207.7493">ConcreteCreatorB</text><line style="stroke:#181818;stroke-width:0.5;" x1="414" x2="608" y1="218.4583" y2="218.4583"/><line style="stroke:#181818;stroke-width:0.5;" x1="414" x2="608" y1="226.4583" y2="226.4583"/><ellipse cx="424" cy="240.2024" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="170" x="433" y="243.9934">factoryMethod(): Product</text></g><!--class Client--><g id="elem_Client"><rect fill="#F1F1F1" height="48" id="Client" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:0.5;" width="72" x="108" y="60.9783"/><ellipse cx="123" cy="76.9783" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M125.9731,82.6213 Q125.3921,82.9202 124.7529,83.0696 Q124.1138,83.219 123.4082,83.219 Q120.9014,83.219 119.5815,81.5671 Q118.2617,79.9153 118.2617,76.7942 Q118.2617,73.6648 119.5815,72.0129 Q120.9014,70.3611 123.4082,70.3611 Q124.1138,70.3611 124.7612,70.5105 Q125.4087,70.6599 125.9731,70.9588 L125.9731,73.6814 Q125.3423,73.1004 124.7488,72.8306 Q124.1553,72.5608 123.5244,72.5608 Q122.1797,72.5608 121.4949,73.6275 Q120.8101,74.6941 120.8101,76.7942 Q120.8101,78.886 121.4949,79.9526 Q122.1797,81.0193 123.5244,81.0193 Q124.1553,81.0193 124.7488,80.7495 Q125.3423,80.4797 125.9731,79.8987 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="40" x="137" y="82.2693">Client</text><line style="stroke:#181818;stroke-width:0.5;" x1="109" x2="179" y1="92.9783" y2="92.9783"/><line style="stroke:#181818;stroke-width:0.5;" x1="109" x2="179" y1="100.9783" y2="100.9783"/></g><!--reverse link Product to ConcreteProductA--><g id="link_Product_ConcreteProductA"><path d="M265.3981,264.385 C243.6281,287.215 226.8,304.8683 205.06,327.6683 " fill="none" id="Product-backto-ConcreteProductA" style="stroke:#454645;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="none" points="277.82,251.3583,261.0558,260.2444,269.7403,268.5257,277.82,251.3583" style="stroke:#454645;stroke-width:1.0;"/></g><!--reverse link Product to ConcreteProductB--><g id="link_Product_ConcreteProductB"><path d="M337.8788,266.5346 C352.4388,289.3646 362.34,304.8683 376.88,327.6683 " fill="none" id="Product-backto-ConcreteProductB" style="stroke:#454645;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="none" points="328.2,251.3583,332.82,269.7609,342.9376,263.3083,328.2,251.3583" style="stroke:#454645;stroke-width:1.0;"/></g><!--reverse link Creator to ConcreteCreatorA--><g id="link_Creator_ConcreteCreatorA"><path d="M262.0228,134.3009 C225.6628,153.6109 198.53,168.0283 164.49,186.1083 " fill="none" id="Creator-backto-ConcreteCreatorA" style="stroke:#454645;stroke-width:1.0;"/><polygon fill="none" points="277.92,125.8583,259.2086,129.0019,264.837,139.6,277.92,125.8583" style="stroke:#454645;stroke-width:1.0;"/></g><!--reverse link Creator to ConcreteCreatorB--><g id="link_Creator_ConcreteCreatorB"><path d="M414.655,137.3851 C437.815,156.6951 451.41,168.0283 473.1,186.1083 " fill="none" id="Creator-backto-ConcreteCreatorB" style="stroke:#454645;stroke-width:1.0;"/><polygon fill="none" points="400.83,125.8583,410.8128,141.9935,418.4973,132.7768,400.83,125.8583" style="stroke:#454645;stroke-width:1.0;"/></g><!--link ConcreteCreatorA to ConcreteProductA--><g id="link_ConcreteCreatorA_ConcreteProductA"><path codeLine="42" d="M120.88,251.3583 C132.34,274.1883 145.0492,299.5055 156.4892,322.3055 " fill="none" id="ConcreteCreatorA-to-ConcreteProductA" style="stroke:#454645;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="#454645" points="159.18,327.6683,158.719,317.8302,156.9377,323.1993,151.5686,321.418,159.18,327.6683" style="stroke:#454645;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="26" x="145.19" y="294.5166">cr&#233;e</text></g><!--link ConcreteCreatorB to ConcreteProductB--><g id="link_ConcreteCreatorB_ConcreteProductB"><path codeLine="43" d="M485.13,251.3583 C466.47,274.1883 445.1964,300.2221 426.5664,323.0221 " fill="none" id="ConcreteCreatorB-to-ConcreteProductB" style="stroke:#454645;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="#454645" points="422.77,327.6683,431.5621,323.2299,425.9337,323.7965,425.3672,318.168,422.77,327.6683" style="stroke:#454645;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="26" x="461.83" y="294.5166">cr&#233;e</text></g><!--link Client to Creator--><g id="link_Client_Creator"><path codeLine="45" d="M180.41,84.9783 C201.11,84.9783 222.12,84.9783 248.61,84.9783 " fill="none" id="Client-to-Creator" style="stroke:#454645;stroke-width:1.0;"/><polygon fill="#454645" points="254.61,84.9783,245.61,80.9783,249.61,84.9783,245.61,88.9783,254.61,84.9783" style="stroke:#454645;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="39" x="198" y="78.5466">utilise</text></g><!--SRC=[dP9DJiCm48NtSugX6q2eEK0MbTe2An2zWkjCMakE7SQJ2bJrBcnxZboC2KahqPO5tVbdvfltddqZQwe8Dsx99WY84qyuUdHcnQRIYwB1XH4X3lXih4J-n5UITIn602xeUMaiuO9ZqLZ1BS03nfhOY8lXxZx7JNG58Eu0h3SfuJm6ooGqT4pHLRLN1K7IzPJPVobccOJL3Wuu9gFM-fRjuNA7PU-uDzmH1hPMfLZHssLuY4B8RhKMZEM1dUU_OF1Yi6httL8p9fsqPFVUK0PFNX-0ac0lmochZWrZ6TaIWwUaiviq_b6kc_OB_Mrdlzrt_eape51W9-8qhK7A5Eb3jER4zvzcB-G-DCwk8PsfoRB9-RV8qNAx9pYRUA5wTgo6kNSQ0eudHqKvDkAyImJV]--></g></svg></div></section><section class="chapter"><h5 id="exemple-un-syst-me-d-export-de-donn-es" data-toc="exemple-un-syst-me-d-export-de-donn-es">Exemple : Un syst&egrave;me d'export de donn&eacute;es</h5><p id="-ge6x56_118">Dans notre application de biblioth&egrave;que, nous voulons pouvoir exporter la liste des livres en diff&eacute;rents formats (CSV, JSON).</p><ol class="list _decimal" id="-ge6x56_119" type="1"><li class="list__item" id="-ge6x56_127"><p id="-ge6x56_128"><span class="control" id="-ge6x56_129">Le Produit (Product)</span>: Une interface commune pour tous les exportateurs.</p></li></ol><div class="code-block" data-lang="java">
package fr.formation.spring.app.factory;

// Interface &quot;Product&quot;
public interface DataExporter {
    String export(Object data);
}
</div><ol class="list _decimal" id="-ge6x56_121" type="1" start="2"><li class="list__item" id="-ge6x56_130"><p id="-ge6x56_131"><span class="control" id="-ge6x56_132">Les Produits Concrets (ConcreteProduct)</span>: Les impl&eacute;mentations pour chaque format.</p></li></ol><div class="code-block" data-lang="java">
package fr.formation.spring.app.factory;

// ConcreteProduct A
public class CsvExporter implements DataExporter {
    @Override
    public String export(Object data) {
        System.out.println(&quot;Exportation des données au format CSV...&quot;);
        // Logique de conversion de l'objet data en chaîne CSV.
        return &quot;id,title\n1,Dune\n2,LOTR&quot;;
    }
}
</div><div class="code-block" data-lang="java">
package fr.formation.spring.app.factory;

// ConcreteProduct B
public class JsonExporter implements DataExporter {
    @Override
    public String export(Object data) {
        System.out.println(&quot;Exportation des données au format JSON...&quot;);
        // Logique de conversion (ex: avec Jackson/Gson).
        return &quot;[{\&quot;id\&quot;:1, \&quot;title\&quot;:\&quot;Dune\&quot;}, {\&quot;id\&quot;:2, \&quot;title\&quot;:\&quot;LOTR\&quot;}]&quot;;
    }
}
</div><ol class="list _decimal" id="-ge6x56_124" type="1" start="3"><li class="list__item" id="-ge6x56_133"><p id="-ge6x56_134"><span class="control" id="-ge6x56_135">La Fabrique (Creator)</span>: Une classe qui fournit l'exportateur demand&eacute;. Ici, nous utilisons une version simplifi&eacute;e et tr&egrave;s courante o&ugrave; la fabrique n'est pas abstraite, mais a une m&eacute;thode qui prend un param&egrave;tre pour d&eacute;cider quoi cr&eacute;er.</p></li></ol><div class="code-block" data-lang="java">
package fr.formation.spring.app.factory;

public class ExporterFactory {

    // La &quot;Factory Method&quot;
    public static DataExporter createExporter(String format) {
        if (&quot;CSV&quot;.equalsIgnoreCase(format)) {
            return new CsvExporter();
        } else if (&quot;JSON&quot;.equalsIgnoreCase(format)) {
            return new JsonExporter();
        } else {
            throw new IllegalArgumentException(&quot;Format non supporté : &quot; + format);
        }
    }
}
</div><aside class="prompt" data-type="tip" data-title="" id="-ge6x56_126"><p>L'avantage principal est le **d&eacute;couplage**. Le code qui a besoin d'un exportateur (le client) n'a plus besoin de conna&icirc;tre les classes concr&egrave;tes `CsvExporter` ou `JsonExporter`. Il ne conna&icirc;t que l'interface `DataExporter` et la fabrique `ExporterFactory`. Si demain on ajoute un `XmlExporter`, le code client n'a pas besoin d'&ecirc;tre modifi&eacute; ! C'est une parfaite illustration du **Principe Ouvert/Ferm&eacute;**.</p></aside></section></section></section><section class="chapter"><h3 id="exercice-3-mettre-en-place-une-fabrique-de-notifications" data-toc="exercice-3-mettre-en-place-une-fabrique-de-notifications">Exercice 3 : Mettre en place une fabrique de notifications</h3><p id="-ge6x56_136">Reprenons le mauvais exemple du premier chapitre ! Votre mission est de le refactoriser en utilisant le pattern Factory Method.</p><p id="-ge6x56_137"><span class="control" id="-ge6x56_139">Cahier des charges :</span></p><ol class="list _decimal" id="-ge6x56_138" type="1"><li class="list__item" id="-ge6x56_140"><p id="-ge6x56_144">Cr&eacute;ez une interface <code class="code" id="-ge6x56_145">Notifier</code> avec une m&eacute;thode <code class="code" id="-ge6x56_146">send(String userId, String message)</code>.</p></li><li class="list__item" id="-ge6x56_141"><p id="-ge6x56_147">Cr&eacute;ez trois classes qui impl&eacute;mentent cette interface : <code class="code" id="-ge6x56_148">EmailNotifier</code>, <code class="code" id="-ge6x56_149">SmsNotifier</code>, et <code class="code" id="-ge6x56_150">PushNotifier</code>.</p></li><li class="list__item" id="-ge6x56_142"><p id="-ge6x56_151">Cr&eacute;ez une classe <code class="code" id="-ge6x56_152">NotifierFactory</code> avec une m&eacute;thode statique <code class="code" id="-ge6x56_153">getNotifier(String type)</code> qui retourne l'instance appropri&eacute;e du notificateur.</p></li><li class="list__item" id="-ge6x56_143"><p id="-ge6x56_154">Modifiez le service <code class="code" id="-ge6x56_155">NotificationService</code> pour qu'il utilise cette fabrique au lieu de sa structure <code class="code" id="-ge6x56_156">if-else</code>.</p></li></ol></section><section class="chapter"><h3 id="correction-exercice-3-collapsible-true" data-toc="correction-exercice-3-collapsible-true">Correction exercice 3 {collapsible='true''}</h3><p id="-ge6x56_157">Excellent ! Voici comment le code devient propre et extensible.</p><section class="chapter"><h4 id="1-l-interface-notifier" data-toc="1-l-interface-notifier">1. L'interface <code class="code" id="-ge6x56_164">Notifier</code></h4><div class="code-block" data-lang="java">
package fr.formation.spring.app.notifications.factory;

public interface Notifier {
    void send(String userId, String message);
}
</div></section><section class="chapter"><h4 id="2-les-impl-mentations-concr-tes" data-toc="2-les-impl-mentations-concr-tes">2. Les impl&eacute;mentations concr&egrave;tes</h4><div class="code-block" data-lang="java">
package fr.formation.spring.app.notifications.factory;

public class EmailNotifier implements Notifier {
    @Override
    public void send(String userId, String message) {
        System.out.println(&quot;--- ENVOI EMAIL ---&quot;);
        System.out.println(&quot;À: &quot; + userId + &quot;@email.com&quot;);
        System.out.println(&quot;Message: &quot; + message);
        System.out.println(&quot;--------------------&quot;);
    }
}
</div><div class="code-block" data-lang="java">
package fr.formation.spring.app.notifications.factory;

public class SmsNotifier implements Notifier {
    @Override
    public void send(String userId, String message) {
        System.out.println(&quot;--- ENVOI SMS ---&quot;);
        System.out.println(&quot;Numéro pour: &quot; + userId);
        System.out.println(&quot;Message: &quot; + message);
        System.out.println(&quot;-----------------&quot;);
    }
}
</div><div class="code-block" data-lang="java">
package fr.formation.spring.app.notifications.factory;

public class PushNotifier implements Notifier {
    @Override
    public void send(String userId, String message) {
        System.out.println(&quot;--- NOTIFICATION PUSH ---&quot;);
        System.out.println(&quot;Device Token pour: &quot; + userId);
        System.out.println(&quot;Message: &quot; + message);
        System.out.println(&quot;-------------------------&quot;);
    }
}
</div></section><section class="chapter"><h4 id="3-la-notifierfactory" data-toc="3-la-notifierfactory">3. La <code class="code" id="-ge6x56_171">NotifierFactory</code></h4><div class="code-block" data-lang="java">
package fr.formation.spring.app.notifications.factory;

public class NotifierFactory {

    public static Notifier getNotifier(String type) {
        if (type == null || type.isEmpty()) {
            return null;
        }
        switch (type.toUpperCase()) {
            case &quot;EMAIL&quot;:
                return new EmailNotifier();
            case &quot;SMS&quot;:
                return new SmsNotifier();
            case &quot;PUSH&quot;:
                return new PushNotifier();
            default:
                throw new IllegalArgumentException(&quot;Type de notificateur inconnu: &quot; + type);
        }
    }
}
</div><aside class="prompt" data-type="tip" data-title="" id="-ge6x56_170"><p>Utiliser un `switch` est souvent plus propre et performant qu'une longue cha&icirc;ne de `if-else if`.</p></aside></section><section class="chapter"><h4 id="4-le-nouveau-notificationservice" data-toc="4-le-nouveau-notificationservice">4. Le nouveau <code class="code" id="-ge6x56_176">NotificationService</code></h4><div class="code-block" data-lang="java">
package fr.formation.spring.app.notifications.factory;

public class NotificationService {

    public void sendNotification(String user, String message, String type) {
        Notifier notifier = NotifierFactory.getNotifier(type);
        if (notifier != null) {
            notifier.send(user, message);
        }
    }
}
</div><p id="-ge6x56_174">Regardez comme cette classe est devenue simple ! Sa seule responsabilit&eacute; est d'orchestrer l'envoi. Pour ajouter un notificateur <code class="code" id="-ge6x56_177">Slack</code>, il suffit de cr&eacute;er la classe <code class="code" id="-ge6x56_178">SlackNotifier</code> et d'ajouter un <code class="code" id="-ge6x56_179">case &quot;SLACK&quot;</code> dans la fabrique. La classe <code class="code" id="-ge6x56_180">NotificationService</code> <span class="control" id="-ge6x56_181">n'a pas besoin d'&ecirc;tre modifi&eacute;e</span>. Le Principe Ouvert/Ferm&eacute; est respect&eacute;.</p></section></section><section class="chapter"><h3 id="le-pattern-builder-monteur" data-toc="le-pattern-builder-monteur">Le Pattern Builder (Monteur)</h3><section class="chapter"><h4 id="l-intention_1" data-toc="l-intention_1">L'intention</h4><p id="-ge6x56_184"><span class="control" id="-ge6x56_187">S&eacute;parer la construction d'un objet complexe de sa repr&eacute;sentation</span>, de sorte que le m&ecirc;me processus de construction puisse cr&eacute;er diff&eacute;rentes repr&eacute;sentations.</p><p id="-ge6x56_185">C'est la solution &eacute;l&eacute;gante au probl&egrave;me des constructeurs &agrave; rallonge (les &quot;telescoping constructors&quot;) et un excellent moyen de cr&eacute;er des objets <span class="control" id="-ge6x56_188">immuables</span>.</p><p id="-ge6x56_186">Pensez &agrave; la pr&eacute;paration d'un sandwich chez Subway. Vous (<code class="code" id="-ge6x56_189">Director</code>) ne vous souciez pas de comment on coupe le pain ou on dispose les l&eacute;gumes. Vous donnez des instructions &agrave; l'employ&eacute; (<code class="code" id="-ge6x56_190">Builder</code>) : &quot;Je veux un pain italien (<code class="code" id="-ge6x56_191">buildPain()</code>), du poulet teriyaki (<code class="code" id="-ge6x56_192">buildGarniture()</code>), pas de fromage (<code class="code" id="-ge6x56_193">buildFromage()</code>), et une sauce sweet onion (<code class="code" id="-ge6x56_194">buildSauce()</code> )&quot;. &Agrave; la fin, vous demandez le r&eacute;sultat final (<code class="code" id="-ge6x56_195">getResult()</code>). Le processus de construction est le m&ecirc;me, mais le r&eacute;sultat ( le sandwich, ou <code class="code" id="-ge6x56_196">Product</code>) peut &ecirc;tre tr&egrave;s diff&eacute;rent.</p></section><section class="chapter"><h4 id="structure-et-impl-mentation_1" data-toc="structure-et-impl-mentation_1">Structure et Impl&eacute;mentation</h4><section class="chapter"><h5 id="diagramme-uml_1" data-toc="diagramme-uml_1">Diagramme UML</h5><style>.theme-dark .plantuml > svg {filter: hue-rotate(180deg) invert(0.9);}div.plantuml {overflow-x: auto;}</style><div class="plantuml"><?xml version="1.0" encoding="us-ascii" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="630px" preserveAspectRatio="none" style="width:854px;height:630px;background:#FFFFFF;" version="1.1" viewBox="0 0 854 630" width="854px" zoomAndPan="magnify"><defs/><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="219" x="310.5" y="23.5352">Diagramme du Pattern Builder</text><!--class Product--><g id="elem_Product"><rect codeLine="5" fill="#F1F1F1" height="113.9531" id="Product" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:0.5;" width="256" x="308.5" y="509.8583"/><ellipse cx="405.75" cy="525.8583" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M408.7231,531.5013 Q408.1421,531.8002 407.5029,531.9496 Q406.8638,532.099 406.1582,532.099 Q403.6514,532.099 402.3315,530.4471 Q401.0117,528.7953 401.0117,525.6742 Q401.0117,522.5448 402.3315,520.8929 Q403.6514,519.2411 406.1582,519.2411 Q406.8638,519.2411 407.5112,519.3905 Q408.1587,519.5399 408.7231,519.8388 L408.7231,522.5614 Q408.0923,521.9804 407.4988,521.7106 Q406.9053,521.4408 406.2744,521.4408 Q404.9297,521.4408 404.2449,522.5075 Q403.5601,523.5741 403.5601,525.6742 Q403.5601,527.766 404.2449,528.8326 Q404.9297,529.8993 406.2744,529.8993 Q406.9053,529.8993 407.4988,529.6295 Q408.0923,529.3597 408.7231,528.7787 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="53" x="426.25" y="531.1493">Product</text><line style="stroke:#181818;stroke-width:0.5;" x1="309.5" x2="563.5" y1="541.8583" y2="541.8583"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="316.5" y="552.6024"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="87" x="328.5" y="559.3934">partA: String</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="316.5" y="569.0907"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="85" x="328.5" y="575.8817">partB: String</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="316.5" y="585.579"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="87" x="328.5" y="592.37">partC: String</text><line style="stroke:#181818;stroke-width:0.5;" x1="309.5" x2="563.5" y1="599.3231" y2="599.3231"/><ellipse cx="319.5" cy="613.0673" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="230" x="328.5" y="616.8583">Product(builder: ConcreteBuilder)</text></g><!--class Builder--><g id="elem_Builder"><rect codeLine="14" fill="#F1F1F1" height="113.9531" id="Builder" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:0.5;" width="249" x="312" y="44.4883"/><ellipse cx="408.25" cy="60.4883" fill="#B4A7E5" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M404.1777,56.2534 L404.1777,54.0952 L411.5571,54.0952 L411.5571,56.2534 L409.0918,56.2534 L409.0918,64.3301 L411.5571,64.3301 L411.5571,66.4883 L404.1777,66.4883 L404.1777,64.3301 L406.6431,64.3301 L406.6431,56.2534 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="48" x="428.75" y="65.7793">Builder</text><line style="stroke:#181818;stroke-width:0.5;" x1="313" x2="560" y1="76.4883" y2="76.4883"/><line style="stroke:#181818;stroke-width:0.5;" x1="313" x2="560" y1="84.4883" y2="84.4883"/><ellipse cx="323" cy="98.2324" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="223" x="332" y="102.0234">buildPartA(value: String): Builder</text><ellipse cx="323" cy="114.7207" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="221" x="332" y="118.5117">buildPartB(value: String): Builder</text><ellipse cx="323" cy="131.209" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="223" x="332" y="135">buildPartC(value: String): Builder</text><ellipse cx="323" cy="147.6973" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="106" x="332" y="151.4883">build(): Product</text></g><!--class ConcreteBuilder--><g id="elem_ConcreteBuilder"><rect codeLine="22" fill="#F1F1F1" height="163.418" id="ConcreteBuilder" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:0.5;" width="249" x="312" y="219.4383"/><ellipse cx="377.25" cy="235.4383" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M380.2231,241.0813 Q379.6421,241.3802 379.0029,241.5296 Q378.3638,241.679 377.6582,241.679 Q375.1514,241.679 373.8315,240.0271 Q372.5117,238.3753 372.5117,235.2542 Q372.5117,232.1248 373.8315,230.4729 Q375.1514,228.8211 377.6582,228.8211 Q378.3638,228.8211 379.0112,228.9705 Q379.6587,229.1199 380.2231,229.4188 L380.2231,232.1414 Q379.5923,231.5604 378.9988,231.2906 Q378.4053,231.0208 377.7744,231.0208 Q376.4297,231.0208 375.7449,232.0875 Q375.0601,233.1541 375.0601,235.2542 Q375.0601,237.346 375.7449,238.4126 Q376.4297,239.4793 377.7744,239.4793 Q378.4053,239.4793 378.9988,239.2095 Q379.5923,238.9397 380.2231,238.3587 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="110" x="397.75" y="240.7293">ConcreteBuilder</text><line style="stroke:#181818;stroke-width:0.5;" x1="313" x2="560" y1="251.4383" y2="251.4383"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="320" y="262.1824"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="87" x="332" y="268.9734">partA: String</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="320" y="278.6707"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="85" x="332" y="285.4617">partB: String</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="320" y="295.159"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="87" x="332" y="301.95">partC: String</text><line style="stroke:#181818;stroke-width:0.5;" x1="313" x2="560" y1="308.9031" y2="308.9031"/><ellipse cx="323" cy="322.6473" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="223" x="332" y="326.4383">buildPartA(value: String): Builder</text><ellipse cx="323" cy="339.1355" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="221" x="332" y="342.9266">buildPartB(value: String): Builder</text><ellipse cx="323" cy="355.6238" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="223" x="332" y="359.4148">buildPartC(value: String): Builder</text><ellipse cx="323" cy="372.1121" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="106" x="332" y="375.9031">build(): Product</text></g><!--class Director--><g id="elem_Director"><rect codeLine="34" fill="#F1F1F1" height="97.4648" id="Director" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:0.5;" width="229" x="7" y="52.7283"/><ellipse cx="89.75" cy="68.7283" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M92.7231,74.3713 Q92.1421,74.6702 91.5029,74.8196 Q90.8638,74.969 90.1582,74.969 Q87.6514,74.969 86.3315,73.3171 Q85.0117,71.6653 85.0117,68.5442 Q85.0117,65.4148 86.3315,63.7629 Q87.6514,62.1111 90.1582,62.1111 Q90.8638,62.1111 91.5112,62.2605 Q92.1587,62.4099 92.7231,62.7088 L92.7231,65.4314 Q92.0923,64.8504 91.4988,64.5806 Q90.9053,64.3108 90.2744,64.3108 Q88.9297,64.3108 88.2449,65.3775 Q87.5601,66.4441 87.5601,68.5442 Q87.5601,70.636 88.2449,71.7026 Q88.9297,72.7693 90.2744,72.7693 Q90.9053,72.7693 91.4988,72.4995 Q92.0923,72.2297 92.7231,71.6487 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="55" x="110.25" y="74.0193">Director</text><line style="stroke:#181818;stroke-width:0.5;" x1="8" x2="235" y1="84.7283" y2="84.7283"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="15" y="95.4724"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="105" x="27" y="102.2634">builder: Builder</text><line style="stroke:#181818;stroke-width:0.5;" x1="8" x2="235" y1="109.2166" y2="109.2166"/><ellipse cx="18" cy="122.9607" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="203" x="27" y="126.7517">constructSportsCar(): Product</text><ellipse cx="18" cy="139.449" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="162" x="27" y="143.24">constructSUV(): Product</text></g><path d="M596,260.5283 L596,292.1494 L555,321.1473 L596,300.1494 L596,331.7705 A0,0 0 0 0 596,331.7705 L847,331.7705 A0,0 0 0 0 847,331.7705 L847,270.5283 L837,260.5283 L596,260.5283 A0,0 0 0 0 596,260.5283 " fill="#7FFFD4" style="stroke:#454645;stroke-width:1.5;"/><path d="M837,260.5283 L837,270.5283 L847,270.5283 L837,260.5283 " fill="#7FFFD4" style="stroke:#454645;stroke-width:1.5;"/><text fill="#454645" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="190" x="602" y="278.0966">La m&#233;thode `build()` retourne</text><text fill="#454645" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="170" x="602" y="293.4072">le produit final, souvent en</text><text fill="#454645" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="230" x="602" y="308.7177">passant `this` (le builder lui-m&#234;me)</text><text fill="#454645" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="173" x="602" y="324.0283">au constructeur du produit.</text><!--reverse link Builder to ConcreteBuilder--><g id="link_Builder_ConcreteBuilder"><path d="M436.5,176.8483 C436.5,195.5583 436.5,198.7883 436.5,218.9883 " fill="none" id="Builder-backto-ConcreteBuilder" style="stroke:#454645;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="none" points="436.5,158.8483,430.5,176.8483,442.5,176.8483,436.5,158.8483" style="stroke:#454645;stroke-width:1.0;"/></g><!--link Director to Builder--><g id="link_Director_Builder"><path codeLine="42" d="M236.11,101.4583 C260.65,101.4583 280.7,101.4583 305.6,101.4583 " fill="none" id="Director-to-Builder" style="stroke:#454645;stroke-width:1.0;"/><polygon fill="#454645" points="311.6,101.4583,302.6,97.4583,306.6,101.4583,302.6,105.4583,311.6,101.4583" style="stroke:#454645;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="39" x="254.5" y="95.0266">utilise</text></g><!--link ConcreteBuilder to Product--><g id="link_ConcreteBuilder_Product"><path codeLine="43" d="M436.5,383.0483 C436.5,424.0783 436.5,466.8783 436.5,503.7383 " fill="none" id="ConcreteBuilder-to-Product" style="stroke:#454645;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="#454645" points="436.5,509.7383,440.5,500.7383,436.5,504.7383,432.5,500.7383,436.5,509.7383" style="stroke:#454645;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="26" x="524.5" y="426.4266">cr&#233;e</text><path d="M441.5,438.6688 L441.5,471.6688 A3.5,3.5 0 0 0 445,475.1688 L630,475.1688 A3.5,3.5 0 0 0 633.5,471.6688 L633.5,445.1688 L623.5,435.1688 L445,435.1688 A3.5,3.5 0 0 0 441.5,438.6688 " fill="#7FFFD4" style="stroke:#454645;stroke-width:1.5;"/><path d="M623.5,435.1688 L623.5,443.4188 A1.75,1.75 0 0 0 625.25,445.1688 L633.5,445.1688 L623.5,435.1688 " fill="#7FFFD4" style="stroke:#454645;stroke-width:1.5;"/><text fill="#454645" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="135" x="447.5" y="452.7372">Le Director conna&#238;t le</text><text fill="#454645" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="171" x="447.5" y="468.0477">processus de construction.</text></g><!--SRC=[pLEzJWCn3Dxz58Qf5RGFS0CIBID39GGJGyETsrhad9FZT44y40oyH5-C7BsxLcK0CJ4wyVVZB_6PRQWctFAJEZ4mDazuViDkhQxE5rN2XJCZ5PmbzXNfEK3fNOouq52bql05O8ADKxikyCwKPTtLivDwFjHmqQD7JtlM0kT1IYMZJcOCYAy0B5bxvKhgvLkv2_n2BLhDqTRvH3tpkEZxZfjclscQ_zGqoaUTwxstVGmdlf7hnkT8nUAnvJyaz8zcl66bqa8toV1aFJYZoo3HDCFkcg0MvqwFgOxlxn- -YGpqawiXimAJiUT8S1hmT7er_Bq2Izsz4O048mo2dkMvm5iwMCxAudOVXfuUfT5GKemfOaK7Jnnasb4ehpU6ONNwh4NnDJNSEgntRxO96R_i8bjYRWn9XI0lJzDQOyCLY_EN64FQvi-09D3aAFEIuT8s79SuoirTbEWJJ-hTUqrZSEbWZ9As6zXHJe6amjOcV080]--></g></svg></div></section><section class="chapter"><h5 id="exemple-construire-un-livre" data-toc="exemple-construire-un-livre">Exemple : Construire un livre</h5><p id="-ge6x56_201">Notre entit&eacute; <code class="code" id="-ge6x56_206">Book</code> peut devenir complexe. Utilisons un Builder pour la cr&eacute;er proprement, surtout si nous voulons la rendre immuable (avec des champs <code class="code" id="-ge6x56_207">final</code>).</p><ol class="list _decimal" id="-ge6x56_202" type="1"><li class="list__item" id="-ge6x56_208"><p id="-ge6x56_209"><span class="control" id="-ge6x56_210">Le Produit (Product)</span>: L'objet <code class="code" id="-ge6x56_211">Book</code>. Pour le rendre immuable, ses champs sont <code class="code" id="-ge6x56_212">final</code> et il n'y a pas de setters.</p></li></ol><div class="code-block" data-lang="java">
// Version immuable de notre entité Book
public class ImmutableBook {
    private final Long id;
    private final String title;
    private final String isbn;
    private final Author author;
    private final Set&lt;Category&gt; categories;

    // Le constructeur est privé et n'est appelé que par le Builder
    private ImmutableBook(BookBuilder builder) {
        this.id = builder.id;
        this.title = builder.title;
        this.isbn = builder.isbn;
        this.author = builder.author;
        this.categories = builder.categories;
    }

    // Uniquement des getters...
}
</div><ol class="list _decimal" id="-ge6x56_204" type="1" start="2"><li class="list__item" id="-ge6x56_213"><p id="-ge6x56_214"><span class="control" id="-ge6x56_215">Le Monteur (Builder)</span>: Une classe, souvent statique et interne au produit, qui accumule les donn&eacute;es de configuration.</p></li></ol><div class="code-block" data-lang="java">
public static class BookBuilder {
    // Les champs du builder reflètent ceux du produit
    private Long id;
    private String title;
    private String isbn;
    private Author author;
    private Set&lt;Category&gt; categories;

    // Le constructeur du builder prend les paramètres obligatoires
    public BookBuilder(String title, String isbn) {
        this.title = title;
        this.isbn = isbn;
    }

    // Méthodes &quot;fluent&quot; pour les paramètres optionnels
    public BookBuilder withId(Long id) {
        this.id = id;
        return this; // Renvoyer 'this' permet le chaînage
    }

    public BookBuilder byAuthor(Author author) {
        this.author = author;
        return this;
    }

    public BookBuilder inCategories(Set&lt;Category&gt; categories) {
        this.categories = categories;
        return this;
    }

    // La méthode finale qui construit l'objet
    public ImmutableBook build() {
        // On peut ajouter des validations ici
        if (title == null || title.isEmpty()) {
            throw new IllegalStateException(&quot;Le titre ne peut être vide&quot;);
        }
        return new ImmutableBook(this);
    }
}
</div></section><section class="chapter"><h5 id="utilisation" data-toc="utilisation">Utilisation</h5><p id="-ge6x56_216">Le code client devient incroyablement lisible :</p><div class="code-block" data-lang="java">
Author herbert = new Author();
herbert.

setName(&quot;Frank Herbert&quot;);

ImmutableBook dune = new ImmutableBook.BookBuilder(&quot;Dune&quot;, &quot;978-2266286260&quot;)
        .byAuthor(herbert)
        .inCategories(Set.of(new Category(&quot;SF&quot;)))
        .build();
</div></section></section></section><section class="chapter"><h3 id="exercice-4-cr-er-un-livre-via-une-api-rest-avec-un-builder" data-toc="exercice-4-cr-er-un-livre-via-une-api-rest-avec-un-builder">Exercice 4 : Cr&eacute;er un livre via une API REST avec un Builder</h3><p id="-ge6x56_218">C'est l'heure de mettre les mains dans le projet fil rouge ! Nous allons cr&eacute;er un endpoint <code class="code" id="-ge6x56_221">POST /api/books</code> pour ajouter un nouveau livre.</p><p id="-ge6x56_219"><span class="control" id="-ge6x56_222">Cahier des charges :</span></p><ol class="list _decimal" id="-ge6x56_220" type="1"><li class="list__item" id="-ge6x56_223"><p id="-ge6x56_228">Cr&eacute;ez un DTO (Data Transfer Object) <code class="code" id="-ge6x56_229">BookCreationDTO</code> qui recevra les donn&eacute;es de la requ&ecirc;te HTTP. Il contiendra <code class="code" id="-ge6x56_230">title</code>, <code class="code" id="-ge6x56_231">isbn</code>, <code class="code" id="-ge6x56_232">authorId</code> et une <code class="code" id="-ge6x56_233">Set&lt;Long&gt;</code> de <code class="code" id="-ge6x56_234">categoryIds</code>.</p></li><li class="list__item" id="-ge6x56_224"><p id="-ge6x56_235">Dans la classe <code class="code" id="-ge6x56_236">Book</code>, ajoutez une classe interne statique <code class="code" id="-ge6x56_237">BookBuilder</code>. Ce builder devra pouvoir construire une entit&eacute; <code class="code" id="-ge6x56_238">Book</code> compl&egrave;te.</p></li><li class="list__item" id="-ge6x56_225"><p id="-ge6x56_239">Cr&eacute;ez un <code class="code" id="-ge6x56_240">BookService</code> avec une m&eacute;thode <code class="code" id="-ge6x56_241">createBook(BookCreationDTO dto)</code>. Cette m&eacute;thode utilisera le <code class="code" id="-ge6x56_242">BookBuilder</code>. Elle devra r&eacute;cup&eacute;rer l'auteur et les cat&eacute;gories &agrave; partir de leurs IDs en utilisant les repositories.</p></li><li class="list__item" id="-ge6x56_226"><p id="-ge6x56_243">Cr&eacute;ez un <code class="code" id="-ge6x56_244">BookController</code> avec une m&eacute;thode <code class="code" id="-ge6x56_245">POST</code> mapp&eacute;e sur <code class="code" id="-ge6x56_246">/api/books</code> qui utilise le <code class="code" id="-ge6x56_247">BookService</code>.</p></li><li class="list__item" id="-ge6x56_227"><p id="-ge6x56_248">Fournissez la requ&ecirc;te HTTP (format <code class="code" id="-ge6x56_249">HTTP Client</code> d'IntelliJ) pour tester votre endpoint.</p></li></ol></section><section class="chapter"><h3 id="correction-exercice-4-collapsible-true" data-toc="correction-exercice-4-collapsible-true">Correction exercice 4 {collapsible='true''}</h3><p id="-ge6x56_250">Absolument ! Voici la solution compl&egrave;te pour cet exercice.</p><section class="chapter"><h4 id="1-le-dto-bookcreationdto-java" data-toc="1-le-dto-bookcreationdto-java">1. Le DTO <code class="code" id="-ge6x56_259">BookCreationDTO.java</code></h4><p id="-ge6x56_257">Cr&eacute;ez un package <code class="code" id="-ge6x56_260">fr.formation.spring.app.dto</code>.</p><div class="code-block" data-lang="java">
package fr.formation.spring.app.dto;

import java.util.Set;

import lombok.Getter;
import lombok.Setter;

@Getter
@Setter
public class BookCreationDTO {
    private String title;
    private String isbn;
    private Long authorId;
    private Set&lt;Long&gt; categoryIds;
}
</div></section><section class="chapter"><h4 id="2-l-entit-book-avec-son-bookbuilder" data-toc="2-l-entit-book-avec-son-bookbuilder">2. L'entit&eacute; <code class="code" id="-ge6x56_264">Book</code> avec son <code class="code" id="-ge6x56_265">BookBuilder</code></h4><p id="-ge6x56_262">Modifiez l'entit&eacute; <code class="code" id="-ge6x56_266">Book.java</code> pour y inclure le builder. Pour cet exercice, nous n'allons pas la rendre immuable pour rester compatible avec JPA, mais le builder reste tr&egrave;s utile.</p><div class="code-block" data-lang="java">
package fr.formation.spring.app.entities;

// ... imports et annotations de l'entité ...

@Entity
@Getter
@Setter
public class Book {
    // ... champs existants ...

    // Builder statique interne
    public static class BookBuilder {
        private String title;
        private String isbn;
        private Author author;
        private Set&lt;Category&gt; categories;

        public BookBuilder(String title, String isbn) {
            this.title = title;
            this.isbn = isbn;
        }

        public BookBuilder withAuthor(Author author) {
            this.author = author;
            return this;
        }

        public BookBuilder withCategories(Set&lt;Category&gt; categories) {
            this.categories = categories;
            return this;
        }

        public Book build() {
            Book book = new Book();
            book.setTitle(this.title);
            book.setIsbn(this.isbn);
            book.setAuthor(this.author);
            book.setCategories(this.categories);
            return book;
        }
    }
}
</div></section><section class="chapter"><h4 id="3-le-bookservice-java" data-toc="3-le-bookservice-java">3. Le <code class="code" id="-ge6x56_270">BookService.java</code></h4><p id="-ge6x56_268">Cr&eacute;ez un package <code class="code" id="-ge6x56_271">fr.formation.spring.app.services</code>.</p><div class="code-block" data-lang="java">
package fr.formation.spring.app.services;

import fr.formation.spring.app.dto.BookCreationDTO;
import fr.formation.spring.app.entities.Author;
import fr.formation.spring.app.entities.Book;
import fr.formation.spring.app.entities.Category;
import fr.formation.spring.app.repositories.AuthorRepository;
import fr.formation.spring.app.repositories.BookRepository;
import fr.formation.spring.app.repositories.CategoryRepository;
import jakarta.persistence.EntityNotFoundException;
import org.springframework.stereotype.Service;

import java.util.HashSet;
import java.util.Set;

@Service
public class BookService {

    private final BookRepository bookRepository;
    private final AuthorRepository authorRepository;
    private final CategoryRepository categoryRepository;

    public BookService(BookRepository br, AuthorRepository ar, CategoryRepository cr) {
        this.bookRepository = br;
        this.authorRepository = ar;
        this.categoryRepository = cr;
    }

    public Book createBook(BookCreationDTO dto) {
        // 1. Récupérer les entités dépendantes
        Author author = authorRepository.findById(dto.getAuthorId())
                .orElseThrow(() -&gt; new EntityNotFoundException(&quot;Auteur non trouvé&quot;));

        Set&lt;Category&gt; categories = new HashSet&lt;&gt;(
                categoryRepository.findAllById(dto.getCategoryIds())
        );

        // 2. Utiliser le Builder
        Book newBook = new Book.BookBuilder(dto.getTitle(), dto.getIsbn())
                .withAuthor(author)
                .withCategories(categories)
                .build();

        // 3. Sauvegarder et retourner le livre créé
        return bookRepository.save(newBook);
    }
}
</div></section><section class="chapter"><h4 id="4-le-bookcontroller-java" data-toc="4-le-bookcontroller-java">4. Le <code class="code" id="-ge6x56_275">BookController.java</code></h4><p id="-ge6x56_273">Cr&eacute;ez un package <code class="code" id="-ge6x56_276">fr.formation.spring.app.controllers</code>.</p><div class="code-block" data-lang="java">
package fr.formation.spring.app.controllers;

import fr.formation.spring.app.dto.BookCreationDTO;
import fr.formation.spring.app.entities.Book;
import fr.formation.spring.app.services.BookService;
import org.springframework.http.HttpStatus;
import org.springframework.http.ResponseEntity;
import org.springframework.web.bind.annotation.*;

@RestController
@RequestMapping(&quot;/api/books&quot;)
public class BookController {

    private final BookService bookService;

    public BookController(BookService bookService) {
        this.bookService = bookService;
    }

    @PostMapping
    public ResponseEntity&lt;Book&gt; createBook(@RequestBody BookCreationDTO bookDTO) {
        Book createdBook = bookService.createBook(bookDTO);
        return new ResponseEntity&lt;&gt;(createdBook, HttpStatus.CREATED);
    }
}
</div></section><section class="chapter"><h4 id="5-la-requ-te-http-pour-tester" data-toc="5-la-requ-te-http-pour-tester">5. La requ&ecirc;te HTTP pour tester</h4><p id="-ge6x56_277">Cr&eacute;ez un fichier <code class="code" id="-ge6x56_280">requests.http</code> &agrave; la racine de votre projet.</p><div class="code-block" data-lang="http">
### Créer un nouveau livre

# Pour que cette requête fonctionne, assurez-vous que l'auteur avec l'ID 1
# et la catégorie avec l'ID 1 existent bien dans la base de données.
# Notre DataInitializer s'en charge au démarrage. Frank Herbert a l'ID 1
# et Science-Fiction a l'ID 1.

POST http://localhost:8080/api/books
Content-Type: application/json

{
  &quot;title&quot;: &quot;Le Messie de Dune&quot;,
  &quot;isbn&quot;: &quot;978-2266155450&quot;,
  &quot;authorId&quot;: 1,
  &quot;categoryIds&quot;: [1]
}
</div><p id="-ge6x56_279">En ex&eacute;cutant cette requ&ecirc;te, vous devriez recevoir une r&eacute;ponse <code class="code" id="-ge6x56_281">201 Created</code> avec le JSON du livre nouvellement cr&eacute;&eacute;, y compris son ID g&eacute;n&eacute;r&eacute; par la base de donn&eacute;es.</p></section></section></section><section class="chapter"><h2 id="pour-aller-plus-loin" data-toc="pour-aller-plus-loin">Pour aller plus loin</h2><section class="chapter"><h3 id="le-pattern-abstract-factory-fabrique-abstraite" data-toc="le-pattern-abstract-factory-fabrique-abstraite">Le Pattern Abstract Factory (Fabrique Abstraite)</h3><section class="chapter"><h4 id="l-intention_4" data-toc="l-intention_4">L'intention</h4><p id="-ge6x56_286"><span class="control" id="-ge6x56_289">Fournir une interface pour cr&eacute;er des familles d'objets li&eacute;s ou d&eacute;pendants sans sp&eacute;cifier leurs classes concr&egrave;tes.</span></p><p id="-ge6x56_287">C'est une &quot;usine d'usines&quot;. Imaginez que vous devez cr&eacute;er une interface utilisateur. Vous avez besoin d'un bouton ET d' une fen&ecirc;tre. Si le th&egrave;me est &quot;Windows&quot;, il vous faut un <code class="code" id="-ge6x56_290">WindowsButton</code> et une <code class="code" id="-ge6x56_291">WindowsWindow</code>. Si le th&egrave;me est &quot;macOS&quot;, il vous faut un <code class="code" id="-ge6x56_292">MacButton</code> et une <code class="code" id="-ge6x56_293">MacWindow</code>.</p><p id="-ge6x56_288">La Fabrique Abstraite (<code class="code" id="-ge6x56_294">UIFactory</code>) fournit des m&eacute;thodes comme <code class="code" id="-ge6x56_295">createButton()</code> et <code class="code" id="-ge6x56_296">createWindow()</code>. Vous aurez ensuite des impl&eacute;mentations concr&egrave;tes comme <code class="code" id="-ge6x56_297">WindowsFactory</code> et <code class="code" id="-ge6x56_298">MacFactory</code> qui s'assureront de cr&eacute;er une famille coh&eacute;rente de produits.</p></section><section class="chapter"><h4 id="diagramme-uml_3" data-toc="diagramme-uml_3">Diagramme UML</h4><style>.theme-dark .plantuml > svg {filter: hue-rotate(180deg) invert(0.9);}div.plantuml {overflow-x: auto;}</style><div class="plantuml"><?xml version="1.0" encoding="us-ascii" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="399px" preserveAspectRatio="none" style="width:957px;height:399px;background:#FFFFFF;" version="1.1" viewBox="0 0 957 399" width="957px" zoomAndPan="magnify"><defs/><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="285" x="329.25" y="23.5352">Diagramme du Pattern Abstract Factory</text><!--class AbstractProductA--><g id="elem_AbstractProductA"><rect codeLine="5" fill="#F1F1F1" height="48" id="AbstractProductA" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:0.5;" width="152" x="495" y="202.9483"/><ellipse cx="510" cy="218.9483" fill="#B4A7E5" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M505.9277,214.7134 L505.9277,212.5552 L513.3071,212.5552 L513.3071,214.7134 L510.8418,214.7134 L510.8418,222.7901 L513.3071,222.7901 L513.3071,224.9483 L505.9277,224.9483 L505.9277,222.7901 L508.3931,222.7901 L508.3931,214.7134 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="120" x="524" y="224.2393">AbstractProductA</text><line style="stroke:#181818;stroke-width:0.5;" x1="496" x2="646" y1="234.9483" y2="234.9483"/><line style="stroke:#181818;stroke-width:0.5;" x1="496" x2="646" y1="242.9483" y2="242.9483"/></g><!--class ConcreteProductA1--><g id="elem_ConcreteProductA1"><rect codeLine="6" fill="#F1F1F1" height="48" id="ConcreteProductA1" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:0.5;" width="166" x="653" y="344.4383"/><ellipse cx="668" cy="360.4383" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M670.9731,366.0813 Q670.3921,366.3802 669.7529,366.5296 Q669.1138,366.679 668.4082,366.679 Q665.9014,366.679 664.5815,365.0271 Q663.2617,363.3753 663.2617,360.2542 Q663.2617,357.1248 664.5815,355.4729 Q665.9014,353.8211 668.4082,353.8211 Q669.1138,353.8211 669.7612,353.9705 Q670.4087,354.1199 670.9731,354.4188 L670.9731,357.1414 Q670.3423,356.5604 669.7488,356.2906 Q669.1553,356.0208 668.5244,356.0208 Q667.1797,356.0208 666.4949,357.0875 Q665.8101,358.1541 665.8101,360.2542 Q665.8101,362.346 666.4949,363.4126 Q667.1797,364.4793 668.5244,364.4793 Q669.1553,364.4793 669.7488,364.2095 Q670.3423,363.9397 670.9731,363.3587 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="134" x="682" y="365.7293">ConcreteProductA1</text><line style="stroke:#181818;stroke-width:0.5;" x1="654" x2="818" y1="376.4383" y2="376.4383"/><line style="stroke:#181818;stroke-width:0.5;" x1="654" x2="818" y1="384.4383" y2="384.4383"/></g><!--class ConcreteProductA2--><g id="elem_ConcreteProductA2"><rect codeLine="7" fill="#F1F1F1" height="48" id="ConcreteProductA2" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:0.5;" width="166" x="450" y="344.4383"/><ellipse cx="465" cy="360.4383" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M467.9731,366.0813 Q467.3921,366.3802 466.7529,366.5296 Q466.1138,366.679 465.4082,366.679 Q462.9014,366.679 461.5815,365.0271 Q460.2617,363.3753 460.2617,360.2542 Q460.2617,357.1248 461.5815,355.4729 Q462.9014,353.8211 465.4082,353.8211 Q466.1138,353.8211 466.7612,353.9705 Q467.4087,354.1199 467.9731,354.4188 L467.9731,357.1414 Q467.3423,356.5604 466.7488,356.2906 Q466.1553,356.0208 465.5244,356.0208 Q464.1797,356.0208 463.4949,357.0875 Q462.8101,358.1541 462.8101,360.2542 Q462.8101,362.346 463.4949,363.4126 Q464.1797,364.4793 465.5244,364.4793 Q466.1553,364.4793 466.7488,364.2095 Q467.3423,363.9397 467.9731,363.3587 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="134" x="479" y="365.7293">ConcreteProductA2</text><line style="stroke:#181818;stroke-width:0.5;" x1="451" x2="615" y1="376.4383" y2="376.4383"/><line style="stroke:#181818;stroke-width:0.5;" x1="451" x2="615" y1="384.4383" y2="384.4383"/></g><!--class AbstractProductB--><g id="elem_AbstractProductB"><rect codeLine="9" fill="#F1F1F1" height="48" id="AbstractProductB" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:0.5;" width="150" x="7" y="202.9483"/><ellipse cx="22" cy="218.9483" fill="#B4A7E5" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M17.9277,214.7134 L17.9277,212.5552 L25.3071,212.5552 L25.3071,214.7134 L22.8418,214.7134 L22.8418,222.7901 L25.3071,222.7901 L25.3071,224.9483 L17.9277,224.9483 L17.9277,222.7901 L20.3931,222.7901 L20.3931,214.7134 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="118" x="36" y="224.2393">AbstractProductB</text><line style="stroke:#181818;stroke-width:0.5;" x1="8" x2="156" y1="234.9483" y2="234.9483"/><line style="stroke:#181818;stroke-width:0.5;" x1="8" x2="156" y1="242.9483" y2="242.9483"/></g><!--class ConcreteProductB1--><g id="elem_ConcreteProductB1"><rect codeLine="10" fill="#F1F1F1" height="48" id="ConcreteProductB1" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:0.5;" width="164" x="248" y="344.4383"/><ellipse cx="263" cy="360.4383" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M265.9731,366.0813 Q265.3921,366.3802 264.7529,366.5296 Q264.1138,366.679 263.4082,366.679 Q260.9014,366.679 259.5815,365.0271 Q258.2617,363.3753 258.2617,360.2542 Q258.2617,357.1248 259.5815,355.4729 Q260.9014,353.8211 263.4082,353.8211 Q264.1138,353.8211 264.7612,353.9705 Q265.4087,354.1199 265.9731,354.4188 L265.9731,357.1414 Q265.3423,356.5604 264.7488,356.2906 Q264.1553,356.0208 263.5244,356.0208 Q262.1797,356.0208 261.4949,357.0875 Q260.8101,358.1541 260.8101,360.2542 Q260.8101,362.346 261.4949,363.4126 Q262.1797,364.4793 263.5244,364.4793 Q264.1553,364.4793 264.7488,364.2095 Q265.3423,363.9397 265.9731,363.3587 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="132" x="277" y="365.7293">ConcreteProductB1</text><line style="stroke:#181818;stroke-width:0.5;" x1="249" x2="411" y1="376.4383" y2="376.4383"/><line style="stroke:#181818;stroke-width:0.5;" x1="249" x2="411" y1="384.4383" y2="384.4383"/></g><!--class ConcreteProductB2--><g id="elem_ConcreteProductB2"><rect codeLine="11" fill="#F1F1F1" height="48" id="ConcreteProductB2" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:0.5;" width="164" x="42" y="344.4383"/><ellipse cx="57" cy="360.4383" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M59.9731,366.0813 Q59.3921,366.3802 58.7529,366.5296 Q58.1138,366.679 57.4082,366.679 Q54.9014,366.679 53.5815,365.0271 Q52.2617,363.3753 52.2617,360.2542 Q52.2617,357.1248 53.5815,355.4729 Q54.9014,353.8211 57.4082,353.8211 Q58.1138,353.8211 58.7612,353.9705 Q59.4087,354.1199 59.9731,354.4188 L59.9731,357.1414 Q59.3423,356.5604 58.7488,356.2906 Q58.1553,356.0208 57.5244,356.0208 Q56.1797,356.0208 55.4949,357.0875 Q54.8101,358.1541 54.8101,360.2542 Q54.8101,362.346 55.4949,363.4126 Q56.1797,364.4793 57.5244,364.4793 Q58.1553,364.4793 58.7488,364.2095 Q59.3423,363.9397 59.9731,363.3587 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="132" x="71" y="365.7293">ConcreteProductB2</text><line style="stroke:#181818;stroke-width:0.5;" x1="43" x2="205" y1="376.4383" y2="376.4383"/><line style="stroke:#181818;stroke-width:0.5;" x1="43" x2="205" y1="384.4383" y2="384.4383"/></g><!--class AbstractFactory--><g id="elem_AbstractFactory"><rect codeLine="13" fill="#F1F1F1" height="80.9766" id="AbstractFactory" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:0.5;" width="269" x="382.5" y="44.4883"/><ellipse cx="459.25" cy="60.4883" fill="#B4A7E5" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M455.1777,56.2534 L455.1777,54.0952 L462.5571,54.0952 L462.5571,56.2534 L460.0918,56.2534 L460.0918,64.3301 L462.5571,64.3301 L462.5571,66.4883 L455.1777,66.4883 L455.1777,64.3301 L457.6431,64.3301 L457.6431,56.2534 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="107" x="479.75" y="65.7793">AbstractFactory</text><line style="stroke:#181818;stroke-width:0.5;" x1="383.5" x2="650.5" y1="76.4883" y2="76.4883"/><line style="stroke:#181818;stroke-width:0.5;" x1="383.5" x2="650.5" y1="84.4883" y2="84.4883"/><ellipse cx="393.5" cy="98.2324" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="243" x="402.5" y="102.0234">createProductA(): AbstractProductA</text><ellipse cx="393.5" cy="114.7207" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="239" x="402.5" y="118.5117">createProductB(): AbstractProductB</text></g><!--class ConcreteFactory1--><g id="elem_ConcreteFactory1"><rect codeLine="19" fill="#F1F1F1" height="80.9766" id="ConcreteFactory1" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:0.5;" width="269" x="681.5" y="186.4583"/><ellipse cx="751.25" cy="202.4583" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M754.2231,208.1013 Q753.6421,208.4002 753.0029,208.5496 Q752.3638,208.699 751.6582,208.699 Q749.1514,208.699 747.8315,207.0471 Q746.5117,205.3953 746.5117,202.2742 Q746.5117,199.1448 747.8315,197.4929 Q749.1514,195.8411 751.6582,195.8411 Q752.3638,195.8411 753.0112,195.9905 Q753.6587,196.1399 754.2231,196.4388 L754.2231,199.1614 Q753.5923,198.5804 752.9988,198.3106 Q752.4053,198.0408 751.7744,198.0408 Q750.4297,198.0408 749.7449,199.1075 Q749.0601,200.1741 749.0601,202.2742 Q749.0601,204.366 749.7449,205.4326 Q750.4297,206.4993 751.7744,206.4993 Q752.4053,206.4993 752.9988,206.2295 Q753.5923,205.9597 754.2231,205.3787 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="121" x="771.75" y="207.7493">ConcreteFactory1</text><line style="stroke:#181818;stroke-width:0.5;" x1="682.5" x2="949.5" y1="218.4583" y2="218.4583"/><line style="stroke:#181818;stroke-width:0.5;" x1="682.5" x2="949.5" y1="226.4583" y2="226.4583"/><ellipse cx="692.5" cy="240.2024" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="243" x="701.5" y="243.9934">createProductA(): AbstractProductA</text><ellipse cx="692.5" cy="256.6907" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="239" x="701.5" y="260.4817">createProductB(): AbstractProductB</text></g><!--class ConcreteFactory2--><g id="elem_ConcreteFactory2"><rect codeLine="24" fill="#F1F1F1" height="80.9766" id="ConcreteFactory2" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:0.5;" width="269" x="191.5" y="186.4583"/><ellipse cx="261.25" cy="202.4583" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M264.2231,208.1013 Q263.6421,208.4002 263.0029,208.5496 Q262.3638,208.699 261.6582,208.699 Q259.1514,208.699 257.8315,207.0471 Q256.5117,205.3953 256.5117,202.2742 Q256.5117,199.1448 257.8315,197.4929 Q259.1514,195.8411 261.6582,195.8411 Q262.3638,195.8411 263.0112,195.9905 Q263.6587,196.1399 264.2231,196.4388 L264.2231,199.1614 Q263.5923,198.5804 262.9988,198.3106 Q262.4053,198.0408 261.7744,198.0408 Q260.4297,198.0408 259.7449,199.1075 Q259.0601,200.1741 259.0601,202.2742 Q259.0601,204.366 259.7449,205.4326 Q260.4297,206.4993 261.7744,206.4993 Q262.4053,206.4993 262.9988,206.2295 Q263.5923,205.9597 264.2231,205.3787 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="121" x="281.75" y="207.7493">ConcreteFactory2</text><line style="stroke:#181818;stroke-width:0.5;" x1="192.5" x2="459.5" y1="218.4583" y2="218.4583"/><line style="stroke:#181818;stroke-width:0.5;" x1="192.5" x2="459.5" y1="226.4583" y2="226.4583"/><ellipse cx="202.5" cy="240.2024" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="243" x="211.5" y="243.9934">createProductA(): AbstractProductA</text><ellipse cx="202.5" cy="256.6907" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="239" x="211.5" y="260.4817">createProductB(): AbstractProductB</text></g><!--class Client--><g id="elem_Client"><rect fill="#F1F1F1" height="48" id="Client" rx="3.5" ry="3.5" style="stroke:#181818;stroke-width:0.5;" width="72" x="276" y="60.9783"/><ellipse cx="291" cy="76.9783" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M293.9731,82.6213 Q293.3921,82.9202 292.7529,83.0696 Q292.1138,83.219 291.4082,83.219 Q288.9014,83.219 287.5815,81.5671 Q286.2617,79.9153 286.2617,76.7942 Q286.2617,73.6648 287.5815,72.0129 Q288.9014,70.3611 291.4082,70.3611 Q292.1138,70.3611 292.7612,70.5105 Q293.4087,70.6599 293.9731,70.9588 L293.9731,73.6814 Q293.3423,73.1004 292.7488,72.8306 Q292.1553,72.5608 291.5244,72.5608 Q290.1797,72.5608 289.4949,73.6275 Q288.8101,74.6941 288.8101,76.7942 Q288.8101,78.886 289.4949,79.9526 Q290.1797,81.0193 291.5244,81.0193 Q292.1553,81.0193 292.7488,80.7495 Q293.3423,80.4797 293.9731,79.8987 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="40" x="305" y="82.2693">Client</text><line style="stroke:#181818;stroke-width:0.5;" x1="277" x2="347" y1="92.9783" y2="92.9783"/><line style="stroke:#181818;stroke-width:0.5;" x1="277" x2="347" y1="100.9783" y2="100.9783"/></g><!--reverse link AbstractProductA to ConcreteProductA1--><g id="link_AbstractProductA_ConcreteProductA1"><path d="M620.1198,261.4997 C638.6098,274.4597 646.76,280.9483 666,297.4383 C683.1,312.0883 701.03,330.0783 714.46,344.1483 " fill="none" id="AbstractProductA-backto-ConcreteProductA1" style="stroke:#454645;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="none" points="605.38,251.1683,616.676,266.413,623.5636,256.5864,605.38,251.1683" style="stroke:#454645;stroke-width:1.0;"/></g><!--reverse link AbstractProductA to ConcreteProductA2--><g id="link_AbstractProductA_ConcreteProductA2"><path d="M559.9119,268.6662 C552.9019,294.4162 546.4,318.2383 539.38,344.0183 " fill="none" id="AbstractProductA-backto-ConcreteProductA2" style="stroke:#454645;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="none" points="564.64,251.2983,554.1226,267.0902,565.7012,270.2422,564.64,251.2983" style="stroke:#454645;stroke-width:1.0;"/></g><!--reverse link AbstractProductB to ConcreteProductB1--><g id="link_AbstractProductB_ConcreteProductB1"><path d="M151.3106,258.4547 C164.0806,263.9147 161.19,262.4883 174,267.4383 C212.15,282.1783 226.4,275.6283 261,297.4383 C280.78,309.8983 299.15,329.0783 311.95,344.2083 " fill="none" id="AbstractProductB-backto-ConcreteProductB1" style="stroke:#454645;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="none" points="134.76,251.3783,148.9518,263.9716,153.6695,252.9379,134.76,251.3783" style="stroke:#454645;stroke-width:1.0;"/></g><!--reverse link AbstractProductB to ConcreteProductB2--><g id="link_AbstractProductB_ConcreteProductB2"><path d="M94.2176,268.5345 C101.9676,294.2845 109.19,318.2383 116.95,344.0183 " fill="none" id="AbstractProductB-backto-ConcreteProductB2" style="stroke:#454645;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="none" points="89.03,251.2983,88.4722,270.2637,99.963,266.8053,89.03,251.2983" style="stroke:#454645;stroke-width:1.0;"/></g><!--reverse link AbstractFactory to ConcreteFactory1--><g id="link_AbstractFactory_ConcreteFactory1"><path d="M618.5819,133.5304 C658.8019,152.3604 690.37,167.1383 730.61,185.9683 " fill="none" id="AbstractFactory-backto-ConcreteFactory1" style="stroke:#454645;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="none" points="602.28,125.8983,616.0378,138.9644,621.1259,128.0965,602.28,125.8983" style="stroke:#454645;stroke-width:1.0;"/></g><!--reverse link AbstractFactory to ConcreteFactory2--><g id="link_AbstractFactory_ConcreteFactory2"><path d="M448.0022,136.5394 C422.3122,155.3694 406.25,167.1383 380.55,185.9683 " fill="none" id="AbstractFactory-backto-ConcreteFactory2" style="stroke:#454645;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="none" points="462.52,125.8983,444.4552,131.7001,451.5492,141.3787,462.52,125.8983" style="stroke:#454645;stroke-width:1.0;"/></g><!--link ConcreteFactory1 to ConcreteProductA1--><g id="link_ConcreteFactory1_ConcreteProductA1"><path codeLine="29" d="M793.08,267.9183 C778.95,292.5583 764.3049,318.0835 752.4049,338.8335 " fill="none" id="ConcreteFactory1-to-ConcreteProductA1" style="stroke:#454645;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="#454645" points="749.42,344.0383,757.3673,338.221,751.9074,339.7009,750.4275,334.2411,749.42,344.0383" style="stroke:#454645;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="26" x="777" y="311.0066">cr&#233;e</text></g><!--link ConcreteFactory1 to ConcreteProductB1--><g id="link_ConcreteFactory1_ConcreteProductB1"><path codeLine="30" d="M681.27,266.6183 C594.75,291.4483 490.9669,321.2323 417.4169,342.3523 " fill="none" id="ConcreteFactory1-to-ConcreteProductB1" style="stroke:#454645;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="#454645" points="411.65,344.0083,421.4044,345.3689,416.4558,342.6283,419.1964,337.6797,411.65,344.0083" style="stroke:#454645;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="26" x="574" y="311.0066">cr&#233;e</text></g><!--link ConcreteFactory2 to ConcreteProductA2--><g id="link_ConcreteFactory2_ConcreteProductA2"><path codeLine="31" d="M385.32,267.9183 C421.88,292.5583 462.5149,319.9344 493.2949,340.6844 " fill="none" id="ConcreteFactory2-to-ConcreteProductA2" style="stroke:#454645;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="#454645" points="498.27,344.0383,493.0433,335.6907,494.1241,341.2434,488.5715,342.3242,498.27,344.0383" style="stroke:#454645;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="26" x="455.13" y="311.0066">cr&#233;e</text></g><!--link ConcreteFactory2 to ConcreteProductB2--><g id="link_ConcreteFactory2_ConcreteProductB2"><path codeLine="32" d="M268.11,267.9183 C232.44,292.5583 192.8668,319.8782 162.8268,340.6282 " fill="none" id="ConcreteFactory2-to-ConcreteProductB2" style="stroke:#454645;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="#454645" points="157.89,344.0383,167.5685,342.2144,162.004,341.1966,163.0218,335.632,157.89,344.0383" style="stroke:#454645;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="26" x="226" y="311.0066">cr&#233;e</text></g><!--link Client to AbstractFactory--><g id="link_Client_AbstractFactory"><path codeLine="34" d="M348.44,84.9783 C359.63,84.9783 364.82,84.9783 376.02,84.9783 " fill="none" id="Client-to-AbstractFactory" style="stroke:#454645;stroke-width:1.0;"/><polygon fill="#454645" points="382.02,84.9783,373.02,80.9783,377.02,84.9783,373.02,88.9783,382.02,84.9783" style="stroke:#454645;stroke-width:1.0;"/></g><!--link Client to AbstractProductA--><g id="link_Client_AbstractProductA"><path codeLine="35" d="M341.31,109.3283 C348.84,114.8983 357.06,120.6283 365,125.4583 C414.28,155.4783 468.3385,181.2883 510.7085,200.1483 " fill="none" id="Client-to-AbstractProductA" style="stroke:#454645;stroke-width:1.0;"/><polygon fill="#454645" points="516.19,202.5883,509.5944,195.274,511.6221,200.555,506.3411,202.5827,516.19,202.5883" style="stroke:#454645;stroke-width:1.0;"/></g><!--link Client to AbstractProductB--><g id="link_Client_AbstractProductB"><path codeLine="36" d="M275.56,108.1483 C233.25,133.8983 168.8957,173.0694 125.7057,199.3494 " fill="none" id="Client-to-AbstractProductB" style="stroke:#454645;stroke-width:1.0;"/><polygon fill="#454645" points="120.58,202.4683,130.3478,201.2071,124.8514,199.8692,126.1893,194.3729,120.58,202.4683" style="stroke:#454645;stroke-width:1.0;"/></g><!--SRC=[jP912i8m44NtSugnAqKKpDA5O2gkUuKOemRIL99HaEA1F8SNCmkjq2P5GJVP_Fzdtdmoe8Cg5PxrnWbBG9gCmcobnTw9CWZR4nQ2I3cBouqd9oJXEZoLksG0sWPb9wHgnC9LsvEa9TPu1Mc4zvXNLZf5wYNDK9T74xPQyfrS8iDwCsaEdkRWVHmyaM6zcGZ7ioki0SOOHedtJSFHl7jAoyGZ9WuORce1FlT4R_eR0s8KWlL3_BY7JWFJwIBov-PXuFscFhBpf9r5fxElxFnjXzpeq19E5ksU8ahJJLBYy000]--></g></svg></div><figure id="-ge6x56_300"><img alt="abstract-factory-Diagramme_du_Pattern_Abstract_Factory.svg" src="images/abstract-factory-Diagramme_du_Pattern_Abstract_Factory.svg" title="abstract-factory-Diagramme_du_Pattern_Abstract_Factory.svg" width="1898" height="798"></figure></section></section><section class="chapter"><h3 id="le-pattern-prototype" data-toc="le-pattern-prototype">Le Pattern Prototype</h3><section class="chapter"><h4 id="l-intention_3" data-toc="l-intention_3">L'intention</h4><p id="-ge6x56_302"><span class="control" id="-ge6x56_306">Sp&eacute;cifier les types d'objets &agrave; cr&eacute;er en utilisant une instance prototype, et cr&eacute;er de nouveaux objets en copiant ce prototype.</span></p><p id="-ge6x56_303">C'est le pattern du clonage. Plut&ocirc;t que de construire un objet complexe de z&eacute;ro, vous prenez un objet existant et vous le copiez. C'est tr&egrave;s efficace si la cr&eacute;ation d'un objet est co&ucirc;teuse (ex: n&eacute;cessite un appel &agrave; la base de donn&eacute;es).</p><p id="-ge6x56_304">En Java, cela se fait via l'interface <code class="code" id="-ge6x56_307">Cloneable</code> et la m&eacute;thode <code class="code" id="-ge6x56_308">clone()</code>.</p><aside class="prompt" data-type="warning" data-title="" id="-ge6x56_305"><p>Attention au **Shallow Copy vs. Deep Copy**. * **Shallow Copy (copie superficielle) :** Copie les champs de types primitifs et les r&eacute;f&eacute;rences. Les objets r&eacute;f&eacute;renc&eacute;s ne sont PAS copi&eacute;s. Le clone et l'original partagent les m&ecirc;mes objets d&eacute;pendants. * **Deep Copy (copie profonde) :** Copie tout, y compris les objets r&eacute;f&eacute;renc&eacute;s, en cr&eacute;ant de nouvelles instances pour eux. C'est souvent ce que l'on veut, mais c'est plus complexe &agrave; impl&eacute;menter.</p></aside></section></section></section><section class="chapter"><h2 id="auto-valuation" data-toc="auto-valuation">Auto-&eacute;valuation</h2><p id="-ge6x56_309">Testez vos nouvelles comp&eacute;tences sur les patterns de cr&eacute;ation !</p><aside class="prompt" data-type="warning" data-title="" id="-ge6x56_310"><p>Les corrections de cette auto-&eacute;valuation se trouvent &agrave; la fin de l'ensemble du support de cours.</p></aside><p id="-ge6x56_311"><span class="control" id="-ge6x56_315">Questions &agrave; Choix Multiple (QCM)</span></p><ol class="list _decimal" id="-ge6x56_312" type="1"><li class="list__item" id="-ge6x56_316"><p id="-ge6x56_320">Vous devez cr&eacute;er un objet qui a 2 param&egrave;tres obligatoires et 8 param&egrave;tres optionnels. Quel pattern est le plus adapt&eacute; pour rendre le code de cr&eacute;ation lisible et s&ucirc;r ?</p><ul class="list _bullet" id="-ge6x56_321"><li class="list__item" id="-ge6x56_322"><p id="-ge6x56_326">a) Singleton</p></li><li class="list__item" id="-ge6x56_323"><p id="-ge6x56_327">b) Factory Method</p></li><li class="list__item" id="-ge6x56_324"><p id="-ge6x56_328">c) Builder</p></li><li class="list__item" id="-ge6x56_325"><p id="-ge6x56_329">d) Prototype</p></li></ul></li><li class="list__item" id="-ge6x56_317"><p id="-ge6x56_330">Le principal avantage du pattern Factory Method est qu'il respecte quel principe S.O.L.I.D. ?</p><ul class="list _bullet" id="-ge6x56_331"><li class="list__item" id="-ge6x56_332"><p id="-ge6x56_336">a) Single Responsibility Principle</p></li><li class="list__item" id="-ge6x56_333"><p id="-ge6x56_337">b) Open/Closed Principle</p></li><li class="list__item" id="-ge6x56_334"><p id="-ge6x56_338">c) Liskov Substitution Principle</p></li><li class="list__item" id="-ge6x56_335"><p id="-ge6x56_339">d) Interface Segregation Principle</p></li></ul></li><li class="list__item" id="-ge6x56_318"><p id="-ge6x56_340">Quel est le principal inconv&eacute;nient de l'utilisation intensive du pattern Singleton (manuel) ?</p><ul class="list _bullet" id="-ge6x56_341"><li class="list__item" id="-ge6x56_342"><p id="-ge6x56_346">a) Il est tr&egrave;s lent &agrave; l'ex&eacute;cution.</p></li><li class="list__item" id="-ge6x56_343"><p id="-ge6x56_347">b) Il rend les tests unitaires difficiles et cr&eacute;e un couplage fort.</p></li><li class="list__item" id="-ge6x56_344"><p id="-ge6x56_348">c) Il ne peut pas &ecirc;tre utilis&eacute; dans un environnement multi-thread&eacute;.</p></li><li class="list__item" id="-ge6x56_345"><p id="-ge6x56_349">d) Il consomme beaucoup de m&eacute;moire.</p></li></ul></li><li class="list__item" id="-ge6x56_319"><p id="-ge6x56_350">Une &quot;Fabrique Abstraite&quot; (Abstract Factory) est con&ccedil;ue pour...</p><ul class="list _bullet" id="-ge6x56_351"><li class="list__item" id="-ge6x56_352"><p id="-ge6x56_356">a) Cr&eacute;er une seule instance d'un objet.</p></li><li class="list__item" id="-ge6x56_353"><p id="-ge6x56_357">b) Cr&eacute;er des familles d'objets li&eacute;s et coh&eacute;rents.</p></li><li class="list__item" id="-ge6x56_354"><p id="-ge6x56_358">c) Cloner un objet existant.</p></li><li class="list__item" id="-ge6x56_355"><p id="-ge6x56_359">d) Rendre un objet immuable.</p></li></ul></li></ol><p id="-ge6x56_313"><span class="control" id="-ge6x56_360">Questions Ouvertes</span></p><ol class="list _decimal" id="-ge6x56_314" type="1" start="5"><li class="list__item" id="-ge6x56_361"><p id="-ge6x56_363">Expliquez la diff&eacute;rence fondamentale entre le pattern Factory Method et le pattern Abstract Factory.</p></li><li class="list__item" id="-ge6x56_362"><p id="-ge6x56_364">Vous utilisez le pattern Prototype pour cloner un objet <code class="code" id="-ge6x56_365">Order</code> qui contient une <code class="code" id="-ge6x56_366">List&lt;OrderItem&gt;</code> et une r&eacute;f&eacute;rence &agrave; un objet <code class="code" id="-ge6x56_367">Customer</code>. D&eacute;crivez ce qui se passe lors d'une copie superficielle (shallow copy) et pourquoi cela peut &ecirc;tre probl&eacute;matique.</p></li></ol></section><section class="chapter"><h2 id="conclusion" data-toc="conclusion">Conclusion</h2><p id="-ge6x56_368">F&eacute;licitations ! Vous venez de ma&icirc;triser les outils les plus puissants pour contr&ocirc;ler la cr&eacute;ation d'objets.</p><p id="-ge6x56_369">Vous avez appris &agrave; :</p><ul class="list _bullet" id="-ge6x56_370"><li class="list__item" id="-ge6x56_373"><p id="-ge6x56_377">Garantir l'unicit&eacute; d'une instance avec le <span class="control" id="-ge6x56_378">Singleton</span>.</p></li><li class="list__item" id="-ge6x56_374"><p id="-ge6x56_379">D&eacute;l&eacute;guer la logique d'instanciation &agrave; des sous-classes avec la <span class="control" id="-ge6x56_380">Factory Method</span>, d&eacute;couplant ainsi votre code.</p></li><li class="list__item" id="-ge6x56_375"><p id="-ge6x56_381">Construire des objets complexes pas &agrave; pas et de mani&egrave;re lisible avec le <span class="control" id="-ge6x56_382">Builder</span>.</p></li><li class="list__item" id="-ge6x56_376"><p id="-ge6x56_383">Et vous avez eu un aper&ccedil;u de la cr&eacute;ation de familles d'objets avec l' <span class="control" id="-ge6x56_384">Abstract Factory</span> et du clonage avec le * <span class="emphasis" id="-ge6x56_385">Prototype</span>*.</p></li></ul><p id="-ge6x56_371">Ces patterns sont la fondation d'un code flexible et maintenable. Vous les retrouverez partout, que ce soit dans le JDK, dans Spring, ou dans les librairies que vous utilisez tous les jours.</p><p id="-ge6x56_372">Maintenant que nous savons comment <span class="emphasis" id="-ge6x56_386">cr&eacute;er</span> nos objets proprement, le prochain chapitre nous apprendra comment les <span class="emphasis" id="-ge6x56_387">assembler</span> pour former des structures plus grandes et plus robustes. Place aux <span class="control" id="-ge6x56_388">Patterns de Structure</span></p></section><div class="last-modified">25 juillet 2025</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="001-00-intro.html" class="navigation-links__prev">Introduction aux Design Patterns</a><a href="003-00-structural-patterns.html" class="navigation-links__next">Les Patterns de Structure : L'Art d'Assembler les Objets</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="https://resources.jetbrains.com/writerside/apidoc/6.22.0-b776/app.js"></script></body></html>